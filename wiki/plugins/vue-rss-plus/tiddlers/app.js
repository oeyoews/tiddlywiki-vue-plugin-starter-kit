"use strict";const e=window.Vue;async function b(o){let c;o.startsWith("http")?c=await(await fetch(o)).text():c=o;const i=new DOMParser().parseFromString(c,"text/xml"),s=(a,g)=>{var n,t;return((t=(n=a==null?void 0:a.getElementsByTagName(g))==null?void 0:n[0])==null?void 0:t.textContent)||""},m=a=>{var g;try{return((g=new DOMParser().parseFromString(a,"text/html").querySelector("img"))==null?void 0:g.src)||""}catch{return""}},u=i.querySelector("channel")||i,d=i.querySelectorAll("item, entry"),h={title:s(u,"title"),link:s(u,"link"),description:s(u,"description"),update:E(s(u,"lastBuildDate")||s(u,"pubDate")||s(u,"updated"))||""},x=[...d].map(a=>{var f;const g=s(a,"title"),n=s(a,"link"),t=s(a,"description")||"",l=s(a,"content:encoded")||s(a,"content")||"",p=s(a,"pubDate")||s(a,"updated")||"",w=t+l,v=((f=a.querySelector("enclosure"))==null?void 0:f.getAttribute("url"))||"",y=m(l||t);return{title:g,link:n,summary:w,pubDate:p,mp3:v,src:y}});return{channel:h,items:x}}function E(o){var c=new Date(o),r=new Date,i=Math.abs(r-c)/1e3,s={年:31536e3,月:2592e3,周:604800,天:86400,小时:3600,分钟:60,秒:1},m="";for(var u in s){var d=Math.floor(i/s[u]);if(d>0){m+=d+" "+u+"前";break}}return m}const _={class:"flex-1 text-left"},k={class:"text-xs text-gray-500 group-hover:text-gray-700"},V={__name:"FeedButton",props:{feed:Object,selected:Boolean},setup(o){return(c,r)=>(e.openBlock(),e.createElementBlock("button",{class:e.normalizeClass(["w-full flex items-center px-3 py-2 text-sm text-gray-700 rounded-lg hover:bg-gray-100 transition-colors group",o.selected?"bg-blue-100 font-bold":""]),onClick:r[0]||(r[0]=i=>c.$emit("click"))},[e.createElementVNode("div",{class:"w-2 h-2 rounded-full",style:e.normalizeStyle({backgroundColor:o.feed.color})},null,4),e.createElementVNode("span",_,e.toDisplayString(o.feed.name),1),e.createElementVNode("span",k,e.toDisplayString(o.feed.count),1)],2))}},N={class:"font-semibold"},B={class:"text-sm text-gray-600"},S={__name:"ArticleCard",props:{article:Object},setup(o){return(c,r)=>(e.openBlock(),e.createElementBlock("div",{class:"bg-white p-3 mb-3 rounded shadow cursor-pointer hover:bg-blue-50",onClick:r[0]||(r[0]=i=>c.$emit("click"))},[e.createElementVNode("h3",N,e.toDisplayString(o.article.title),1),e.createElementVNode("p",B,e.toDisplayString(o.article.summary),1)]))}},D=`
<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-500" viewBox="0 0 20 20" fill="currentColor">
  <path d="M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z" />
  <path d="M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z" />
</svg>
`,M=`
<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-500" viewBox="0 0 20 20" fill="currentColor">
  <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd" />
</svg>
`,F=`
<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-500" viewBox="0 0 20 20" fill="currentColor">
  <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" />
  <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd" />
</svg>
`,C=["https://dev.to/feed","https://www.freecodecamp.org/news/rss/"],T={class:"flex h-screen"},L={class:"w-64 p-4 shadow-md"},$={class:"relative mb-4"},A={class:"flex mb-4 space-x-2"},H=["disabled"],z={class:"space-y-2 mb-4 hidden"},R={class:"w-full flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"},j=["innerHTML"],q={class:"w-full flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"},P=["innerHTML"],U={class:"w-full flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"},I=["innerHTML"],O={class:"space-y-1"},W={class:"flex-1 overflow-y-auto p-4"},G={class:"w-1/2 overflow-y-auto bg-white p-4 shadow-md"},J={class:"text-xl font-bold mb-4"},K={class:"text-sm text-gray-500 mb-4"},Q=["innerHTML"],X={key:1,class:"text-gray-400 text-center mt-20"},Y=e.defineComponent({__name:"RSS",setup(o){const c=e.ref(""),r=e.ref(""),i=e.ref(C.map(n=>{let t=n.replace(/^https?:\/\//,"").replace(/\/$/,"");return t.length>30&&(t=t.slice(0,30)+"..."),{name:t,url:n,color:"gray",count:0,articles:[]}})),s=e.computed(()=>i.value.filter(n=>n.name.toLowerCase().includes(c.value.toLowerCase()))),m=e.ref(null),u=e.computed(()=>{const n=i.value.find(t=>t.name===m.value);return n?n.articles:[]}),d=e.ref(null);async function h(n){var l;if(!n.url)return;let t=n.url;if(window!=null&&window.electronAPI&&(t=await((l=window.electronAPI)==null?void 0:l.startFetchRSSData({url:n.url}))),!(n.articles&&n.articles.length>0))try{const{channel:p,items:w}=await b(t);n.articles=w.map((v,y)=>{var f;return{id:y,title:v.title,summary:((f=v.summary)==null?void 0:f.replace(/<[^>]+>/g,"").slice(0,100))||"",author:p.title||"",date:v.pubDate||"",content:v.summary||"",link:v.link,src:v.src,mp3:v.mp3}}),n.count=n.articles.length}catch{n.articles=[],n.count=0}}async function x(n){m.value=n;const t=i.value.find(l=>l.name===n);t&&((!t.articles||t.articles.length===0)&&await h(t),d.value=t.articles&&t.articles.length>0?t.articles[0]:null)}function a(n){d.value=n}async function g(){const n=r.value.trim();if(!n)return;let t=n.replace(/^https?:\/\//,"").replace(/\/$/,"");if(t.length>30&&(t=t.slice(0,30)+"..."),i.value.some(p=>p.url===n||p.name===t)){r.value="";return}const l={name:t,url:n,color:"gray",count:0,articles:[]};i.value.push(l),m.value=t,r.value="",await h(l),d.value=l.articles&&l.articles.length>0?l.articles[0]:null}return i.value.length>0&&x(i.value[0].name),e.watch(m,async n=>{const t=i.value.find(l=>l.name===n);t&&(!t.articles||t.articles.length===0)&&await h(t),d.value=t&&t.articles.length>0?t.articles[0]:null}),(n,t)=>(e.openBlock(),e.createElementBlock("div",T,[e.createElementVNode("div",L,[t[6]||(t[6]=e.createElementVNode("div",{class:"flex items-center justify-between mb-6"},[e.createElementVNode("h2",{class:"text-lg font-semibold text-gray-800"},"Feeds")],-1)),e.createElementVNode("div",$,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>c.value=l),type:"text",placeholder:"Search feeds...",class:"w-[90%] p-2 rounded border border-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-colors"},null,512),[[e.vModelText,c.value]])]),e.createElementVNode("div",A,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>r.value=l),type:"text",placeholder:"Add RSS URL",class:"flex-1 p-2 rounded border border-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-colors"},null,512),[[e.vModelText,r.value]]),e.createElementVNode("button",{class:"px-3 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",onClick:g,disabled:!r.value.trim()}," Add ",8,H)]),e.createElementVNode("div",z,[e.createElementVNode("button",R,[e.createElementVNode("span",{class:"h-5 w-5 mr-3",innerHTML:e.unref(D)},null,8,j),t[2]||(t[2]=e.createTextVNode(" All Feeds "))]),e.createElementVNode("button",q,[e.createElementVNode("span",{class:"h-5 w-5 mr-3",innerHTML:e.unref(M)},null,8,P),t[3]||(t[3]=e.createTextVNode(" Favorites "))]),e.createElementVNode("button",U,[e.createElementVNode("span",{class:"h-5 w-5 mr-3",innerHTML:e.unref(F)},null,8,I),t[4]||(t[4]=e.createTextVNode(" Recent "))])]),e.createElementVNode("div",O,[t[5]||(t[5]=e.createElementVNode("div",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider px-3 mb-2"}," My Feeds ",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.value,l=>(e.openBlock(),e.createBlock(V,{key:l.name,feed:l,selected:m.value===l.name,onClick:p=>x(l.name)},null,8,["feed","selected","onClick"]))),128))])]),e.createElementVNode("div",W,[t[7]||(t[7]=e.createElementVNode("h2",{class:"text-lg font-semibold mb-4"},"Articles",-1)),e.createElementVNode("div",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(u.value,l=>(e.openBlock(),e.createBlock(S,{key:l.id,article:l,onClick:p=>a(l)},null,8,["article","onClick"]))),128))])]),e.createElementVNode("div",G,[d.value?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("h2",J,e.toDisplayString(d.value.title),1),e.createElementVNode("p",K,e.toDisplayString(d.value.author)+", "+e.toDisplayString(d.value.date),1),e.createElementVNode("div",null,[e.createElementVNode("p",{innerHTML:d.value.content},null,8,Q),t[8]||(t[8]=e.createElementVNode("div",{class:"mt-4 bg-gray-200 h-64 flex items-center justify-center"}," Article Image/Diagram ",-1)),t[9]||(t[9]=e.createElementVNode("p",{class:"mt-4"},"...",-1))])],64)):(e.openBlock(),e.createElementBlock("div",X,"暂无文章"))])]))}}),Z={class:"vue-rss-plus-plugin"},ee=e.defineComponent({__name:"App",props:{title:{},theme:{},showLogos:{type:Boolean}},setup(o){return(c,r)=>(e.openBlock(),e.createElementBlock("div",Z,[e.createVNode(Y)]))}});function te(o={}){return function(c={}){const r={...o,...c};return{render(){return e.h(ee,r)}}}}module.exports=te;
