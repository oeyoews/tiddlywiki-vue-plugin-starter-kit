"use strict";var $a=Object.defineProperty;var Da=(e,t,n)=>t in e?$a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var fe=(e,t,n)=>Da(e,typeof t!="symbol"?t+"":t,n);const s=window.Vue;function Gt(e){return s.getCurrentScope()?(s.onScopeDispose(e),!0):!1}function Te(e){return typeof e=="function"?e():s.unref(e)}const Ba=typeof window<"u"&&typeof document<"u",Va=e=>typeof e<"u",Pa=Object.prototype.toString,Ra=e=>Pa.call(e)==="[object Object]",Aa=()=>{};function za(e,t){function n(...r){return new Promise((o,a)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(o).catch(a)})}return n}const yi=e=>e();function La(e=yi){const t=s.ref(!0);function n(){t.value=!1}function r(){t.value=!0}const o=(...a)=>{t.value&&e(...a)};return{isActive:s.readonly(t),pause:n,resume:r,eventFilter:o}}function Vo(e,t=!1,n="Timeout"){return new Promise((r,o)=>{setTimeout(t?()=>o(n):r,e)})}function Fa(e,t,n={}){const{eventFilter:r=yi,...o}=n;return s.watch(e,za(r,t),o)}function Ue(e,t,n={}){const{eventFilter:r,...o}=n,{eventFilter:a,pause:i,resume:l,isActive:u}=La(r);return{stop:Fa(e,t,{...o,eventFilter:a}),pause:i,resume:l,isActive:u}}function Ha(e,t={}){if(!s.isRef(e))return s.toRefs(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const r in e.value)n[r]=s.customRef(()=>({get(){return e.value[r]},set(o){var a;if((a=Te(t.replaceRef))!=null?a:!0)if(Array.isArray(e.value)){const l=[...e.value];l[r]=o,e.value=l}else{const l={...e.value,[r]:o};Object.setPrototypeOf(l,Object.getPrototypeOf(e.value)),e.value=l}else e.value[r]=o}}));return n}function lo(e,t=!1){function n(f,{flush:h="sync",deep:p=!1,timeout:w,throwOnTimeout:v}={}){let m=null;const y=[new Promise(g=>{m=s.watch(e,b=>{f(b)!==t&&(m==null||m(),g(b))},{flush:h,deep:p,immediate:!0})})];return w!=null&&y.push(Vo(w,v).then(()=>Te(e)).finally(()=>m==null?void 0:m())),Promise.race(y)}function r(f,h){if(!s.isRef(f))return n(b=>b===f,h);const{flush:p="sync",deep:w=!1,timeout:v,throwOnTimeout:m}=h??{};let E=null;const g=[new Promise(b=>{E=s.watch([e,f],([$,R])=>{t!==($===R)&&(E==null||E(),b($))},{flush:p,deep:w,immediate:!0})})];return v!=null&&g.push(Vo(v,m).then(()=>Te(e)).finally(()=>(E==null||E(),Te(e)))),Promise.race(g)}function o(f){return n(h=>!!h,f)}function a(f){return r(null,f)}function i(f){return r(void 0,f)}function l(f){return n(Number.isNaN,f)}function u(f,h){return n(p=>{const w=Array.from(p);return w.includes(f)||w.includes(Te(f))},h)}function d(f){return c(1,f)}function c(f=1,h){let p=-1;return n(()=>(p+=1,p>=f),h)}return Array.isArray(Te(e))?{toMatch:n,toContains:u,changed:d,changedTimes:c,get not(){return lo(e,!t)}}:{toMatch:n,toBe:r,toBeTruthy:o,toBeNull:a,toBeNaN:l,toBeUndefined:i,changed:d,changedTimes:c,get not(){return lo(e,!t)}}}function uo(e){return lo(e)}function Ga(e){var t;const n=Te(e);return(t=n==null?void 0:n.$el)!=null?t:n}const wi=Ba?window:void 0;function _i(...e){let t,n,r,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,o]=e,t=wi):[t,n,r,o]=e,!t)return Aa;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const a=[],i=()=>{a.forEach(c=>c()),a.length=0},l=(c,f,h,p)=>(c.addEventListener(f,h,p),()=>c.removeEventListener(f,h,p)),u=s.watch(()=>[Ga(t),Te(o)],([c,f])=>{if(i(),!c)return;const h=Ra(f)?{...f}:f;a.push(...n.flatMap(p=>r.map(w=>l(c,p,w,h))))},{immediate:!0,flush:"post"}),d=()=>{u(),i()};return Gt(d),d}function Ya(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Po(...e){let t,n,r={};e.length===3?(t=e[0],n=e[1],r=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],r=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:o=wi,eventName:a="keydown",passive:i=!1,dedupe:l=!1}=r,u=Ya(t);return _i(o,a,c=>{c.repeat&&Te(l)||u(c)&&n(c)},i)}function qa(e){return JSON.parse(JSON.stringify(e))}function nn(e,t,n,r={}){var o,a,i;const{clone:l=!1,passive:u=!1,eventName:d,deep:c=!1,defaultValue:f,shouldEmit:h}=r,p=s.getCurrentInstance(),w=n||(p==null?void 0:p.emit)||((o=p==null?void 0:p.$emit)==null?void 0:o.bind(p))||((i=(a=p==null?void 0:p.proxy)==null?void 0:a.$emit)==null?void 0:i.bind(p==null?void 0:p.proxy));let v=d;t||(t="modelValue"),v=v||`update:${t.toString()}`;const m=g=>l?typeof l=="function"?l(g):qa(g):g,E=()=>Va(e[t])?m(e[t]):f,y=g=>{h?h(g)&&w(v,g):w(v,g)};if(u){const g=E(),b=s.ref(g);let $=!1;return s.watch(()=>e[t],R=>{$||($=!0,b.value=m(R),s.nextTick(()=>$=!1))}),s.watch(b,R=>{!$&&(R!==e[t]||c)&&y(R)},{deep:c}),b}else return s.computed({get(){return E()},set(g){y(g)}})}var Wa={value:()=>{}};function Yt(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new It(n)}function It(e){this._=e}function Xa(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}It.prototype=Yt.prototype={constructor:It,on:function(e,t){var n=this._,r=Xa(e+"",n),o,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((o=(e=r[a]).type)&&(o=Ua(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(o=(e=r[a]).type)n[o]=Ro(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Ro(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new It(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,a;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,o=a.length;r<o;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};function Ua(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function Ro(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Wa,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var co="http://www.w3.org/1999/xhtml";const Ao={svg:"http://www.w3.org/2000/svg",xhtml:co,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qt(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ao.hasOwnProperty(t)?{space:Ao[t],local:e}:e}function ja(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===co&&t.documentElement.namespaceURI===co?t.createElement(e):t.createElementNS(n,e)}}function Za(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function bi(e){var t=qt(e);return(t.local?Za:ja)(t)}function Ka(){}function No(e){return e==null?Ka:function(){return this.querySelector(e)}}function Ja(e){typeof e!="function"&&(e=No(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,l=r[o]=new Array(i),u,d,c=0;c<i;++c)(u=a[c])&&(d=e.call(u,u.__data__,c,a))&&("__data__"in u&&(d.__data__=u.__data__),l[c]=d);return new we(r,this._parents)}function Qa(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function es(){return[]}function Ei(e){return e==null?es:function(){return this.querySelectorAll(e)}}function ts(e){return function(){return Qa(e.apply(this,arguments))}}function ns(e){typeof e=="function"?e=ts(e):e=Ei(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var i=t[a],l=i.length,u,d=0;d<l;++d)(u=i[d])&&(r.push(e.call(u,u.__data__,d,i)),o.push(u));return new we(r,o)}function xi(e){return function(){return this.matches(e)}}function Ni(e){return function(t){return t.matches(e)}}var os=Array.prototype.find;function rs(e){return function(){return os.call(this.children,e)}}function is(){return this.firstElementChild}function as(e){return this.select(e==null?is:rs(typeof e=="function"?e:Ni(e)))}var ss=Array.prototype.filter;function ls(){return Array.from(this.children)}function us(e){return function(){return ss.call(this.children,e)}}function cs(e){return this.selectAll(e==null?ls:us(typeof e=="function"?e:Ni(e)))}function ds(e){typeof e!="function"&&(e=xi(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,l=r[o]=[],u,d=0;d<i;++d)(u=a[d])&&e.call(u,u.__data__,d,a)&&l.push(u);return new we(r,this._parents)}function ki(e){return new Array(e.length)}function fs(){return new we(this._enter||this._groups.map(ki),this._parents)}function $t(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}$t.prototype={constructor:$t,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function hs(e){return function(){return e}}function ps(e,t,n,r,o,a){for(var i=0,l,u=t.length,d=a.length;i<d;++i)(l=t[i])?(l.__data__=a[i],r[i]=l):n[i]=new $t(e,a[i]);for(;i<u;++i)(l=t[i])&&(o[i]=l)}function gs(e,t,n,r,o,a,i){var l,u,d=new Map,c=t.length,f=a.length,h=new Array(c),p;for(l=0;l<c;++l)(u=t[l])&&(h[l]=p=i.call(u,u.__data__,l,t)+"",d.has(p)?o[l]=u:d.set(p,u));for(l=0;l<f;++l)p=i.call(e,a[l],l,a)+"",(u=d.get(p))?(r[l]=u,u.__data__=a[l],d.delete(p)):n[l]=new $t(e,a[l]);for(l=0;l<c;++l)(u=t[l])&&d.get(h[l])===u&&(o[l]=u)}function ms(e){return e.__data__}function vs(e,t){if(!arguments.length)return Array.from(this,ms);var n=t?gs:ps,r=this._parents,o=this._groups;typeof e!="function"&&(e=hs(e));for(var a=o.length,i=new Array(a),l=new Array(a),u=new Array(a),d=0;d<a;++d){var c=r[d],f=o[d],h=f.length,p=ys(e.call(c,c&&c.__data__,d,r)),w=p.length,v=l[d]=new Array(w),m=i[d]=new Array(w),E=u[d]=new Array(h);n(c,f,v,m,E,p,t);for(var y=0,g=0,b,$;y<w;++y)if(b=v[y]){for(y>=g&&(g=y+1);!($=m[g])&&++g<w;);b._next=$||null}}return i=new we(i,r),i._enter=l,i._exit=u,i}function ys(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ws(){return new we(this._exit||this._groups.map(ki),this._parents)}function _s(e,t,n){var r=this.enter(),o=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?a.remove():n(a),r&&o?r.merge(o).order():o}function bs(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,i=Math.min(o,a),l=new Array(o),u=0;u<i;++u)for(var d=n[u],c=r[u],f=d.length,h=l[u]=new Array(f),p,w=0;w<f;++w)(p=d[w]||c[w])&&(h[w]=p);for(;u<o;++u)l[u]=n[u];return new we(l,this._parents)}function Es(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,a=r[o],i;--o>=0;)(i=r[o])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function xs(e){e||(e=Ns);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var i=n[a],l=i.length,u=o[a]=new Array(l),d,c=0;c<l;++c)(d=i[c])&&(u[c]=d);u.sort(t)}return new we(o,this._parents).order()}function Ns(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ks(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ss(){return Array.from(this)}function Cs(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null}function Is(){let e=0;for(const t of this)++e;return e}function Ms(){return!this.node()}function Ts(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],a=0,i=o.length,l;a<i;++a)(l=o[a])&&e.call(l,l.__data__,a,o);return this}function Os(e){return function(){this.removeAttribute(e)}}function $s(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ds(e,t){return function(){this.setAttribute(e,t)}}function Bs(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Vs(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ps(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Rs(e,t){var n=qt(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?$s:Os:typeof t=="function"?n.local?Ps:Vs:n.local?Bs:Ds)(n,t))}function Si(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function As(e){return function(){this.style.removeProperty(e)}}function zs(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ls(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Fs(e,t,n){return arguments.length>1?this.each((t==null?As:typeof t=="function"?Ls:zs)(e,t,n??"")):Je(this.node(),e)}function Je(e,t){return e.style.getPropertyValue(t)||Si(e).getComputedStyle(e,null).getPropertyValue(t)}function Hs(e){return function(){delete this[e]}}function Gs(e,t){return function(){this[e]=t}}function Ys(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function qs(e,t){return arguments.length>1?this.each((t==null?Hs:typeof t=="function"?Ys:Gs)(e,t)):this.node()[e]}function Ci(e){return e.trim().split(/^|\s+/)}function ko(e){return e.classList||new Ii(e)}function Ii(e){this._node=e,this._names=Ci(e.getAttribute("class")||"")}Ii.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Mi(e,t){for(var n=ko(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Ti(e,t){for(var n=ko(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Ws(e){return function(){Mi(this,e)}}function Xs(e){return function(){Ti(this,e)}}function Us(e,t){return function(){(t.apply(this,arguments)?Mi:Ti)(this,e)}}function js(e,t){var n=Ci(e+"");if(arguments.length<2){for(var r=ko(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?Us:t?Ws:Xs)(n,t))}function Zs(){this.textContent=""}function Ks(e){return function(){this.textContent=e}}function Js(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Qs(e){return arguments.length?this.each(e==null?Zs:(typeof e=="function"?Js:Ks)(e)):this.node().textContent}function el(){this.innerHTML=""}function tl(e){return function(){this.innerHTML=e}}function nl(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ol(e){return arguments.length?this.each(e==null?el:(typeof e=="function"?nl:tl)(e)):this.node().innerHTML}function rl(){this.nextSibling&&this.parentNode.appendChild(this)}function il(){return this.each(rl)}function al(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function sl(){return this.each(al)}function ll(e){var t=typeof e=="function"?e:bi(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ul(){return null}function cl(e,t){var n=typeof e=="function"?e:bi(e),r=t==null?ul:typeof t=="function"?t:No(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function dl(){var e=this.parentNode;e&&e.removeChild(this)}function fl(){return this.each(dl)}function hl(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pl(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gl(e){return this.select(e?pl:hl)}function ml(e){return arguments.length?this.property("__data__",e):this.node().__data__}function vl(e){return function(t){e.call(this,t,this.__data__)}}function yl(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function wl(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,a;n<o;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function _l(e,t,n){return function(){var r=this.__on,o,a=vl(t);if(r){for(var i=0,l=r.length;i<l;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=n),o.value=t;return}}this.addEventListener(e.type,a,n),o={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(o):this.__on=[o]}}function bl(e,t,n){var r=yl(e+""),o,a=r.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,d=l.length,c;u<d;++u)for(o=0,c=l[u];o<a;++o)if((i=r[o]).type===c.type&&i.name===c.name)return c.value}return}for(l=t?_l:wl,o=0;o<a;++o)this.each(l(r[o],t,n));return this}function Oi(e,t,n){var r=Si(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function El(e,t){return function(){return Oi(this,e,t)}}function xl(e,t){return function(){return Oi(this,e,t.apply(this,arguments))}}function Nl(e,t){return this.each((typeof t=="function"?xl:El)(e,t))}function*kl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length,i;o<a;++o)(i=r[o])&&(yield i)}var $i=[null];function we(e,t){this._groups=e,this._parents=t}function vt(){return new we([[document.documentElement]],$i)}function Sl(){return this}we.prototype=vt.prototype={constructor:we,select:Ja,selectAll:ns,selectChild:as,selectChildren:cs,filter:ds,data:vs,enter:fs,exit:ws,join:_s,merge:bs,selection:Sl,order:Es,sort:xs,call:ks,nodes:Ss,node:Cs,size:Is,empty:Ms,each:Ts,attr:Rs,style:Fs,property:qs,classed:js,text:Qs,html:ol,raise:il,lower:sl,append:ll,insert:cl,remove:fl,clone:gl,datum:ml,on:bl,dispatch:Nl,[Symbol.iterator]:kl};function be(e){return typeof e=="string"?new we([[document.querySelector(e)]],[document.documentElement]):new we([[e]],$i)}function Cl(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Se(e,t){if(e=Cl(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const Il={passive:!1},ct={capture:!0,passive:!1};function on(e){e.stopImmediatePropagation()}function je(e){e.preventDefault(),e.stopImmediatePropagation()}function Di(e){var t=e.document.documentElement,n=be(e).on("dragstart.drag",je,ct);"onselectstart"in t?n.on("selectstart.drag",je,ct):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Bi(e,t){var n=e.document.documentElement,r=be(e).on("dragstart.drag",null);t&&(r.on("click.drag",je,ct),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const wt=e=>()=>e;function fo(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:a,x:i,y:l,dx:u,dy:d,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:c}})}fo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ml(e){return!e.ctrlKey&&!e.button}function Tl(){return this.parentNode}function Ol(e,t){return t??{x:e.x,y:e.y}}function $l(){return navigator.maxTouchPoints||"ontouchstart"in this}function Dl(){var e=Ml,t=Tl,n=Ol,r=$l,o={},a=Yt("start","drag","end"),i=0,l,u,d,c,f=0;function h(b){b.on("mousedown.drag",p).filter(r).on("touchstart.drag",m).on("touchmove.drag",E,Il).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(b,$){if(!(c||!e.call(this,b,$))){var R=g(this,t.call(this,b,$),b,$,"mouse");R&&(be(b.view).on("mousemove.drag",w,ct).on("mouseup.drag",v,ct),Di(b.view),on(b),d=!1,l=b.clientX,u=b.clientY,R("start",b))}}function w(b){if(je(b),!d){var $=b.clientX-l,R=b.clientY-u;d=$*$+R*R>f}o.mouse("drag",b)}function v(b){be(b.view).on("mousemove.drag mouseup.drag",null),Bi(b.view,d),je(b),o.mouse("end",b)}function m(b,$){if(e.call(this,b,$)){var R=b.changedTouches,A=t.call(this,b,$),x=R.length,T,D;for(T=0;T<x;++T)(D=g(this,A,b,$,R[T].identifier,R[T]))&&(on(b),D("start",b,R[T]))}}function E(b){var $=b.changedTouches,R=$.length,A,x;for(A=0;A<R;++A)(x=o[$[A].identifier])&&(je(b),x("drag",b,$[A]))}function y(b){var $=b.changedTouches,R=$.length,A,x;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),A=0;A<R;++A)(x=o[$[A].identifier])&&(on(b),x("end",b,$[A]))}function g(b,$,R,A,x,T){var D=a.copy(),M=Se(T||R,$),_,F,N;if((N=n.call(b,new fo("beforestart",{sourceEvent:R,target:h,identifier:x,active:i,x:M[0],y:M[1],dx:0,dy:0,dispatch:D}),A))!=null)return _=N.x-M[0]||0,F=N.y-M[1]||0,function z(P,G,Y){var W=M,q;switch(P){case"start":o[x]=z,q=i++;break;case"end":delete o[x],--i;case"drag":M=Se(Y||G,$),q=i;break}D.call(P,b,new fo(P,{sourceEvent:G,subject:N,target:h,identifier:x,active:q,x:M[0]+_,y:M[1]+F,dx:M[0]-W[0],dy:M[1]-W[1],dispatch:D}),A)}}return h.filter=function(b){return arguments.length?(e=typeof b=="function"?b:wt(!!b),h):e},h.container=function(b){return arguments.length?(t=typeof b=="function"?b:wt(b),h):t},h.subject=function(b){return arguments.length?(n=typeof b=="function"?b:wt(b),h):n},h.touchable=function(b){return arguments.length?(r=typeof b=="function"?b:wt(!!b),h):r},h.on=function(){var b=a.on.apply(a,arguments);return b===a?h:b},h.clickDistance=function(b){return arguments.length?(f=(b=+b)*b,h):Math.sqrt(f)},h}function So(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Vi(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function yt(){}var dt=.7,Dt=1/dt,Ze="\\s*([+-]?\\d+)\\s*",ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ce="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bl=/^#([0-9a-f]{3,8})$/,Vl=new RegExp(`^rgb\\(${Ze},${Ze},${Ze}\\)$`),Pl=new RegExp(`^rgb\\(${Ce},${Ce},${Ce}\\)$`),Rl=new RegExp(`^rgba\\(${Ze},${Ze},${Ze},${ft}\\)$`),Al=new RegExp(`^rgba\\(${Ce},${Ce},${Ce},${ft}\\)$`),zl=new RegExp(`^hsl\\(${ft},${Ce},${Ce}\\)$`),Ll=new RegExp(`^hsla\\(${ft},${Ce},${Ce},${ft}\\)$`),zo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};So(yt,ht,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Lo,formatHex:Lo,formatHex8:Fl,formatHsl:Hl,formatRgb:Fo,toString:Fo});function Lo(){return this.rgb().formatHex()}function Fl(){return this.rgb().formatHex8()}function Hl(){return Pi(this).formatHsl()}function Fo(){return this.rgb().formatRgb()}function ht(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Bl.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ho(t):n===3?new ye(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?_t(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?_t(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Vl.exec(e))?new ye(t[1],t[2],t[3],1):(t=Pl.exec(e))?new ye(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Rl.exec(e))?_t(t[1],t[2],t[3],t[4]):(t=Al.exec(e))?_t(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=zl.exec(e))?qo(t[1],t[2]/100,t[3]/100,1):(t=Ll.exec(e))?qo(t[1],t[2]/100,t[3]/100,t[4]):zo.hasOwnProperty(e)?Ho(zo[e]):e==="transparent"?new ye(NaN,NaN,NaN,0):null}function Ho(e){return new ye(e>>16&255,e>>8&255,e&255,1)}function _t(e,t,n,r){return r<=0&&(e=t=n=NaN),new ye(e,t,n,r)}function Gl(e){return e instanceof yt||(e=ht(e)),e?(e=e.rgb(),new ye(e.r,e.g,e.b,e.opacity)):new ye}function ho(e,t,n,r){return arguments.length===1?Gl(e):new ye(e,t,n,r??1)}function ye(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}So(ye,ho,Vi(yt,{brighter(e){return e=e==null?Dt:Math.pow(Dt,e),new ye(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?dt:Math.pow(dt,e),new ye(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ye(Ye(this.r),Ye(this.g),Ye(this.b),Bt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Go,formatHex:Go,formatHex8:Yl,formatRgb:Yo,toString:Yo}));function Go(){return`#${Ge(this.r)}${Ge(this.g)}${Ge(this.b)}`}function Yl(){return`#${Ge(this.r)}${Ge(this.g)}${Ge(this.b)}${Ge((isNaN(this.opacity)?1:this.opacity)*255)}`}function Yo(){const e=Bt(this.opacity);return`${e===1?"rgb(":"rgba("}${Ye(this.r)}, ${Ye(this.g)}, ${Ye(this.b)}${e===1?")":`, ${e})`}`}function Bt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ye(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ge(e){return e=Ye(e),(e<16?"0":"")+e.toString(16)}function qo(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ee(e,t,n,r)}function Pi(e){if(e instanceof Ee)return new Ee(e.h,e.s,e.l,e.opacity);if(e instanceof yt||(e=ht(e)),!e)return new Ee;if(e instanceof Ee)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,l=a-o,u=(a+o)/2;return l?(t===a?i=(n-r)/l+(n<r)*6:n===a?i=(r-t)/l+2:i=(t-n)/l+4,l/=u<.5?a+o:2-a-o,i*=60):l=u>0&&u<1?0:i,new Ee(i,l,u,e.opacity)}function ql(e,t,n,r){return arguments.length===1?Pi(e):new Ee(e,t,n,r??1)}function Ee(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}So(Ee,ql,Vi(yt,{brighter(e){return e=e==null?Dt:Math.pow(Dt,e),new Ee(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?dt:Math.pow(dt,e),new Ee(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new ye(rn(e>=240?e-240:e+120,o,r),rn(e,o,r),rn(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Ee(Wo(this.h),bt(this.s),bt(this.l),Bt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Bt(this.opacity);return`${e===1?"hsl(":"hsla("}${Wo(this.h)}, ${bt(this.s)*100}%, ${bt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Wo(e){return e=(e||0)%360,e<0?e+360:e}function bt(e){return Math.max(0,Math.min(1,e||0))}function rn(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ri=e=>()=>e;function Wl(e,t){return function(n){return e+n*t}}function Xl(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ul(e){return(e=+e)==1?Ai:function(t,n){return n-t?Xl(t,n,e):Ri(isNaN(t)?n:t)}}function Ai(e,t){var n=t-e;return n?Wl(e,n):Ri(isNaN(e)?t:e)}const Xo=function e(t){var n=Ul(t);function r(o,a){var i=n((o=ho(o)).r,(a=ho(a)).r),l=n(o.g,a.g),u=n(o.b,a.b),d=Ai(o.opacity,a.opacity);return function(c){return o.r=i(c),o.g=l(c),o.b=u(c),o.opacity=d(c),o+""}}return r.gamma=e,r}(1);function Re(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var po=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,an=new RegExp(po.source,"g");function jl(e){return function(){return e}}function Zl(e){return function(t){return e(t)+""}}function Kl(e,t){var n=po.lastIndex=an.lastIndex=0,r,o,a,i=-1,l=[],u=[];for(e=e+"",t=t+"";(r=po.exec(e))&&(o=an.exec(t));)(a=o.index)>n&&(a=t.slice(n,a),l[i]?l[i]+=a:l[++i]=a),(r=r[0])===(o=o[0])?l[i]?l[i]+=o:l[++i]=o:(l[++i]=null,u.push({i,x:Re(r,o)})),n=an.lastIndex;return n<t.length&&(a=t.slice(n),l[i]?l[i]+=a:l[++i]=a),l.length<2?u[0]?Zl(u[0].x):jl(t):(t=u.length,function(d){for(var c=0,f;c<t;++c)l[(f=u[c]).i]=f.x(d);return l.join("")})}var Uo=180/Math.PI,go={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zi(e,t,n,r,o,a){var i,l,u;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),e*r<t*n&&(e=-e,t=-t,u=-u,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*Uo,skewX:Math.atan(u)*Uo,scaleX:i,scaleY:l}}var Et;function Jl(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?go:zi(t.a,t.b,t.c,t.d,t.e,t.f)}function Ql(e){return e==null||(Et||(Et=document.createElementNS("http://www.w3.org/2000/svg","g")),Et.setAttribute("transform",e),!(e=Et.transform.baseVal.consolidate()))?go:(e=e.matrix,zi(e.a,e.b,e.c,e.d,e.e,e.f))}function Li(e,t,n,r){function o(d){return d.length?d.pop()+" ":""}function a(d,c,f,h,p,w){if(d!==f||c!==h){var v=p.push("translate(",null,t,null,n);w.push({i:v-4,x:Re(d,f)},{i:v-2,x:Re(c,h)})}else(f||h)&&p.push("translate("+f+t+h+n)}function i(d,c,f,h){d!==c?(d-c>180?c+=360:c-d>180&&(d+=360),h.push({i:f.push(o(f)+"rotate(",null,r)-2,x:Re(d,c)})):c&&f.push(o(f)+"rotate("+c+r)}function l(d,c,f,h){d!==c?h.push({i:f.push(o(f)+"skewX(",null,r)-2,x:Re(d,c)}):c&&f.push(o(f)+"skewX("+c+r)}function u(d,c,f,h,p,w){if(d!==f||c!==h){var v=p.push(o(p)+"scale(",null,",",null,")");w.push({i:v-4,x:Re(d,f)},{i:v-2,x:Re(c,h)})}else(f!==1||h!==1)&&p.push(o(p)+"scale("+f+","+h+")")}return function(d,c){var f=[],h=[];return d=e(d),c=e(c),a(d.translateX,d.translateY,c.translateX,c.translateY,f,h),i(d.rotate,c.rotate,f,h),l(d.skewX,c.skewX,f,h),u(d.scaleX,d.scaleY,c.scaleX,c.scaleY,f,h),d=c=null,function(p){for(var w=-1,v=h.length,m;++w<v;)f[(m=h[w]).i]=m.x(p);return f.join("")}}}var eu=Li(Jl,"px, ","px)","deg)"),tu=Li(Ql,", ",")",")"),nu=1e-12;function jo(e){return((e=Math.exp(e))+1/e)/2}function ou(e){return((e=Math.exp(e))-1/e)/2}function ru(e){return((e=Math.exp(2*e))-1)/(e+1)}const iu=function e(t,n,r){function o(a,i){var l=a[0],u=a[1],d=a[2],c=i[0],f=i[1],h=i[2],p=c-l,w=f-u,v=p*p+w*w,m,E;if(v<nu)E=Math.log(h/d)/t,m=function(A){return[l+A*p,u+A*w,d*Math.exp(t*A*E)]};else{var y=Math.sqrt(v),g=(h*h-d*d+r*v)/(2*d*n*y),b=(h*h-d*d-r*v)/(2*h*n*y),$=Math.log(Math.sqrt(g*g+1)-g),R=Math.log(Math.sqrt(b*b+1)-b);E=(R-$)/t,m=function(A){var x=A*E,T=jo($),D=d/(n*y)*(T*ru(t*x+$)-ou($));return[l+D*p,u+D*w,d*T/jo(t*x+$)]}}return m.duration=E*1e3*t/Math.SQRT2,m}return o.rho=function(a){var i=Math.max(.001,+a),l=i*i,u=l*l;return e(i,l,u)},o}(Math.SQRT2,2,4);var Qe=0,it=0,ot=0,Fi=1e3,Vt,at,Pt=0,We=0,Wt=0,pt=typeof performance=="object"&&performance.now?performance:Date,Hi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Co(){return We||(Hi(au),We=pt.now()+Wt)}function au(){We=0}function Rt(){this._call=this._time=this._next=null}Rt.prototype=Gi.prototype={constructor:Rt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Co():+n)+(t==null?0:+t),!this._next&&at!==this&&(at?at._next=this:Vt=this,at=this),this._call=e,this._time=n,mo()},stop:function(){this._call&&(this._call=null,this._time=1/0,mo())}};function Gi(e,t,n){var r=new Rt;return r.restart(e,t,n),r}function su(){Co(),++Qe;for(var e=Vt,t;e;)(t=We-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Qe}function Zo(){We=(Pt=pt.now())+Wt,Qe=it=0;try{su()}finally{Qe=0,uu(),We=0}}function lu(){var e=pt.now(),t=e-Pt;t>Fi&&(Wt-=t,Pt=e)}function uu(){for(var e,t=Vt,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Vt=n);at=e,mo(r)}function mo(e){if(!Qe){it&&(it=clearTimeout(it));var t=e-We;t>24?(e<1/0&&(it=setTimeout(Zo,e-pt.now()-Wt)),ot&&(ot=clearInterval(ot))):(ot||(Pt=pt.now(),ot=setInterval(lu,Fi)),Qe=1,Hi(Zo))}}function Ko(e,t,n){var r=new Rt;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var cu=Yt("start","end","cancel","interrupt"),du=[],Yi=0,Jo=1,vo=2,Mt=3,Qo=4,yo=5,Tt=6;function Xt(e,t,n,r,o,a){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;fu(e,n,{name:t,index:r,group:o,on:cu,tween:du,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Yi})}function Io(e,t){var n=Ne(e,t);if(n.state>Yi)throw new Error("too late; already scheduled");return n}function Ie(e,t){var n=Ne(e,t);if(n.state>Mt)throw new Error("too late; already running");return n}function Ne(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function fu(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=Gi(a,0,n.time);function a(d){n.state=Jo,n.timer.restart(i,n.delay,n.time),n.delay<=d&&i(d-n.delay)}function i(d){var c,f,h,p;if(n.state!==Jo)return u();for(c in r)if(p=r[c],p.name===n.name){if(p.state===Mt)return Ko(i);p.state===Qo?(p.state=Tt,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[c]):+c<t&&(p.state=Tt,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[c])}if(Ko(function(){n.state===Mt&&(n.state=Qo,n.timer.restart(l,n.delay,n.time),l(d))}),n.state=vo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===vo){for(n.state=Mt,o=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(o[++f]=p);o.length=f+1}}function l(d){for(var c=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=yo,1),f=-1,h=o.length;++f<h;)o[f].call(e,c);n.state===yo&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Tt,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function Ot(e,t){var n=e.__transition,r,o,a=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){a=!1;continue}o=r.state>vo&&r.state<yo,r.state=Tt,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}a&&delete e.__transition}}function hu(e){return this.each(function(){Ot(this,e)})}function pu(e,t){var n,r;return function(){var o=Ie(this,e),a=o.tween;if(a!==n){r=n=a;for(var i=0,l=r.length;i<l;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function gu(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var a=Ie(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var l={name:t,value:n},u=0,d=o.length;u<d;++u)if(o[u].name===t){o[u]=l;break}u===d&&o.push(l)}a.tween=o}}function mu(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ne(this.node(),n).tween,o=0,a=r.length,i;o<a;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?pu:gu)(n,e,t))}function Mo(e,t,n){var r=e._id;return e.each(function(){var o=Ie(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Ne(o,r).value[t]}}function qi(e,t){var n;return(typeof t=="number"?Re:t instanceof ht?Xo:(n=ht(t))?(t=n,Xo):Kl)(e,t)}function vu(e){return function(){this.removeAttribute(e)}}function yu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function wu(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttribute(e);return i===o?null:i===r?a:a=t(r=i,n)}}function _u(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?a:a=t(r=i,n)}}function bu(e,t,n){var r,o,a;return function(){var i,l=n(this),u;return l==null?void this.removeAttribute(e):(i=this.getAttribute(e),u=l+"",i===u?null:i===r&&u===o?a:(o=u,a=t(r=i,l)))}}function Eu(e,t,n){var r,o,a;return function(){var i,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),u=l+"",i===u?null:i===r&&u===o?a:(o=u,a=t(r=i,l)))}}function xu(e,t){var n=qt(e),r=n==="transform"?tu:qi;return this.attrTween(e,typeof t=="function"?(n.local?Eu:bu)(n,r,Mo(this,"attr."+e,t)):t==null?(n.local?yu:vu)(n):(n.local?_u:wu)(n,r,t))}function Nu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ku(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Su(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&ku(e,a)),n}return o._value=t,o}function Cu(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Nu(e,a)),n}return o._value=t,o}function Iu(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=qt(e);return this.tween(n,(r.local?Su:Cu)(r,t))}function Mu(e,t){return function(){Io(this,e).delay=+t.apply(this,arguments)}}function Tu(e,t){return t=+t,function(){Io(this,e).delay=t}}function Ou(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Mu:Tu)(t,e)):Ne(this.node(),t).delay}function $u(e,t){return function(){Ie(this,e).duration=+t.apply(this,arguments)}}function Du(e,t){return t=+t,function(){Ie(this,e).duration=t}}function Bu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$u:Du)(t,e)):Ne(this.node(),t).duration}function Vu(e,t){if(typeof t!="function")throw new Error;return function(){Ie(this,e).ease=t}}function Pu(e){var t=this._id;return arguments.length?this.each(Vu(t,e)):Ne(this.node(),t).ease}function Ru(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ie(this,e).ease=n}}function Au(e){if(typeof e!="function")throw new Error;return this.each(Ru(this._id,e))}function zu(e){typeof e!="function"&&(e=xi(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,l=r[o]=[],u,d=0;d<i;++d)(u=a[d])&&e.call(u,u.__data__,d,a)&&l.push(u);return new $e(r,this._parents,this._name,this._id)}function Lu(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),l=0;l<a;++l)for(var u=t[l],d=n[l],c=u.length,f=i[l]=new Array(c),h,p=0;p<c;++p)(h=u[p]||d[p])&&(f[p]=h);for(;l<r;++l)i[l]=t[l];return new $e(i,this._parents,this._name,this._id)}function Fu(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Hu(e,t,n){var r,o,a=Fu(t)?Io:Ie;return function(){var i=a(this,e),l=i.on;l!==r&&(o=(r=l).copy()).on(t,n),i.on=o}}function Gu(e,t){var n=this._id;return arguments.length<2?Ne(this.node(),n).on.on(e):this.each(Hu(n,e,t))}function Yu(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function qu(){return this.on("end.remove",Yu(this._id))}function Wu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=No(e));for(var r=this._groups,o=r.length,a=new Array(o),i=0;i<o;++i)for(var l=r[i],u=l.length,d=a[i]=new Array(u),c,f,h=0;h<u;++h)(c=l[h])&&(f=e.call(c,c.__data__,h,l))&&("__data__"in c&&(f.__data__=c.__data__),d[h]=f,Xt(d[h],t,n,h,d,Ne(c,n)));return new $e(a,this._parents,t,n)}function Xu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ei(e));for(var r=this._groups,o=r.length,a=[],i=[],l=0;l<o;++l)for(var u=r[l],d=u.length,c,f=0;f<d;++f)if(c=u[f]){for(var h=e.call(c,c.__data__,f,u),p,w=Ne(c,n),v=0,m=h.length;v<m;++v)(p=h[v])&&Xt(p,t,n,v,h,w);a.push(h),i.push(c)}return new $e(a,i,t,n)}var Uu=vt.prototype.constructor;function ju(){return new Uu(this._groups,this._parents)}function Zu(e,t){var n,r,o;return function(){var a=Je(this,e),i=(this.style.removeProperty(e),Je(this,e));return a===i?null:a===n&&i===r?o:o=t(n=a,r=i)}}function Wi(e){return function(){this.style.removeProperty(e)}}function Ku(e,t,n){var r,o=n+"",a;return function(){var i=Je(this,e);return i===o?null:i===r?a:a=t(r=i,n)}}function Ju(e,t,n){var r,o,a;return function(){var i=Je(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),Je(this,e))),i===u?null:i===r&&u===o?a:(o=u,a=t(r=i,l))}}function Qu(e,t){var n,r,o,a="style."+t,i="end."+a,l;return function(){var u=Ie(this,e),d=u.on,c=u.value[a]==null?l||(l=Wi(t)):void 0;(d!==n||o!==c)&&(r=(n=d).copy()).on(i,o=c),u.on=r}}function ec(e,t,n){var r=(e+="")=="transform"?eu:qi;return t==null?this.styleTween(e,Zu(e,r)).on("end.style."+e,Wi(e)):typeof t=="function"?this.styleTween(e,Ju(e,r,Mo(this,"style."+e,t))).each(Qu(this._id,e)):this.styleTween(e,Ku(e,r,t),n).on("end.style."+e,null)}function tc(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function nc(e,t,n){var r,o;function a(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&tc(e,i,n)),r}return a._value=t,a}function oc(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,nc(e,t,n??""))}function rc(e){return function(){this.textContent=e}}function ic(e){return function(){var t=e(this);this.textContent=t??""}}function ac(e){return this.tween("text",typeof e=="function"?ic(Mo(this,"text",e)):rc(e==null?"":e+""))}function sc(e){return function(t){this.textContent=e.call(this,t)}}function lc(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&sc(o)),t}return r._value=e,r}function uc(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,lc(e))}function cc(){for(var e=this._name,t=this._id,n=Xi(),r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],l=i.length,u,d=0;d<l;++d)if(u=i[d]){var c=Ne(u,t);Xt(u,e,n,d,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new $e(r,this._parents,e,n)}function dc(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(a,i){var l={value:i},u={value:function(){--o===0&&a()}};n.each(function(){var d=Ie(this,r),c=d.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),d.on=t}),o===0&&a()})}var fc=0;function $e(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Xi(){return++fc}var Me=vt.prototype;$e.prototype={constructor:$e,select:Wu,selectAll:Xu,selectChild:Me.selectChild,selectChildren:Me.selectChildren,filter:zu,merge:Lu,selection:ju,transition:cc,call:Me.call,nodes:Me.nodes,node:Me.node,size:Me.size,empty:Me.empty,each:Me.each,on:Gu,attr:xu,attrTween:Iu,style:ec,styleTween:oc,text:ac,textTween:uc,remove:qu,tween:mu,delay:Ou,duration:Bu,ease:Pu,easeVarying:Au,end:dc,[Symbol.iterator]:Me[Symbol.iterator]};function hc(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var pc={time:null,delay:0,duration:250,ease:hc};function gc(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function mc(e){var t,n;e instanceof $e?(t=e._id,e=e._name):(t=Xi(),(n=pc).time=Co(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],l=i.length,u,d=0;d<l;++d)(u=i[d])&&Xt(u,e,t,d,i,n||gc(u,t));return new $e(r,this._parents,e,t)}vt.prototype.interrupt=hu;vt.prototype.transition=mc;const xt=e=>()=>e;function vc(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Oe(e,t,n){this.k=e,this.x=t,this.y=n}Oe.prototype={constructor:Oe,scale:function(e){return e===1?this:new Oe(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Oe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var et=new Oe(1,0,0);Oe.prototype;function sn(e){e.stopImmediatePropagation()}function rt(e){e.preventDefault(),e.stopImmediatePropagation()}function yc(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function wc(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function er(){return this.__zoom||et}function _c(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function bc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ec(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function xc(){var e=yc,t=wc,n=Ec,r=_c,o=bc,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],l=250,u=iu,d=Yt("start","zoom","end"),c,f,h,p=500,w=150,v=0,m=10;function E(N){N.property("__zoom",er).on("wheel.zoom",x,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",D).filter(o).on("touchstart.zoom",M).on("touchmove.zoom",_).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(N,z,P,G){var Y=N.selection?N.selection():N;Y.property("__zoom",er),N!==Y?$(N,z,P,G):Y.interrupt().each(function(){R(this,arguments).event(G).start().zoom(null,typeof z=="function"?z.apply(this,arguments):z).end()})},E.scaleBy=function(N,z,P,G){E.scaleTo(N,function(){var Y=this.__zoom.k,W=typeof z=="function"?z.apply(this,arguments):z;return Y*W},P,G)},E.scaleTo=function(N,z,P,G){E.transform(N,function(){var Y=t.apply(this,arguments),W=this.__zoom,q=P==null?b(Y):typeof P=="function"?P.apply(this,arguments):P,K=W.invert(q),ie=typeof z=="function"?z.apply(this,arguments):z;return n(g(y(W,ie),q,K),Y,i)},P,G)},E.translateBy=function(N,z,P,G){E.transform(N,function(){return n(this.__zoom.translate(typeof z=="function"?z.apply(this,arguments):z,typeof P=="function"?P.apply(this,arguments):P),t.apply(this,arguments),i)},null,G)},E.translateTo=function(N,z,P,G,Y){E.transform(N,function(){var W=t.apply(this,arguments),q=this.__zoom,K=G==null?b(W):typeof G=="function"?G.apply(this,arguments):G;return n(et.translate(K[0],K[1]).scale(q.k).translate(typeof z=="function"?-z.apply(this,arguments):-z,typeof P=="function"?-P.apply(this,arguments):-P),W,i)},G,Y)};function y(N,z){return z=Math.max(a[0],Math.min(a[1],z)),z===N.k?N:new Oe(z,N.x,N.y)}function g(N,z,P){var G=z[0]-P[0]*N.k,Y=z[1]-P[1]*N.k;return G===N.x&&Y===N.y?N:new Oe(N.k,G,Y)}function b(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function $(N,z,P,G){N.on("start.zoom",function(){R(this,arguments).event(G).start()}).on("interrupt.zoom end.zoom",function(){R(this,arguments).event(G).end()}).tween("zoom",function(){var Y=this,W=arguments,q=R(Y,W).event(G),K=t.apply(Y,W),ie=P==null?b(K):typeof P=="function"?P.apply(Y,W):P,B=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),O=Y.__zoom,V=typeof z=="function"?z.apply(Y,W):z,L=u(O.invert(ie).concat(B/O.k),V.invert(ie).concat(B/V.k));return function(X){if(X===1)X=V;else{var ee=L(X),Z=B/ee[2];X=new Oe(Z,ie[0]-ee[0]*Z,ie[1]-ee[1]*Z)}q.zoom(null,X)}})}function R(N,z,P){return!P&&N.__zooming||new A(N,z)}function A(N,z){this.that=N,this.args=z,this.active=0,this.sourceEvent=null,this.extent=t.apply(N,z),this.taps=0}A.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,z){return this.mouse&&N!=="mouse"&&(this.mouse[1]=z.invert(this.mouse[0])),this.touch0&&N!=="touch"&&(this.touch0[1]=z.invert(this.touch0[0])),this.touch1&&N!=="touch"&&(this.touch1[1]=z.invert(this.touch1[0])),this.that.__zoom=z,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var z=be(this.that).datum();d.call(N,this.that,new vc(N,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:d}),z)}};function x(N,...z){if(!e.apply(this,arguments))return;var P=R(this,z).event(N),G=this.__zoom,Y=Math.max(a[0],Math.min(a[1],G.k*Math.pow(2,r.apply(this,arguments)))),W=Se(N);if(P.wheel)(P.mouse[0][0]!==W[0]||P.mouse[0][1]!==W[1])&&(P.mouse[1]=G.invert(P.mouse[0]=W)),clearTimeout(P.wheel);else{if(G.k===Y)return;P.mouse=[W,G.invert(W)],Ot(this),P.start()}rt(N),P.wheel=setTimeout(q,w),P.zoom("mouse",n(g(y(G,Y),P.mouse[0],P.mouse[1]),P.extent,i));function q(){P.wheel=null,P.end()}}function T(N,...z){if(h||!e.apply(this,arguments))return;var P=N.currentTarget,G=R(this,z,!0).event(N),Y=be(N.view).on("mousemove.zoom",ie,!0).on("mouseup.zoom",B,!0),W=Se(N,P),q=N.clientX,K=N.clientY;Di(N.view),sn(N),G.mouse=[W,this.__zoom.invert(W)],Ot(this),G.start();function ie(O){if(rt(O),!G.moved){var V=O.clientX-q,L=O.clientY-K;G.moved=V*V+L*L>v}G.event(O).zoom("mouse",n(g(G.that.__zoom,G.mouse[0]=Se(O,P),G.mouse[1]),G.extent,i))}function B(O){Y.on("mousemove.zoom mouseup.zoom",null),Bi(O.view,G.moved),rt(O),G.event(O).end()}}function D(N,...z){if(e.apply(this,arguments)){var P=this.__zoom,G=Se(N.changedTouches?N.changedTouches[0]:N,this),Y=P.invert(G),W=P.k*(N.shiftKey?.5:2),q=n(g(y(P,W),G,Y),t.apply(this,z),i);rt(N),l>0?be(this).transition().duration(l).call($,q,G,N):be(this).call(E.transform,q,G,N)}}function M(N,...z){if(e.apply(this,arguments)){var P=N.touches,G=P.length,Y=R(this,z,N.changedTouches.length===G).event(N),W,q,K,ie;for(sn(N),q=0;q<G;++q)K=P[q],ie=Se(K,this),ie=[ie,this.__zoom.invert(ie),K.identifier],Y.touch0?!Y.touch1&&Y.touch0[2]!==ie[2]&&(Y.touch1=ie,Y.taps=0):(Y.touch0=ie,W=!0,Y.taps=1+!!c);c&&(c=clearTimeout(c)),W&&(Y.taps<2&&(f=ie[0],c=setTimeout(function(){c=null},p)),Ot(this),Y.start())}}function _(N,...z){if(this.__zooming){var P=R(this,z).event(N),G=N.changedTouches,Y=G.length,W,q,K,ie;for(rt(N),W=0;W<Y;++W)q=G[W],K=Se(q,this),P.touch0&&P.touch0[2]===q.identifier?P.touch0[0]=K:P.touch1&&P.touch1[2]===q.identifier&&(P.touch1[0]=K);if(q=P.that.__zoom,P.touch1){var B=P.touch0[0],O=P.touch0[1],V=P.touch1[0],L=P.touch1[1],X=(X=V[0]-B[0])*X+(X=V[1]-B[1])*X,ee=(ee=L[0]-O[0])*ee+(ee=L[1]-O[1])*ee;q=y(q,Math.sqrt(X/ee)),K=[(B[0]+V[0])/2,(B[1]+V[1])/2],ie=[(O[0]+L[0])/2,(O[1]+L[1])/2]}else if(P.touch0)K=P.touch0[0],ie=P.touch0[1];else return;P.zoom("touch",n(g(q,K,ie),P.extent,i))}}function F(N,...z){if(this.__zooming){var P=R(this,z).event(N),G=N.changedTouches,Y=G.length,W,q;for(sn(N),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),W=0;W<Y;++W)q=G[W],P.touch0&&P.touch0[2]===q.identifier?delete P.touch0:P.touch1&&P.touch1[2]===q.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(q=Se(q,this),Math.hypot(f[0]-q[0],f[1]-q[1])<m)){var K=be(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return E.wheelDelta=function(N){return arguments.length?(r=typeof N=="function"?N:xt(+N),E):r},E.filter=function(N){return arguments.length?(e=typeof N=="function"?N:xt(!!N),E):e},E.touchable=function(N){return arguments.length?(o=typeof N=="function"?N:xt(!!N),E):o},E.extent=function(N){return arguments.length?(t=typeof N=="function"?N:xt([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),E):t},E.scaleExtent=function(N){return arguments.length?(a[0]=+N[0],a[1]=+N[1],E):[a[0],a[1]]},E.translateExtent=function(N){return arguments.length?(i[0][0]=+N[0][0],i[1][0]=+N[1][0],i[0][1]=+N[0][1],i[1][1]=+N[1][1],E):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},E.constrain=function(N){return arguments.length?(n=N,E):n},E.duration=function(N){return arguments.length?(l=+N,E):l},E.interpolate=function(N){return arguments.length?(u=N,E):u},E.on=function(){var N=d.on.apply(d,arguments);return N===d?E:N},E.clickDistance=function(N){return arguments.length?(v=(N=+N)*N,E):Math.sqrt(v)},E.tapDistance=function(N){return arguments.length?(m=+N,E):m},E}var U=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(U||{}),To=(e=>(e.Partial="partial",e.Full="full",e))(To||{}),Fe=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(Fe||{}),De=(e=>(e.Strict="strict",e.Loose="loose",e))(De||{}),At=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(At||{}),lt=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(lt||{}),Ui=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(Ui||{});const Nc=["INPUT","SELECT","TEXTAREA"];function wo(e){var t,n;const r=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,o=typeof(r==null?void 0:r.hasAttribute)=="function"?r.hasAttribute("contenteditable"):!1,a=typeof(r==null?void 0:r.closest)=="function"?r.closest(".nokey"):null;return Nc.includes(r==null?void 0:r.nodeName)||o||!!a}function kc(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function tr(e,t,n,r){const o=t.replace("+",`
`).replace(`

`,`
+`).split(`
`).map(i=>i.trim().toLowerCase());if(o.length===1)return e.toLowerCase()===t.toLowerCase();r||n.add(e.toLowerCase());const a=o.every((i,l)=>n.has(i)&&Array.from(n.values())[l]===o[l]);return r&&n.delete(e.toLowerCase()),a}function Sc(e,t){return n=>{if(!n.code&&!n.key)return!1;const r=Cc(n.code,e);return Array.isArray(e)?e.some(o=>tr(n[r],o,t,n.type==="keyup")):tr(n[r],e,t,n.type==="keyup")}}function Cc(e,t){return t.includes(e)?"code":"key"}function ut(e,t){const n=s.toRef(()=>s.toValue(t==null?void 0:t.actInsideInputWithModifier)??!1),r=s.toRef(()=>s.toValue(t==null?void 0:t.target)??window),o=s.toRef(()=>s.toValue(t==null?void 0:t.preventDefault)??!0),a=s.ref(s.toValue(e)===!0);let i=!1;const l=new Set;let u=c(s.toValue(e));s.watch(()=>s.toValue(e),(f,h)=>{typeof h=="boolean"&&typeof f!="boolean"&&d(),u=c(f)},{immediate:!0}),_i(["blur","contextmenu"],d),Po((...f)=>u(...f),f=>{var h,p;if(i=kc(f),(!i||i&&!n.value)&&wo(f))return;const v=((p=(h=f.composedPath)==null?void 0:h.call(f))==null?void 0:p[0])||f.target,m=(v==null?void 0:v.nodeName)==="BUTTON"||(v==null?void 0:v.nodeName)==="A";!o.value&&(i||!m)&&f.preventDefault(),a.value=!0},{eventName:"keydown",target:r}),Po((...f)=>u(...f),f=>{if(a.value){if((!i||i&&!n.value)&&wo(f))return;i=!1,a.value=!1}},{eventName:"keyup",target:r});function d(){i=!1,l.clear(),a.value=s.toValue(e)===!0}function c(f){return f===null?(d(),()=>!1):typeof f=="boolean"?(d(),a.value=f,()=>!1):Array.isArray(f)||typeof f=="string"?Sc(f,l):f}return a}const ji="vue-flow__node-desc",Zi="vue-flow__edge-desc",Ic="vue-flow__aria-live",Ki=["Enter"," ","Escape"],Ke={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function zt(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function Lt(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)}function Ut(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Xe(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function Ji(e,t){return{x:Xe(e.x,t[0][0],t[1][0]),y:Xe(e.y,t[0][1],t[1][1])}}function nr(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function Le(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function qe(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!Le(e)}function st(e){return qe(e)&&"computedPosition"in e}function Nt(e){return!Number.isNaN(e)&&Number.isFinite(e)}function Mc(e){return Nt(e.width)&&Nt(e.height)&&Nt(e.x)&&Nt(e.y)}function Tc(e,t,n){const r={id:e.id.toString(),type:e.type??"default",dimensions:s.markRaw({width:0,height:0}),computedPosition:s.markRaw({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:he(e.data)?e.data:{},events:s.markRaw(he(e.events)?e.events:{})};return Object.assign(t??r,e,{id:e.id.toString(),parentNode:n})}function Qi(e,t,n){var r,o;const a={id:e.id.toString(),type:e.type??(t==null?void 0:t.type)??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(r=e.sourceHandle)==null?void 0:r.toString(),targetHandle:(o=e.targetHandle)==null?void 0:o.toString(),updatable:e.updatable??(n==null?void 0:n.updatable),selectable:e.selectable??(n==null?void 0:n.selectable),focusable:e.focusable??(n==null?void 0:n.focusable),data:he(e.data)?e.data:{},events:s.markRaw(he(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??(n==null?void 0:n.interactionWidth),...n??{}};return Object.assign(t??a,e,{id:e.id.toString()})}function ea(e,t,n,r){const o=typeof e=="string"?e:e.id,a=new Set,i=r==="source"?"target":"source";for(const l of n)l[i]===o&&a.add(l[r]);return t.filter(l=>a.has(l.id))}function Oc(...e){if(e.length===3){const[a,i,l]=e;return ea(a,i,l,"target")}const[t,n]=e,r=typeof t=="string"?t:t.id;return n.filter(a=>Le(a)&&a.source===r).map(a=>n.find(i=>qe(i)&&i.id===a.target))}function $c(...e){if(e.length===3){const[a,i,l]=e;return ea(a,i,l,"source")}const[t,n]=e,r=typeof t=="string"?t:t.id;return n.filter(a=>Le(a)&&a.target===r).map(a=>n.find(i=>qe(i)&&i.id===a.source))}function ta({source:e,sourceHandle:t,target:n,targetHandle:r}){return`vueflow__edge-${e}${t??""}-${n}${r??""}`}function Dc(e,t){return t.some(n=>Le(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function _o({x:e,y:t},{x:n,y:r,zoom:o}){return{x:e*o+n,y:t*o+r}}function gt({x:e,y:t},{x:n,y:r,zoom:o},a=!1,i=[1,1]){const l={x:(e-n)/o,y:(t-r)/o};return a?jt(l,i):l}function Bc(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function na({x:e,y:t,width:n,height:r}){return{x:e,y:t,x2:e+n,y2:t+r}}function Vc({x:e,y:t,x2:n,y2:r}){return{x:e,y:t,width:n-e,height:r-t}}function oa(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const r=e[n];t=Bc(t,na({...r.computedPosition,...r.dimensions}))}return Vc(t)}function ra(e,t,n={x:0,y:0,zoom:1},r=!1,o=!1){const a={...gt(t,n),width:t.width/n.zoom,height:t.height/n.zoom},i=[];for(const l of e){const{dimensions:u,selectable:d=!0,hidden:c=!1}=l,f=u.width??l.width??null,h=u.height??l.height??null;if(o&&!d||c)continue;const p=Lt(a,zt(l)),w=f===null||h===null,v=r&&p>0,m=(f??0)*(h??0);(w||v||p>=m||l.dragging)&&i.push(l)}return i}function ia(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const r of e)n.add(r.id);return t.filter(r=>n.has(r.source)||n.has(r.target))}function or(e,t,n,r,o,a=.1,i={x:0,y:0}){const l=t/(e.width*(1+a)),u=n/(e.height*(1+a)),d=Math.min(l,u),c=Xe(d,r,o),f=e.x+e.width/2,h=e.y+e.height/2,p=t/2-f*c+(i.x??0),w=n/2-h*c+(i.y??0);return{x:p,y:w,zoom:c}}function Pc(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function aa(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return n?n.selected?!0:aa(n,t):!1}function mt(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`}function rr(e,t,n){return e<t?Xe(Math.abs(e-t),1,t)/t:e>n?-Xe(Math.abs(e-n),1,t)/t:0}function sa(e,t,n=15,r=40){const o=rr(e.x,r,t.width-r)*n,a=rr(e.y,r,t.height-r)*n;return[o,a]}function ln(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,r=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||r>0||e.position.x<0||e.position.y<0){let o={};if(typeof t.style=="function"?o={...t.style(t)}:t.style&&(o={...t.style}),o.width=o.width??`${t.dimensions.width}px`,o.height=o.height??`${t.dimensions.height}px`,n>0)if(typeof o.width=="string"){const a=Number(o.width.replace("px",""));o.width=`${a+n}px`}else o.width+=n;if(r>0)if(typeof o.height=="string"){const a=Number(o.height.replace("px",""));o.height=`${a+r}px`}else o.height+=r;if(e.position.x<0){const a=Math.abs(e.position.x);if(t.position.x=t.position.x-a,typeof o.width=="string"){const i=Number(o.width.replace("px",""));o.width=`${i+a}px`}else o.width+=a;e.position.x=0}if(e.position.y<0){const a=Math.abs(e.position.y);if(t.position.y=t.position.y-a,typeof o.height=="string"){const i=Number(o.height.replace("px",""));o.height=`${i+a}px`}else o.height+=a;e.position.y=0}t.dimensions.width=Number(o.width.toString().replace("px","")),t.dimensions.height=Number(o.height.toString().replace("px","")),typeof t.style=="function"?t.style=a=>{const i=t.style;return{...i(a),...o}}:t.style={...t.style,...o}}}}function ir(e,t){var n,r;const o=e.filter(i=>i.type==="add"||i.type==="remove");for(const i of o)if(i.type==="add")t.findIndex(u=>u.id===i.item.id)===-1&&t.push(i.item);else if(i.type==="remove"){const l=t.findIndex(u=>u.id===i.id);l!==-1&&t.splice(l,1)}const a=t.map(i=>i.id);for(const i of t)for(const l of e)if(l.id===i.id)switch(l.type){case"select":i.selected=l.selected;break;case"position":if(st(i)&&(typeof l.position<"u"&&(i.position=l.position),typeof l.dragging<"u"&&(i.dragging=l.dragging),i.expandParent&&i.parentNode)){const u=t[a.indexOf(i.parentNode)];u&&st(u)&&ln(i,u)}break;case"dimensions":if(st(i)&&(typeof l.dimensions<"u"&&(i.dimensions=l.dimensions),typeof l.updateStyle<"u"&&l.updateStyle&&(i.style={...i.style||{},width:`${(n=l.dimensions)==null?void 0:n.width}px`,height:`${(r=l.dimensions)==null?void 0:r.height}px`}),typeof l.resizing<"u"&&(i.resizing=l.resizing),i.expandParent&&i.parentNode)){const u=t[a.indexOf(i.parentNode)];u&&st(u)&&(!!u.dimensions.width&&!!u.dimensions.height?ln(i,u):s.nextTick(()=>{ln(i,u)}))}break}return t}function Pe(e,t){return{id:e,type:"select",selected:t}}function ar(e){return{item:e,type:"add"}}function sr(e){return{id:e,type:"remove"}}function lr(e,t,n,r,o){return{id:e,source:t,target:n,sourceHandle:r||null,targetHandle:o||null,type:"remove"}}function Ae(e,t=new Set,n=!1){const r=[];for(const[o,a]of e){const i=t.has(o);!(a.selected===void 0&&!i)&&a.selected!==i&&(n&&(a.selected=i),r.push(Pe(a.id,i)))}return r}function j(e){const t=new Set;let n=!1;const r=()=>t.size>0;e&&(n=!0,t.add(e));const o=l=>{t.delete(l)};return{on:l=>{e&&n&&t.delete(e),t.add(l);const u=()=>{o(l),e&&n&&t.add(e)};return Gt(u),{off:u}},off:o,trigger:l=>Promise.all(Array.from(t).map(u=>u(l))),hasListeners:r,fns:t}}function ur(e,t,n){let r=e;do{if(r&&r.matches(t))return!0;if(r===n)return!1;r=r.parentElement}while(r);return!1}function Rc(e,t,n,r,o){var a,i;const l=[];for(const u of e)(u.selected||u.id===o)&&(!u.parentNode||!aa(u,r))&&(u.draggable||t&&typeof u.draggable>"u")&&l.push(s.markRaw({id:u.id,position:u.position||{x:0,y:0},distance:{x:n.x-((a=u.computedPosition)==null?void 0:a.x)||0,y:n.y-((i=u.computedPosition)==null?void 0:i.y)||0},from:u.computedPosition,extent:u.extent,parentNode:u.parentNode,dimensions:u.dimensions,expandParent:u.expandParent}));return l}function un({id:e,dragItems:t,findNode:n}){const r=[];for(const o of t){const a=n(o.id);a&&r.push(a)}return[e?r.find(o=>o.id===e):r[0],r]}function la(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function Ac(e,t,n){const[r,o,a,i]=typeof e!="string"?la(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+i,n.computedPosition.y+r],[n.computedPosition.x+n.dimensions.width-o,n.computedPosition.y+n.dimensions.height-a]]:!1}function zc(e,t,n,r){let o=e.extent||n;if((o==="parent"||!Array.isArray(o)&&(o==null?void 0:o.range)==="parent")&&!e.expandParent)if(e.parentNode&&r&&e.dimensions.width&&e.dimensions.height){const a=Ac(o,e,r);a&&(o=a)}else t(new me(pe.NODE_EXTENT_INVALID,e.id)),o=n;else if(Array.isArray(o)){const a=(r==null?void 0:r.computedPosition.x)||0,i=(r==null?void 0:r.computedPosition.y)||0;o=[[o[0][0]+a,o[0][1]+i],[o[1][0]+a,o[1][1]+i]]}else if(o!=="parent"&&(o!=null&&o.range)&&Array.isArray(o.range)){const[a,i,l,u]=la(o.padding),d=(r==null?void 0:r.computedPosition.x)||0,c=(r==null?void 0:r.computedPosition.y)||0;o=[[o.range[0][0]+d+u,o.range[0][1]+c+a],[o.range[1][0]+d-i,o.range[1][1]+c-l]]}return o==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:o}function Lc({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function Oo(e,t,n,r,o){const a=Lc(e.dimensions,zc(e,n,r,o)),i=Ji(t,a);return{position:{x:i.x-((o==null?void 0:o.computedPosition.x)||0),y:i.y-((o==null?void 0:o.computedPosition.y)||0)},computedPosition:i}}function tt(e,t,n=U.Left,r=!1){const o=((t==null?void 0:t.x)??0)+e.computedPosition.x,a=((t==null?void 0:t.y)??0)+e.computedPosition.y,{width:i,height:l}=t??Yc(e);if(r)return{x:o+i/2,y:a+l/2};switch((t==null?void 0:t.position)??n){case U.Top:return{x:o+i/2,y:a};case U.Right:return{x:o+i,y:a+l/2};case U.Bottom:return{x:o+i/2,y:a+l};case U.Left:return{x:o,y:a+l/2}}}function cr(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Fc({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:a,width:i,height:l,viewport:u}){const d={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+a)};d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);const c=na({x:(0-u.x)/u.zoom,y:(0-u.y)/u.zoom,width:i/u.zoom,height:l/u.zoom}),f=Math.max(0,Math.min(c.x2,d.x2)-Math.max(c.x,d.x)),h=Math.max(0,Math.min(c.y2,d.y2)-Math.max(c.y,d.y));return Math.ceil(f*h)>0}function Hc(e,t,n=!1){const r=typeof e.zIndex=="number";let o=r?e.zIndex:0;const a=t(e.source),i=t(e.target);return!a||!i?0:(n&&(o=r?e.zIndex:Math.max(a.computedPosition.z||0,i.computedPosition.z||0)),o)}var pe=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(pe||{});const dr={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class me extends Error{constructor(t,...n){var r;super((r=dr[t])==null?void 0:r.call(dr,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function $o(e){return"clientX"in e}function Gc(e){return"sourceEvent"in e}function ze(e,t){const n=$o(e);let r,o;return n?(r=e.clientX,o=e.clientY):"touches"in e&&e.touches.length>0?(r=e.touches[0].clientX,o=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(r=e.changedTouches[0].clientX,o=e.changedTouches[0].clientY):(r=0,o=0),{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}}const Ft=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function Yc(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function jt(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const qc=()=>!0;function cn(e){e==null||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function Wc(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const a of t.values())Lt(o,zt(a))>0&&r.push(a);return r}const Xc=250;function Uc(e,t,n,r){var o,a;let i=[],l=Number.POSITIVE_INFINITY;const u=Wc(e,n,t+Xc);for(const d of u){const c=[...((o=d.handleBounds)==null?void 0:o.source)??[],...((a=d.handleBounds)==null?void 0:a.target)??[]];for(const f of c){if(r.nodeId===f.nodeId&&r.type===f.type&&r.id===f.id)continue;const{x:h,y:p}=tt(d,f,f.position,!0),w=Math.sqrt((h-e.x)**2+(p-e.y)**2);w>t||(w<l?(i=[{...f,x:h,y:p}],l=w):w===l&&i.push({...f,x:h,y:p}))}}if(!i.length)return null;if(i.length>1){const d=r.type==="source"?"target":"source";return i.find(c=>c.type===d)??i[0]}return i[0]}function fr(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:a,doc:i,lib:l,flowId:u,isValidConnection:d=qc},c,f,h){const p=a==="target",w=t?i.querySelector(`.${l}-flow__handle[data-id="${u}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:v,y:m}=ze(e),E=i.elementFromPoint(v,m),y=E!=null&&E.classList.contains(`${l}-flow__handle`)?E:w,g={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){const b=ua(void 0,y),$=y.getAttribute("data-nodeid"),R=y.getAttribute("data-handleid"),A=y.classList.contains("connectable"),x=y.classList.contains("connectableend");if(!$||!b)return g;const T={source:p?$:r,sourceHandle:p?R:o,target:p?r:$,targetHandle:p?o:R};g.connection=T;const M=A&&x&&(n===De.Strict?p&&b==="source"||!p&&b==="target":$!==r||R!==o);g.isValid=M&&d(T,{nodes:f,edges:c,sourceNode:h(r),targetNode:h($)}),g.toHandle=t}return g}function ua(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function jc(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Zc(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function Kc(e,t,n,r,o,a=!1){var i,l,u;const d=r.get(e);if(!d)return null;const c=o===De.Strict?(i=d.handleBounds)==null?void 0:i[t]:[...((l=d.handleBounds)==null?void 0:l.source)??[],...((u=d.handleBounds)==null?void 0:u.target)??[]],f=(n?c==null?void 0:c.find(h=>h.id===n):c==null?void 0:c[0])??null;return f&&a?{...f,...tt(d,f,f.position,!0)}:f}const bo={[U.Left]:U.Right,[U.Right]:U.Left,[U.Top]:U.Bottom,[U.Bottom]:U.Top},Jc=["production","prod"];function Zt(e,...t){ca()&&console.warn(`[Vue Flow]: ${e}`,...t)}function ca(){return!Jc.includes("production")}function hr(e,t,n,r,o){const a=t.querySelectorAll(`.vue-flow__handle.${e}`);return a!=null&&a.length?Array.from(a).map(i=>{const l=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:e,nodeId:o,position:i.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...Ut(i)}}):null}function Eo(e,t,n,r,o,a=!1,i){o.value=!1,e.selected?(a||e.selected&&t)&&(r([e]),s.nextTick(()=>{i.blur()})):n([e])}function he(e){return typeof s.unref(e)<"u"}function Qc(e,t,n,r){if(!e||!e.source||!e.target)return n(new me(pe.EDGE_INVALID,(e==null?void 0:e.id)??"[ID UNKNOWN]")),!1;let o;return Le(e)?o=e:o={...e,id:ta(e)},o=Qi(o,void 0,r),Dc(o,t)?!1:o}function ed(e,t,n,r,o){if(!t.source||!t.target)return o(new me(pe.EDGE_INVALID,e.id)),!1;if(!n)return o(new me(pe.EDGE_NOT_FOUND,e.id)),!1;const{id:a,...i}=e;return{...i,id:r?ta(t):a,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function pr(e,t,n){const r={},o=[];for(let a=0;a<e.length;++a){const i=e[a];if(!qe(i)){n(new me(pe.NODE_INVALID,i==null?void 0:i.id)||`[ID UNKNOWN|INDEX ${a}]`);continue}const l=Tc(i,t(i.id),i.parentNode);i.parentNode&&(r[i.parentNode]=!0),o[a]=l}for(const a of o){const i=t(a.parentNode)||o.find(l=>l.id===a.parentNode);a.parentNode&&!i&&n(new me(pe.NODE_MISSING_PARENT,a.id,a.parentNode)),(a.parentNode||r[a.id])&&(r[a.id]&&(a.isParent=!0),i&&(i.isParent=!0))}return o}function gr(e,t,n,r,o,a){let i=o;const l=r.get(i)||new Map;r.set(i,l.set(n,t)),i=`${o}-${e}`;const u=r.get(i)||new Map;if(r.set(i,u.set(n,t)),a){i=`${o}-${e}-${a}`;const d=r.get(i)||new Map;r.set(i,d.set(n,t))}}function dn(e,t,n){e.clear();for(const r of n){const{source:o,target:a,sourceHandle:i=null,targetHandle:l=null}=r,u={edgeId:r.id,source:o,target:a,sourceHandle:i,targetHandle:l},d=`${o}-${i}--${a}-${l}`,c=`${a}-${l}--${o}-${i}`;gr("source",u,c,e,o,i),gr("target",u,d,e,a,l)}}function mr(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function fn(e,t,n,r,o,a,i,l){const u=[];for(const d of e){const c=Le(d)?d:Qc(d,l,o,a);if(!c)continue;const f=n(c.source),h=n(c.target);if(!f||!h){o(new me(pe.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!f){o(new me(pe.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!h){o(new me(pe.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:l,nodes:i,sourceNode:f,targetNode:h})){o(new me(pe.EDGE_INVALID,c.id));continue}const p=r(c.id);u.push({...Qi(c,p,a),sourceNode:f,targetNode:h})}return u}const vr=Symbol("vueFlow"),da=Symbol("nodeId"),fa=Symbol("nodeRef"),td=Symbol("edgeId"),nd=Symbol("edgeRef"),Kt=Symbol("slots");function ha(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:r,noDragClassName:o,nodes:a,nodeExtent:i,nodeDragThreshold:l,viewport:u,autoPanOnNodeDrag:d,autoPanSpeed:c,nodesDraggable:f,panBy:h,findNode:p,multiSelectionActive:w,nodesSelectionActive:v,selectNodesOnDrag:m,removeSelectedElements:E,addSelectedNodes:y,updateNodePositions:g,emits:b}=ce(),{onStart:$,onDrag:R,onStop:A,onClick:x,el:T,disabled:D,id:M,selectable:_,dragHandle:F}=e,N=s.ref(!1);let z=[],P,G=null,Y={x:void 0,y:void 0},W={x:0,y:0},q=null,K=!1,ie=0,B=!1;const O=id(),V=({x:re,y:ne})=>{Y={x:re,y:ne};let oe=!1;if(z=z.map(S=>{const k={x:re-S.distance.x,y:ne-S.distance.y},{computedPosition:I}=Oo(S,n.value?jt(k,r.value):k,b.error,i.value,S.parentNode?p(S.parentNode):void 0);return oe=oe||S.position.x!==I.x||S.position.y!==I.y,S.position=I,S}),!!oe&&(g(z,!0,!0),N.value=!0,q)){const[S,k]=un({id:M,dragItems:z,findNode:p});R({event:q,node:S,nodes:k})}},L=()=>{if(!G)return;const[re,ne]=sa(W,G,c.value);if(re!==0||ne!==0){const oe={x:(Y.x??0)-re/u.value.zoom,y:(Y.y??0)-ne/u.value.zoom};h({x:re,y:ne})&&V(oe)}ie=requestAnimationFrame(L)},X=(re,ne)=>{K=!0;const oe=p(M);!m.value&&!w.value&&oe&&(oe.selected||E()),oe&&s.toValue(_)&&m.value&&Eo(oe,w.value,y,E,v,!1,ne);const S=O(re.sourceEvent);if(Y=S,z=Rc(a.value,f.value,S,p,M),z.length){const[k,I]=un({id:M,dragItems:z,findNode:p});$({event:re.sourceEvent,node:k,nodes:I})}},ee=(re,ne)=>{var oe;re.sourceEvent.type==="touchmove"&&re.sourceEvent.touches.length>1||(l.value===0&&X(re,ne),Y=O(re.sourceEvent),G=((oe=t.value)==null?void 0:oe.getBoundingClientRect())||null,W=ze(re.sourceEvent,G))},Z=(re,ne)=>{const oe=O(re.sourceEvent);if(!B&&K&&d.value&&(B=!0,L()),!K){const S=oe.xSnapped-(Y.x??0),k=oe.ySnapped-(Y.y??0);Math.sqrt(S*S+k*k)>l.value&&X(re,ne)}(Y.x!==oe.xSnapped||Y.y!==oe.ySnapped)&&z.length&&K&&(q=re.sourceEvent,W=ze(re.sourceEvent,G),V(oe))},se=re=>{let ne=!1;if(!K&&!N.value&&!w.value){const oe=re.sourceEvent,S=O(oe),k=S.xSnapped-(Y.x??0),I=S.ySnapped-(Y.y??0),C=Math.sqrt(k*k+I*I);C!==0&&C<=l.value&&(x==null||x(oe),ne=!0)}if(z.length&&!ne){g(z,!1,!1);const[oe,S]=un({id:M,dragItems:z,findNode:p});A({event:re.sourceEvent,node:oe,nodes:S})}z=[],N.value=!1,B=!1,K=!1,Y={x:void 0,y:void 0},cancelAnimationFrame(ie)};return s.watch([()=>s.toValue(D),T],([re,ne],oe,S)=>{if(ne){const k=be(ne);re||(P=Dl().on("start",I=>ee(I,ne)).on("drag",I=>Z(I,ne)).on("end",I=>se(I)).filter(I=>{const C=I.target,H=s.toValue(F);return!I.button&&(!o.value||!ur(C,`.${o.value}`,ne)&&(!H||ur(C,H,ne)))}),k.call(P)),S(()=>{k.on(".drag",null),P&&(P.on("start",null),P.on("drag",null),P.on("end",null))})}}),N}function od(){return{doubleClick:j(),click:j(),mouseEnter:j(),mouseMove:j(),mouseLeave:j(),contextMenu:j(),updateStart:j(),update:j(),updateEnd:j()}}function rd(e,t){const n=od();return n.doubleClick.on(r=>{var o,a;t.edgeDoubleClick(r),(a=(o=e.events)==null?void 0:o.doubleClick)==null||a.call(o,r)}),n.click.on(r=>{var o,a;t.edgeClick(r),(a=(o=e.events)==null?void 0:o.click)==null||a.call(o,r)}),n.mouseEnter.on(r=>{var o,a;t.edgeMouseEnter(r),(a=(o=e.events)==null?void 0:o.mouseEnter)==null||a.call(o,r)}),n.mouseMove.on(r=>{var o,a;t.edgeMouseMove(r),(a=(o=e.events)==null?void 0:o.mouseMove)==null||a.call(o,r)}),n.mouseLeave.on(r=>{var o,a;t.edgeMouseLeave(r),(a=(o=e.events)==null?void 0:o.mouseLeave)==null||a.call(o,r)}),n.contextMenu.on(r=>{var o,a;t.edgeContextMenu(r),(a=(o=e.events)==null?void 0:o.contextMenu)==null||a.call(o,r)}),n.updateStart.on(r=>{var o,a;t.edgeUpdateStart(r),(a=(o=e.events)==null?void 0:o.updateStart)==null||a.call(o,r)}),n.update.on(r=>{var o,a;t.edgeUpdate(r),(a=(o=e.events)==null?void 0:o.update)==null||a.call(o,r)}),n.updateEnd.on(r=>{var o,a;t.edgeUpdateEnd(r),(a=(o=e.events)==null?void 0:o.updateEnd)==null||a.call(o,r)}),Object.entries(n).reduce((r,[o,a])=>(r.emit[o]=a.trigger,r.on[o]=a.on,r),{emit:{},on:{}})}function id(){const{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:r}=ce();return o=>{var a;const i=((a=r.value)==null?void 0:a.getBoundingClientRect())??{left:0,top:0},l=Gc(o)?o.sourceEvent:o,{x:u,y:d}=ze(l,i),c=gt({x:u,y:d},e.value),{x:f,y:h}=n.value?jt(c,t.value):c;return{xSnapped:f,ySnapped:h,...c}}}function kt(){return!0}function pa({handleId:e,nodeId:t,type:n,isValidConnection:r,edgeUpdaterType:o,onEdgeUpdate:a,onEdgeUpdateEnd:i}){const{id:l,vueFlowRef:u,connectionMode:d,connectionRadius:c,connectOnClick:f,connectionClickStartHandle:h,nodesConnectable:p,autoPanOnConnect:w,autoPanSpeed:v,findNode:m,panBy:E,startConnection:y,updateConnection:g,endConnection:b,emits:$,viewport:R,edges:A,nodes:x,isValidConnection:T,nodeLookup:D}=ce();let M=null,_=!1,F=null;function N(P){var G;const Y=s.toValue(n)==="target",W=$o(P),q=nr(P.target);if(W&&P.button===0||!W){let K=function(ae){S=ze(ae,re),V=Uc(gt(S,R.value,!1,[1,1]),c.value,D.value,C),k||(I(),k=!0);const le=fr(ae,{handle:V,connectionMode:d.value,fromNodeId:s.toValue(t),fromHandleId:s.toValue(e),fromType:Y?"target":"source",isValidConnection:O,doc:q,lib:"vue",flowId:l,nodeLookup:D.value},A.value,x.value,m);F=le.handleDomNode,M=le.connection,_=Zc(!!V,le.isValid);const ue={...Q,isValid:_,to:V&&_?_o({x:V.x,y:V.y},R.value):S,toHandle:le.toHandle,toPosition:_&&le.toHandle?le.toHandle.position:bo[C.position],toNode:le.toHandle?D.value.get(le.toHandle.nodeId):null};if(!(_&&V&&(Q!=null&&Q.toHandle)&&ue.toHandle&&Q.toHandle.type===ue.toHandle.type&&Q.toHandle.nodeId===ue.toHandle.nodeId&&Q.toHandle.id===ue.toHandle.id&&Q.to.x===ue.to.x&&Q.to.y===ue.to.y)){if(g(V&&_?_o({x:V.x,y:V.y},R.value):S,le.toHandle,jc(!!V,_)),Q=ue,!V&&!_&&!F)return cn(oe);M&&M.source!==M.target&&F&&(cn(oe),oe=F,F.classList.add("connecting","vue-flow__handle-connecting"),F.classList.toggle("valid",!!_),F.classList.toggle("vue-flow__handle-valid",!!_))}},ie=function(ae){(V||F)&&M&&_&&(a?a(ae,M):$.connect(M)),$.connectEnd(ae),o&&(i==null||i(ae)),cn(oe),cancelAnimationFrame(L),b(ae),k=!1,_=!1,M=null,F=null,q.removeEventListener("mousemove",K),q.removeEventListener("mouseup",ie),q.removeEventListener("touchmove",K),q.removeEventListener("touchend",ie)};const B=m(s.toValue(t));let O=s.toValue(r)||T.value||kt;!O&&B&&(O=(Y?B.isValidSourcePos:B.isValidTargetPos)||kt);let V,L=0;const{x:X,y:ee}=ze(P),Z=q==null?void 0:q.elementFromPoint(X,ee),se=ua(s.toValue(o),Z),re=(G=u.value)==null?void 0:G.getBoundingClientRect();if(!re||!se)return;const ne=Kc(s.toValue(t),se,s.toValue(e),D.value,d.value);if(!ne)return;let oe,S=ze(P,re),k=!1;const I=()=>{if(!w.value)return;const[ae,le]=sa(S,re,v.value);E({x:ae,y:le}),L=requestAnimationFrame(I)},C={...ne,nodeId:s.toValue(t),type:se,position:ne.position},H=D.value.get(s.toValue(t)),J={inProgress:!0,isValid:null,from:tt(H,C,U.Left,!0),fromHandle:C,fromPosition:C.position,fromNode:H,to:S,toHandle:null,toPosition:bo[C.position],toNode:null};y({nodeId:s.toValue(t),id:s.toValue(e),type:se,position:(Z==null?void 0:Z.getAttribute("data-handlepos"))||U.Top},{x:X-re.left,y:ee-re.top}),$.connectStart({event:P,nodeId:s.toValue(t),handleId:s.toValue(e),handleType:se});let Q=J;q.addEventListener("mousemove",K),q.addEventListener("mouseup",ie),q.addEventListener("touchmove",K),q.addEventListener("touchend",ie)}}function z(P){var G,Y;if(!f.value)return;const W=s.toValue(n)==="target";if(!h.value){$.clickConnectStart({event:P,nodeId:s.toValue(t),handleId:s.toValue(e)}),y({nodeId:s.toValue(t),type:s.toValue(n),id:s.toValue(e),position:U.Top},void 0,!0);return}let q=s.toValue(r)||T.value||kt;const K=m(s.toValue(t));if(!q&&K&&(q=(W?K.isValidSourcePos:K.isValidTargetPos)||kt),K&&(typeof K.connectable>"u"?p.value:K.connectable)===!1)return;const ie=nr(P.target),B=fr(P,{handle:{nodeId:s.toValue(t),id:s.toValue(e),type:s.toValue(n),position:U.Top},connectionMode:d.value,fromNodeId:h.value.nodeId,fromHandleId:h.value.id||null,fromType:h.value.type,isValidConnection:q,doc:ie,lib:"vue",flowId:l,nodeLookup:D.value},A.value,x.value,m),O=((G=B.connection)==null?void 0:G.source)===((Y=B.connection)==null?void 0:Y.target);B.isValid&&B.connection&&!O&&$.connect(B.connection),$.clickConnectEnd(P),b(P,!0)}return{handlePointerDown:N,handleClick:z}}function ad(){return s.inject(da,"")}function ga(e){const t=e??ad()??"",n=s.inject(fa,s.ref(null)),{findNode:r,edges:o,emits:a}=ce(),i=r(t);return i||a.error(new me(pe.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:i,parentNode:s.computed(()=>r(i.parentNode)),connectedEdges:s.computed(()=>ia([i],o.value))}}function sd(){return{doubleClick:j(),click:j(),mouseEnter:j(),mouseMove:j(),mouseLeave:j(),contextMenu:j(),dragStart:j(),drag:j(),dragStop:j()}}function ld(e,t){const n=sd();return n.doubleClick.on(r=>{var o,a;t.nodeDoubleClick(r),(a=(o=e.events)==null?void 0:o.doubleClick)==null||a.call(o,r)}),n.click.on(r=>{var o,a;t.nodeClick(r),(a=(o=e.events)==null?void 0:o.click)==null||a.call(o,r)}),n.mouseEnter.on(r=>{var o,a;t.nodeMouseEnter(r),(a=(o=e.events)==null?void 0:o.mouseEnter)==null||a.call(o,r)}),n.mouseMove.on(r=>{var o,a;t.nodeMouseMove(r),(a=(o=e.events)==null?void 0:o.mouseMove)==null||a.call(o,r)}),n.mouseLeave.on(r=>{var o,a;t.nodeMouseLeave(r),(a=(o=e.events)==null?void 0:o.mouseLeave)==null||a.call(o,r)}),n.contextMenu.on(r=>{var o,a;t.nodeContextMenu(r),(a=(o=e.events)==null?void 0:o.contextMenu)==null||a.call(o,r)}),n.dragStart.on(r=>{var o,a;t.nodeDragStart(r),(a=(o=e.events)==null?void 0:o.dragStart)==null||a.call(o,r)}),n.drag.on(r=>{var o,a;t.nodeDrag(r),(a=(o=e.events)==null?void 0:o.drag)==null||a.call(o,r)}),n.dragStop.on(r=>{var o,a;t.nodeDragStop(r),(a=(o=e.events)==null?void 0:o.dragStop)==null||a.call(o,r)}),Object.entries(n).reduce((r,[o,a])=>(r.emit[o]=a.trigger,r.on[o]=a.on,r),{emit:{},on:{}})}function ma(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:r,snapGrid:o,snapToGrid:a,nodesDraggable:i,emits:l}=ce();return(u,d=!1)=>{const c=a.value?o.value[0]:5,f=a.value?o.value[1]:5,h=d?4:1,p=u.x*c*h,w=u.y*f*h,v=[];for(const m of e.value)if(m.draggable||i&&typeof m.draggable>"u"){const E={x:m.computedPosition.x+p,y:m.computedPosition.y+w},{computedPosition:y}=Oo(m,E,l.error,t.value,m.parentNode?r(m.parentNode):void 0);v.push({id:m.id,position:y,from:m.position,distance:{x:u.x,y:u.y},dimensions:m.dimensions})}n(v,!0,!1)}}const hn=.1;function Ve(){return Zt("Viewport not initialized yet."),Promise.resolve(!1)}const ud={zoomIn:Ve,zoomOut:Ve,zoomTo:Ve,fitView:Ve,setCenter:Ve,fitBounds:Ve,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:Ve,setTransform:Ve,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function cd(e){function t(r,o){return new Promise(a=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleBy(pn(e.d3Selection,o,()=>{a(!0)}),r):a(!1)})}function n(r,o,a,i){return new Promise(l=>{const{x:u,y:d}=Ji({x:-r,y:-o},e.translateExtent),c=et.translate(-u,-d).scale(a);e.d3Selection&&e.d3Zoom?e.d3Zoom.transform(pn(e.d3Selection,i,()=>{l(!0)}),c):l(!1)})}return s.computed(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:o=>t(1.2,o==null?void 0:o.duration),zoomOut:o=>t(1/1.2,o==null?void 0:o.duration),zoomTo:(o,a)=>new Promise(i=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleTo(pn(e.d3Selection,a==null?void 0:a.duration,()=>{i(!0)}),o):i(!1)}),setViewport:(o,a)=>n(o.x,o.y,o.zoom,a==null?void 0:a.duration),setTransform:(o,a)=>n(o.x,o.y,o.zoom,a==null?void 0:a.duration),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(o={padding:hn,includeHiddenNodes:!1,duration:0})=>{var a,i;const l=[];for(const h of e.nodes)h.dimensions.width&&h.dimensions.height&&((o==null?void 0:o.includeHiddenNodes)||!h.hidden)&&(!((a=o.nodes)!=null&&a.length)||(i=o.nodes)!=null&&i.length&&o.nodes.includes(h.id))&&l.push(h);if(!l.length)return Promise.resolve(!1);const u=oa(l),{x:d,y:c,zoom:f}=or(u,e.dimensions.width,e.dimensions.height,o.minZoom??e.minZoom,o.maxZoom??e.maxZoom,o.padding??hn,o.offset);return n(d,c,f,o==null?void 0:o.duration)},setCenter:(o,a,i)=>{const l=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:e.maxZoom,u=e.dimensions.width/2-o*l,d=e.dimensions.height/2-a*l;return n(u,d,l,i==null?void 0:i.duration)},fitBounds:(o,a={padding:hn})=>{const{x:i,y:l,zoom:u}=or(o,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,a.padding);return n(i,l,u,a==null?void 0:a.duration)},project:o=>gt(o,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:o=>{if(e.vueFlowRef){const{x:a,y:i}=e.vueFlowRef.getBoundingClientRect(),l={x:o.x-a,y:o.y-i};return gt(l,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:o=>{if(e.vueFlowRef){const{x:a,y:i}=e.vueFlowRef.getBoundingClientRect(),l={x:o.x+a,y:o.y+i};return _o(l,e.viewport)}return{x:0,y:0}}}:ud)}function pn(e,t=0,n){return e.transition().duration(t).on("end",n)}function dd(e,t,n){const r=s.effectScope(!0);return r.run(()=>{const o=()=>{r.run(()=>{let v,m,E=!!(n.nodes.value.length||n.edges.value.length);v=Ue([e.modelValue,()=>{var y,g;return(g=(y=e.modelValue)==null?void 0:y.value)==null?void 0:g.length}],([y])=>{y&&Array.isArray(y)&&(m==null||m.pause(),n.setElements(y),!m&&!E&&y.length?E=!0:m==null||m.resume())}),m=Ue([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([y,g])=>{var b;(b=e.modelValue)!=null&&b.value&&Array.isArray(e.modelValue.value)&&(v==null||v.pause(),e.modelValue.value=[...y,...g],s.nextTick(()=>{v==null||v.resume()}))},{immediate:E}),s.onScopeDispose(()=>{v==null||v.stop(),m==null||m.stop()})})},a=()=>{r.run(()=>{let v,m,E=!!n.nodes.value.length;v=Ue([e.nodes,()=>{var y,g;return(g=(y=e.nodes)==null?void 0:y.value)==null?void 0:g.length}],([y])=>{y&&Array.isArray(y)&&(m==null||m.pause(),n.setNodes(y),!m&&!E&&y.length?E=!0:m==null||m.resume())}),m=Ue([n.nodes,()=>n.nodes.value.length],([y])=>{var g;(g=e.nodes)!=null&&g.value&&Array.isArray(e.nodes.value)&&(v==null||v.pause(),e.nodes.value=[...y],s.nextTick(()=>{v==null||v.resume()}))},{immediate:E}),s.onScopeDispose(()=>{v==null||v.stop(),m==null||m.stop()})})},i=()=>{r.run(()=>{let v,m,E=!!n.edges.value.length;v=Ue([e.edges,()=>{var y,g;return(g=(y=e.edges)==null?void 0:y.value)==null?void 0:g.length}],([y])=>{y&&Array.isArray(y)&&(m==null||m.pause(),n.setEdges(y),!m&&!E&&y.length?E=!0:m==null||m.resume())}),m=Ue([n.edges,()=>n.edges.value.length],([y])=>{var g;(g=e.edges)!=null&&g.value&&Array.isArray(e.edges.value)&&(v==null||v.pause(),e.edges.value=[...y],s.nextTick(()=>{v==null||v.resume()}))},{immediate:E}),s.onScopeDispose(()=>{v==null||v.stop(),m==null||m.stop()})})},l=()=>{r.run(()=>{s.watch(()=>t.maxZoom,()=>{t.maxZoom&&he(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},u=()=>{r.run(()=>{s.watch(()=>t.minZoom,()=>{t.minZoom&&he(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},d=()=>{r.run(()=>{s.watch(()=>t.translateExtent,()=>{t.translateExtent&&he(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{r.run(()=>{s.watch(()=>t.nodeExtent,()=>{t.nodeExtent&&he(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},f=()=>{r.run(()=>{s.watch(()=>t.applyDefault,()=>{he(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},h=()=>{r.run(()=>{const v=async m=>{let E=m;typeof t.autoConnect=="function"&&(E=await t.autoConnect(m)),E!==!1&&n.addEdges([E])};s.watch(()=>t.autoConnect,()=>{he(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),s.watch(n.autoConnect,(m,E,y)=>{m?n.onConnect(v):n.hooks.value.connect.off(v),y(()=>{n.hooks.value.connect.off(v)})},{immediate:!0})})},p=()=>{const v=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const m of Object.keys(t)){const E=m;if(!v.includes(E)){const y=s.toRef(()=>t[E]),g=n[E];s.isRef(g)&&r.run(()=>{s.watch(y,b=>{he(b)&&(g.value=b)},{immediate:!0})})}}};(()=>{o(),a(),i(),u(),l(),d(),c(),f(),h(),p()})()}),()=>r.stop()}function fd(){return{edgesChange:j(),nodesChange:j(),nodeDoubleClick:j(),nodeClick:j(),nodeMouseEnter:j(),nodeMouseMove:j(),nodeMouseLeave:j(),nodeContextMenu:j(),nodeDragStart:j(),nodeDrag:j(),nodeDragStop:j(),nodesInitialized:j(),miniMapNodeClick:j(),miniMapNodeDoubleClick:j(),miniMapNodeMouseEnter:j(),miniMapNodeMouseMove:j(),miniMapNodeMouseLeave:j(),connect:j(),connectStart:j(),connectEnd:j(),clickConnectStart:j(),clickConnectEnd:j(),paneReady:j(),init:j(),move:j(),moveStart:j(),moveEnd:j(),selectionDragStart:j(),selectionDrag:j(),selectionDragStop:j(),selectionContextMenu:j(),selectionStart:j(),selectionEnd:j(),viewportChangeStart:j(),viewportChange:j(),viewportChangeEnd:j(),paneScroll:j(),paneClick:j(),paneContextMenu:j(),paneMouseEnter:j(),paneMouseMove:j(),paneMouseLeave:j(),edgeContextMenu:j(),edgeMouseEnter:j(),edgeMouseMove:j(),edgeMouseLeave:j(),edgeDoubleClick:j(),edgeClick:j(),edgeUpdateStart:j(),edgeUpdate:j(),edgeUpdateEnd:j(),updateNodeInternals:j(),error:j(e=>Zt(e.message))}}function hd(e,t){s.onBeforeMount(()=>{for(const[n,r]of Object.entries(t.value)){const o=a=>{e(n,a)};r.fns.add(o),Gt(()=>{r.off(o)})}})}function va(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:To.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:lt.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:Fe.Bezier,style:{}},connectionMode:De.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:Ft()?"Meta":"Control",zoomActivationKeyCode:Ft()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:fd(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const pd=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function gd(e,t,n){const r=cd(e),o=S=>{const k=S??[];e.hooks.updateNodeInternals.trigger(k)},a=S=>$c(S,e.nodes,e.edges),i=S=>Oc(S,e.nodes,e.edges),l=S=>ia(S,e.edges),u=({id:S,type:k,nodeId:I})=>{var C;return Array.from(((C=e.connectionLookup.get(`${I}-${k}-${S??null}`))==null?void 0:C.values())??[])},d=S=>{if(S)return t.value.get(S)},c=S=>{if(S)return n.value.get(S)},f=(S,k,I)=>{var C,H;const te=[];for(const J of S){const Q={id:J.id,type:"position",dragging:I,from:J.from};if(k&&(Q.position=J.position,J.parentNode)){const ae=d(J.parentNode);Q.position={x:Q.position.x-(((C=ae==null?void 0:ae.computedPosition)==null?void 0:C.x)??0),y:Q.position.y-(((H=ae==null?void 0:ae.computedPosition)==null?void 0:H.y)??0)}}te.push(Q)}te!=null&&te.length&&e.hooks.nodesChange.trigger(te)},h=S=>{if(!e.vueFlowRef)return;const k=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!k)return;const I=window.getComputedStyle(k),{m22:C}=new window.DOMMatrixReadOnly(I.transform),H=[];for(const te of S){const J=te,Q=d(J.id);if(Q){const ae=Ut(J.nodeElement);if(!!(ae.width&&ae.height&&(Q.dimensions.width!==ae.width||Q.dimensions.height!==ae.height||J.forceUpdate))){const ue=J.nodeElement.getBoundingClientRect();Q.dimensions=ae,Q.handleBounds.source=hr("source",J.nodeElement,ue,C,Q.id),Q.handleBounds.target=hr("target",J.nodeElement,ue,C,Q.id),H.push({id:Q.id,type:"dimensions",dimensions:ae})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&r.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),H.length&&e.hooks.nodesChange.trigger(H)},p=(S,k)=>{const I=new Set,C=new Set;for(const J of S)qe(J)?I.add(J.id):Le(J)&&C.add(J.id);const H=Ae(t.value,I,!0),te=Ae(n.value,C);if(e.multiSelectionActive){for(const J of I)H.push(Pe(J,k));for(const J of C)te.push(Pe(J,k))}H.length&&e.hooks.nodesChange.trigger(H),te.length&&e.hooks.edgesChange.trigger(te)},w=S=>{if(e.multiSelectionActive){const k=S.map(I=>Pe(I.id,!0));e.hooks.nodesChange.trigger(k);return}e.hooks.nodesChange.trigger(Ae(t.value,new Set(S.map(k=>k.id)),!0)),e.hooks.edgesChange.trigger(Ae(n.value))},v=S=>{if(e.multiSelectionActive){const k=S.map(I=>Pe(I.id,!0));e.hooks.edgesChange.trigger(k);return}e.hooks.edgesChange.trigger(Ae(n.value,new Set(S.map(k=>k.id)))),e.hooks.nodesChange.trigger(Ae(t.value,new Set,!0))},m=S=>{p(S,!0)},E=S=>{const I=(S||e.nodes).map(C=>(C.selected=!1,Pe(C.id,!1)));e.hooks.nodesChange.trigger(I)},y=S=>{const I=(S||e.edges).map(C=>(C.selected=!1,Pe(C.id,!1)));e.hooks.edgesChange.trigger(I)},g=S=>{if(!S||!S.length)return p([],!1);const k=S.reduce((I,C)=>{const H=Pe(C.id,!1);return qe(C)?I.nodes.push(H):I.edges.push(H),I},{nodes:[],edges:[]});k.nodes.length&&e.hooks.nodesChange.trigger(k.nodes),k.edges.length&&e.hooks.edgesChange.trigger(k.edges)},b=S=>{var k;(k=e.d3Zoom)==null||k.scaleExtent([S,e.maxZoom]),e.minZoom=S},$=S=>{var k;(k=e.d3Zoom)==null||k.scaleExtent([e.minZoom,S]),e.maxZoom=S},R=S=>{var k;(k=e.d3Zoom)==null||k.translateExtent(S),e.translateExtent=S},A=S=>{e.nodeExtent=S,o()},x=S=>{var k;(k=e.d3Zoom)==null||k.clickDistance(S)},T=S=>{e.nodesDraggable=S,e.nodesConnectable=S,e.elementsSelectable=S},D=S=>{const k=S instanceof Function?S(e.nodes):S;!e.initialized&&!k.length||(e.nodes=pr(k,d,e.hooks.error.trigger))},M=S=>{const k=S instanceof Function?S(e.edges):S;if(!e.initialized&&!k.length)return;const I=fn(k,e.isValidConnection,d,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);dn(e.connectionLookup,n.value,I),e.edges=I},_=S=>{const k=S instanceof Function?S([...e.nodes,...e.edges]):S;!e.initialized&&!k.length||(D(k.filter(qe)),M(k.filter(Le)))},F=S=>{let k=S instanceof Function?S(e.nodes):S;k=Array.isArray(k)?k:[k];const I=pr(k,d,e.hooks.error.trigger),C=[];for(const H of I)C.push(ar(H));C.length&&e.hooks.nodesChange.trigger(C)},N=S=>{let k=S instanceof Function?S(e.edges):S;k=Array.isArray(k)?k:[k];const I=fn(k,e.isValidConnection,d,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),C=[];for(const H of I)C.push(ar(H));C.length&&e.hooks.edgesChange.trigger(C)},z=(S,k=!0,I=!1)=>{const C=S instanceof Function?S(e.nodes):S,H=Array.isArray(C)?C:[C],te=[],J=[];function Q(le){const ue=l(le);for(const de of ue)(!he(de.deletable)||de.deletable)&&J.push(lr(de.id,de.source,de.target,de.sourceHandle,de.targetHandle))}function ae(le){const ue=[];for(const de of e.nodes)de.parentNode===le&&ue.push(de);if(ue.length){for(const de of ue)te.push(sr(de.id));k&&Q(ue);for(const de of ue)ae(de.id)}}for(const le of H){const ue=typeof le=="string"?d(le):le;ue&&(he(ue.deletable)&&!ue.deletable||(te.push(sr(ue.id)),k&&Q([ue]),I&&ae(ue.id)))}J.length&&e.hooks.edgesChange.trigger(J),te.length&&e.hooks.nodesChange.trigger(te)},P=S=>{const k=S instanceof Function?S(e.edges):S,I=Array.isArray(k)?k:[k],C=[];for(const H of I){const te=typeof H=="string"?c(H):H;te&&(he(te.deletable)&&!te.deletable||C.push(lr(typeof H=="string"?H:H.id,te.source,te.target,te.sourceHandle,te.targetHandle)))}e.hooks.edgesChange.trigger(C)},G=(S,k,I=!0)=>{const C=c(S.id);if(!C)return!1;const H=e.edges.indexOf(C),te=ed(S,k,C,I,e.hooks.error.trigger);if(te){const[J]=fn([te],e.isValidConnection,d,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((Q,ae)=>ae===H?J:Q),dn(e.connectionLookup,n.value,[J]),J}return!1},Y=(S,k,I={replace:!1})=>{const C=c(S);if(!C)return;const H=typeof k=="function"?k(C):k;C.data=I.replace?H:{...C.data,...H}},W=S=>ir(S,e.nodes),q=S=>{const k=ir(S,e.edges);return dn(e.connectionLookup,n.value,k),k},K=(S,k,I={replace:!1})=>{const C=d(S);if(!C)return;const H=typeof k=="function"?k(C):k;I.replace?e.nodes.splice(e.nodes.indexOf(C),1,H):Object.assign(C,H)},ie=(S,k,I={replace:!1})=>{const C=d(S);if(!C)return;const H=typeof k=="function"?k(C):k;C.data=I.replace?H:{...C.data,...H}},B=(S,k,I=!1)=>{I?e.connectionClickStartHandle=S:e.connectionStartHandle=S,e.connectionEndHandle=null,e.connectionStatus=null,k&&(e.connectionPosition=k)},O=(S,k=null,I=null)=>{e.connectionStartHandle&&(e.connectionPosition=S,e.connectionEndHandle=k,e.connectionStatus=I)},V=(S,k)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,k?e.connectionClickStartHandle=null:e.connectionStartHandle=null},L=S=>{const k=Mc(S),I=k?null:st(S)?S:d(S.id);return!k&&!I?[null,null,k]:[k?S:zt(I),I,k]},X=(S,k=!0,I=e.nodes)=>{const[C,H,te]=L(S);if(!C)return[];const J=[];for(const Q of I||e.nodes){if(!te&&(Q.id===H.id||!Q.computedPosition))continue;const ae=zt(Q),le=Lt(ae,C);(k&&le>0||le>=Number(C.width)*Number(C.height))&&J.push(Q)}return J},ee=(S,k,I=!0)=>{const[C]=L(S);if(!C)return!1;const H=Lt(C,k);return I&&H>0||H>=Number(C.width)*Number(C.height)},Z=S=>{const{viewport:k,dimensions:I,d3Zoom:C,d3Selection:H,translateExtent:te}=e;if(!C||!H||!S.x&&!S.y)return!1;const J=et.translate(k.x+S.x,k.y+S.y).scale(k.zoom),Q=[[0,0],[I.width,I.height]],ae=C.constrain()(J,Q,te),le=e.viewport.x!==ae.x||e.viewport.y!==ae.y||e.viewport.zoom!==ae.k;return C.transform(H,ae),le},se=S=>{const k=S instanceof Function?S(e):S,I=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];he(k.defaultEdgeOptions)&&(e.defaultEdgeOptions=k.defaultEdgeOptions);const C=k.modelValue||k.nodes||k.edges?[]:void 0;C&&(k.modelValue&&C.push(...k.modelValue),k.nodes&&C.push(...k.nodes),k.edges&&C.push(...k.edges),_(C));const H=()=>{he(k.maxZoom)&&$(k.maxZoom),he(k.minZoom)&&b(k.minZoom),he(k.translateExtent)&&R(k.translateExtent)};for(const te of Object.keys(k)){const J=te,Q=k[J];![...pd,...I].includes(J)&&he(Q)&&(e[J]=Q)}uo(()=>e.d3Zoom).not.toBeNull().then(H),e.initialized||(e.initialized=!0)};return{updateNodePositions:f,updateNodeDimensions:h,setElements:_,setNodes:D,setEdges:M,addNodes:F,addEdges:N,removeNodes:z,removeEdges:P,findNode:d,findEdge:c,updateEdge:G,updateEdgeData:Y,updateNode:K,updateNodeData:ie,applyEdgeChanges:q,applyNodeChanges:W,addSelectedElements:m,addSelectedNodes:w,addSelectedEdges:v,setMinZoom:b,setMaxZoom:$,setTranslateExtent:R,setNodeExtent:A,setPaneClickDistance:x,removeSelectedElements:g,removeSelectedNodes:E,removeSelectedEdges:y,startConnection:B,updateConnection:O,endConnection:V,setInteractive:T,setState:se,getIntersectingNodes:X,getIncomers:a,getOutgoers:i,getConnectedEdges:l,getHandleConnections:u,isNodeIntersecting:ee,panBy:Z,fitView:S=>r.value.fitView(S),zoomIn:S=>r.value.zoomIn(S),zoomOut:S=>r.value.zoomOut(S),zoomTo:(S,k)=>r.value.zoomTo(S,k),setViewport:(S,k)=>r.value.setViewport(S,k),setTransform:(S,k)=>r.value.setTransform(S,k),getViewport:()=>r.value.getViewport(),getTransform:()=>r.value.getTransform(),setCenter:(S,k,I)=>r.value.setCenter(S,k,I),fitBounds:(S,k)=>r.value.fitBounds(S,k),project:S=>r.value.project(S),screenToFlowCoordinate:S=>r.value.screenToFlowCoordinate(S),flowToScreenCoordinate:S=>r.value.flowToScreenCoordinate(S),toObject:()=>{const S=[],k=[];for(const I of e.nodes){const{computedPosition:C,handleBounds:H,selected:te,dimensions:J,isParent:Q,resizing:ae,dragging:le,events:ue,...de}=I;S.push(de)}for(const I of e.edges){const{selected:C,sourceNode:H,targetNode:te,events:J,...Q}=I;k.push(Q)}return JSON.parse(JSON.stringify({nodes:S,edges:k,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:S=>new Promise(k=>{const{nodes:I,edges:C,position:H,zoom:te,viewport:J}=S;if(I&&D(I),C&&M(C),J!=null&&J.x&&(J!=null&&J.y)||H){const Q=(J==null?void 0:J.x)||H[0],ae=(J==null?void 0:J.y)||H[1],le=(J==null?void 0:J.zoom)||te||e.viewport.zoom;return uo(()=>r.value.viewportInitialized).toBe(!0).then(()=>{r.value.setViewport({x:Q,y:ae,zoom:le}).then(()=>{k(!0)})})}else k(!0)}),updateNodeInternals:o,viewportHelper:r,$reset:()=>{const S=va();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const k=et.translate(S.defaultViewport.x??0,S.defaultViewport.y??0).scale(Xe(S.defaultViewport.zoom??1,S.minZoom,S.maxZoom)),I=e.viewportRef.getBoundingClientRect(),C=[[0,0],[I.width,I.height]],H=e.d3Zoom.constrain()(k,C,S.translateExtent);e.d3Zoom.transform(e.d3Selection,H)}se(S)},$destroy:()=>{}}}const md=["data-id","data-handleid","data-nodeid","data-handlepos"],vd={name:"Handle",compatConfig:{MODE:3}},ve=s.defineComponent({...vd,props:{id:{default:null},type:{},position:{default:()=>U.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=s.createPropsRestProxy(e,["position","connectable","connectableStart","connectableEnd","id"]),r=s.toRef(()=>n.type??"source"),o=s.toRef(()=>n.isValidConnection??null),{id:a,connectionStartHandle:i,connectionClickStartHandle:l,connectionEndHandle:u,vueFlowRef:d,nodesConnectable:c,noDragClassName:f,noPanClassName:h}=ce(),{id:p,node:w,nodeEl:v,connectedEdges:m}=ga(),E=s.ref(),y=s.toRef(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),g=s.toRef(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),b=s.toRef(()=>{var M,_,F,N,z,P;return((M=i.value)==null?void 0:M.nodeId)===p&&((_=i.value)==null?void 0:_.id)===e.id&&((F=i.value)==null?void 0:F.type)===r.value||((N=u.value)==null?void 0:N.nodeId)===p&&((z=u.value)==null?void 0:z.id)===e.id&&((P=u.value)==null?void 0:P.type)===r.value}),$=s.toRef(()=>{var M,_,F;return((M=l.value)==null?void 0:M.nodeId)===p&&((_=l.value)==null?void 0:_.id)===e.id&&((F=l.value)==null?void 0:F.type)===r.value}),{handlePointerDown:R,handleClick:A}=pa({nodeId:p,handleId:e.id,isValidConnection:o,type:r}),x=s.computed(()=>typeof e.connectable=="string"&&e.connectable==="single"?!m.value.some(M=>{const _=M[`${r.value}Handle`];return M[r.value]!==p?!1:_?_===e.id:!0}):typeof e.connectable=="number"?m.value.filter(M=>{const _=M[`${r.value}Handle`];return M[r.value]!==p?!1:_?_===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(w,m.value):he(e.connectable)?e.connectable:c.value);s.onMounted(()=>{var M;if(!w.dimensions.width||!w.dimensions.height)return;const _=(M=w.handleBounds[r.value])==null?void 0:M.find(W=>W.id===e.id);if(!d.value||_)return;const F=d.value.querySelector(".vue-flow__transformationpane");if(!v.value||!E.value||!F||!e.id)return;const N=v.value.getBoundingClientRect(),z=E.value.getBoundingClientRect(),P=window.getComputedStyle(F),{m22:G}=new window.DOMMatrixReadOnly(P.transform),Y={id:e.id,position:e.position,x:(z.left-N.left)/G,y:(z.top-N.top)/G,type:r.value,nodeId:p,...Ut(E.value)};w.handleBounds[r.value]=[...w.handleBounds[r.value]??[],Y]});function T(M){const _=$o(M);x.value&&y.value&&(_&&M.button===0||!_)&&R(M)}function D(M){!p||!l.value&&!y.value||x.value&&A(M)}return t({handleClick:A,handlePointerDown:R,onClick:D,onPointerDown:T}),(M,_)=>(s.openBlock(),s.createElementBlock("div",{ref_key:"handle",ref:E,"data-id":`${s.unref(a)}-${s.unref(p)}-${e.id}-${r.value}`,"data-handleid":e.id,"data-nodeid":s.unref(p),"data-handlepos":M.position,class:s.normalizeClass(["vue-flow__handle",[`vue-flow__handle-${M.position}`,`vue-flow__handle-${e.id}`,s.unref(f),s.unref(h),r.value,{connectable:x.value,connecting:$.value,connectablestart:y.value,connectableend:g.value,connectionindicator:x.value&&(y.value&&!b.value||g.value&&b.value)}]]),onMousedown:T,onTouchstartPassive:T,onClick:D},[s.renderSlot(M.$slots,"default",{id:M.id})],42,md))}}),Jt=function({sourcePosition:e=U.Bottom,targetPosition:t=U.Top,label:n,connectable:r=!0,isValidTargetPos:o,isValidSourcePos:a,data:i}){const l=i.label||n;return[s.h(ve,{type:"target",position:t,connectable:r,isValidConnection:o}),typeof l!="string"&&l?s.h(l):s.h(s.Fragment,[l]),s.h(ve,{type:"source",position:e,connectable:r,isValidConnection:a})]};Jt.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];Jt.inheritAttrs=!1;Jt.compatConfig={MODE:3};const yd=Jt,Qt=function({targetPosition:e=U.Top,label:t,connectable:n=!0,isValidTargetPos:r,data:o}){const a=o.label||t;return[s.h(ve,{type:"target",position:e,connectable:n,isValidConnection:r}),typeof a!="string"&&a?s.h(a):s.h(s.Fragment,[a])]};Qt.props=["targetPosition","label","isValidTargetPos","connectable","data"];Qt.inheritAttrs=!1;Qt.compatConfig={MODE:3};const wd=Qt,en=function({sourcePosition:e=U.Bottom,label:t,connectable:n=!0,isValidSourcePos:r,data:o}){const a=o.label||t;return[typeof a!="string"&&a?s.h(a):s.h(s.Fragment,[a]),s.h(ve,{type:"source",position:e,connectable:n,isValidConnection:r})]};en.props=["sourcePosition","label","isValidSourcePos","connectable","data"];en.inheritAttrs=!1;en.compatConfig={MODE:3};const _d=en,bd=["transform"],Ed=["width","height","x","y","rx","ry"],xd=["y"],Nd={name:"EdgeText",compatConfig:{MODE:3}},kd=s.defineComponent({...Nd,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=s.ref({x:0,y:0,width:0,height:0}),n=s.ref(null),r=s.computed(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);s.onMounted(o),s.watch([()=>e.x,()=>e.y,n,()=>e.label],o);function o(){if(!n.value)return;const a=n.value.getBBox();(a.width!==t.value.width||a.height!==t.value.height)&&(t.value=a)}return(a,i)=>(s.openBlock(),s.createElementBlock("g",{transform:r.value,class:"vue-flow__edge-textwrapper"},[a.labelShowBg?(s.openBlock(),s.createElementBlock("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*a.labelBgPadding[0]}px`,height:`${t.value.height+2*a.labelBgPadding[1]}px`,x:-a.labelBgPadding[0],y:-a.labelBgPadding[1],style:s.normalizeStyle(a.labelBgStyle),rx:a.labelBgBorderRadius,ry:a.labelBgBorderRadius},null,12,Ed)):s.createCommentVNode("",!0),s.createElementVNode("text",s.mergeProps(a.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:a.labelStyle}),[s.renderSlot(a.$slots,"default",{},()=>[typeof a.label!="string"?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(a.label),{key:0})):(s.openBlock(),s.createElementBlock(s.Fragment,{key:1},[s.createTextVNode(s.toDisplayString(a.label),1)],64))])],16,xd)],8,bd))}}),Sd=["id","d","marker-end","marker-start"],Cd=["d","stroke-width"],Id={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},tn=s.defineComponent({...Id,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=s.ref(null),r=s.ref(null),o=s.ref(null),a=s.useAttrs();return t({pathEl:n,interactionEl:r,labelEl:o}),(i,l)=>(s.openBlock(),s.createElementBlock(s.Fragment,null,[s.createElementVNode("path",s.mergeProps(s.unref(a),{id:i.id,ref_key:"pathEl",ref:n,d:i.path,class:"vue-flow__edge-path","marker-end":i.markerEnd,"marker-start":i.markerStart}),null,16,Sd),i.interactionWidth?(s.openBlock(),s.createElementBlock("path",{key:0,ref_key:"interactionEl",ref:r,fill:"none",d:i.path,"stroke-width":i.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,Cd)):s.createCommentVNode("",!0),i.label&&i.labelX&&i.labelY?(s.openBlock(),s.createBlock(kd,{key:1,ref_key:"labelEl",ref:o,x:i.labelX,y:i.labelY,label:i.label,"label-show-bg":i.labelShowBg,"label-bg-style":i.labelBgStyle,"label-bg-padding":i.labelBgPadding,"label-bg-border-radius":i.labelBgBorderRadius,"label-style":i.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):s.createCommentVNode("",!0)],64))}});function ya({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,a=n<e?n+o:n-o,i=Math.abs(r-t)/2,l=r<t?r+i:r-i;return[a,l,o,i]}function wa({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:a,targetControlX:i,targetControlY:l}){const u=e*.125+o*.375+i*.375+n*.125,d=t*.125+a*.375+l*.375+r*.125,c=Math.abs(u-e),f=Math.abs(d-t);return[u,d,c,f]}function St(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function yr({pos:e,x1:t,y1:n,x2:r,y2:o,c:a}){let i,l;switch(e){case U.Left:i=t-St(t-r,a),l=n;break;case U.Right:i=t+St(r-t,a),l=n;break;case U.Top:i=t,l=n-St(n-o,a);break;case U.Bottom:i=t,l=n+St(o-n,a);break}return[i,l]}function _a(e){const{sourceX:t,sourceY:n,sourcePosition:r=U.Bottom,targetX:o,targetY:a,targetPosition:i=U.Top,curvature:l=.25}=e,[u,d]=yr({pos:r,x1:t,y1:n,x2:o,y2:a,c:l}),[c,f]=yr({pos:i,x1:o,y1:a,x2:t,y2:n,c:l}),[h,p,w,v]=wa({sourceX:t,sourceY:n,targetX:o,targetY:a,sourceControlX:u,sourceControlY:d,targetControlX:c,targetControlY:f});return[`M${t},${n} C${u},${d} ${c},${f} ${o},${a}`,h,p,w,v]}function wr({pos:e,x1:t,y1:n,x2:r,y2:o}){let a,i;switch(e){case U.Left:case U.Right:a=.5*(t+r),i=n;break;case U.Top:case U.Bottom:a=t,i=.5*(n+o);break}return[a,i]}function ba(e){const{sourceX:t,sourceY:n,sourcePosition:r=U.Bottom,targetX:o,targetY:a,targetPosition:i=U.Top}=e,[l,u]=wr({pos:r,x1:t,y1:n,x2:o,y2:a}),[d,c]=wr({pos:i,x1:o,y1:a,x2:t,y2:n}),[f,h,p,w]=wa({sourceX:t,sourceY:n,targetX:o,targetY:a,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:c});return[`M${t},${n} C${l},${u} ${d},${c} ${o},${a}`,f,h,p,w]}const _r={[U.Left]:{x:-1,y:0},[U.Right]:{x:1,y:0},[U.Top]:{x:0,y:-1},[U.Bottom]:{x:0,y:1}};function Md({source:e,sourcePosition:t=U.Bottom,target:n}){return t===U.Left||t===U.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function br(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function Td({source:e,sourcePosition:t=U.Bottom,target:n,targetPosition:r=U.Top,center:o,offset:a}){const i=_r[t],l=_r[r],u={x:e.x+i.x*a,y:e.y+i.y*a},d={x:n.x+l.x*a,y:n.y+l.y*a},c=Md({source:u,sourcePosition:t,target:d}),f=c.x!==0?"x":"y",h=c[f];let p,w,v;const m={x:0,y:0},E={x:0,y:0},[y,g,b,$]=ya({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[f]*l[f]===-1){w=o.x??y,v=o.y??g;const A=[{x:w,y:u.y},{x:w,y:d.y}],x=[{x:u.x,y:v},{x:d.x,y:v}];i[f]===h?p=f==="x"?A:x:p=f==="x"?x:A}else{const A=[{x:u.x,y:d.y}],x=[{x:d.x,y:u.y}];if(f==="x"?p=i.x===h?x:A:p=i.y===h?A:x,t===r){const F=Math.abs(e[f]-n[f]);if(F<=a){const N=Math.min(a-1,a-F);i[f]===h?m[f]=(u[f]>e[f]?-1:1)*N:E[f]=(d[f]>n[f]?-1:1)*N}}if(t!==r){const F=f==="x"?"y":"x",N=i[f]===l[F],z=u[F]>d[F],P=u[F]<d[F];(i[f]===1&&(!N&&z||N&&P)||i[f]!==1&&(!N&&P||N&&z))&&(p=f==="x"?A:x)}const T={x:u.x+m.x,y:u.y+m.y},D={x:d.x+E.x,y:d.y+E.y},M=Math.max(Math.abs(T.x-p[0].x),Math.abs(D.x-p[0].x)),_=Math.max(Math.abs(T.y-p[0].y),Math.abs(D.y-p[0].y));M>=_?(w=(T.x+D.x)/2,v=p[0].y):(w=p[0].x,v=(T.y+D.y)/2)}return[[e,{x:u.x+m.x,y:u.y+m.y},...p,{x:d.x+E.x,y:d.y+E.y},n],w,v,b,$]}function Od(e,t,n,r){const o=Math.min(br(e,t)/2,br(t,n)/2,r),{x:a,y:i}=t;if(e.x===a&&a===n.x||e.y===i&&i===n.y)return`L${a} ${i}`;if(e.y===i){const d=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${a+o*d},${i}Q ${a},${i} ${a},${i+o*c}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${a},${i+o*u}Q ${a},${i} ${a+o*l},${i}`}function xo(e){const{sourceX:t,sourceY:n,sourcePosition:r=U.Bottom,targetX:o,targetY:a,targetPosition:i=U.Top,borderRadius:l=5,centerX:u,centerY:d,offset:c=20}=e,[f,h,p,w,v]=Td({source:{x:t,y:n},sourcePosition:r,target:{x:o,y:a},targetPosition:i,center:{x:u,y:d},offset:c});return[f.reduce((E,y,g)=>{let b;return g>0&&g<f.length-1?b=Od(f[g-1],y,f[g+1],l):b=`${g===0?"M":"L"}${y.x} ${y.y}`,E+=b,E},""),h,p,w,v]}function $d(e){const{sourceX:t,sourceY:n,targetX:r,targetY:o}=e,[a,i,l,u]=ya({sourceX:t,sourceY:n,targetX:r,targetY:o});return[`M ${t},${n}L ${r},${o}`,a,i,l,u]}const Dd=s.defineComponent({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,r,o]=$d(e);return s.h(tn,{path:n,labelX:r,labelY:o,...t,...e})}}}),Bd=Dd,Vd=s.defineComponent({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,r,o]=xo({...e,sourcePosition:e.sourcePosition??U.Bottom,targetPosition:e.targetPosition??U.Top});return s.h(tn,{path:n,labelX:r,labelY:o,...t,...e})}}}),Ea=Vd,Pd=s.defineComponent({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>s.h(Ea,{...e,...t,borderRadius:0})}}),Rd=Pd,Ad=s.defineComponent({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,r,o]=_a({...e,sourcePosition:e.sourcePosition??U.Bottom,targetPosition:e.targetPosition??U.Top});return s.h(tn,{path:n,labelX:r,labelY:o,...t,...e})}}}),zd=Ad,Ld=s.defineComponent({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,r,o]=ba({...e,sourcePosition:e.sourcePosition??U.Bottom,targetPosition:e.targetPosition??U.Top});return s.h(tn,{path:n,labelX:r,labelY:o,...t,...e})}}}),Fd=Ld,Hd={input:_d,default:yd,output:wd},Gd={default:zd,straight:Bd,step:Rd,smoothstep:Ea,simplebezier:Fd};function Yd(e,t,n){const r=s.computed(()=>v=>t.value.get(v)),o=s.computed(()=>v=>n.value.get(v)),a=s.computed(()=>{const v={...Gd,...e.edgeTypes},m=Object.keys(v);for(const E of e.edges)E.type&&!m.includes(E.type)&&(v[E.type]=E.type);return v}),i=s.computed(()=>{const v={...Hd,...e.nodeTypes},m=Object.keys(v);for(const E of e.nodes)E.type&&!m.includes(E.type)&&(v[E.type]=E.type);return v}),l=s.computed(()=>e.onlyRenderVisibleElements?ra(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),u=s.computed(()=>{if(e.onlyRenderVisibleElements){const v=[];for(const m of e.edges){const E=t.value.get(m.source),y=t.value.get(m.target);Fc({sourcePos:E.computedPosition||{x:0,y:0},targetPos:y.computedPosition||{x:0,y:0},sourceWidth:E.dimensions.width,sourceHeight:E.dimensions.height,targetWidth:y.dimensions.width,targetHeight:y.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&v.push(m)}return v}return e.edges}),d=s.computed(()=>[...l.value,...u.value]),c=s.computed(()=>{const v=[];for(const m of e.nodes)m.selected&&v.push(m);return v}),f=s.computed(()=>{const v=[];for(const m of e.edges)m.selected&&v.push(m);return v}),h=s.computed(()=>[...c.value,...f.value]),p=s.computed(()=>{const v=[];for(const m of e.nodes)m.dimensions.width&&m.dimensions.height&&m.handleBounds!==void 0&&v.push(m);return v}),w=s.computed(()=>l.value.length>0&&p.value.length===l.value.length);return{getNode:r,getEdge:o,getElements:d,getEdgeTypes:a,getNodeTypes:i,getEdges:u,getNodes:l,getSelectedElements:h,getSelectedNodes:c,getSelectedEdges:f,getNodesInitialized:p,areNodesInitialized:w}}class He{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=s.getCurrentInstance())==null?void 0:t.appContext.app,r=(n==null?void 0:n.config.globalProperties.$vueFlowStorage)??He.instance;return He.instance=r??new He,n&&(n.config.globalProperties.$vueFlowStorage=He.instance),He.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const r=va(),o=s.reactive(r),a={};for(const[h,p]of Object.entries(o.hooks)){const w=`on${h.charAt(0).toUpperCase()+h.slice(1)}`;a[w]=p.on}const i={};for(const[h,p]of Object.entries(o.hooks))i[h]=p.trigger;const l=s.computed(()=>{const h=new Map;for(const p of o.nodes)h.set(p.id,p);return h}),u=s.computed(()=>{const h=new Map;for(const p of o.edges)h.set(p.id,p);return h}),d=Yd(o,l,u),c=gd(o,l,u);c.setState({...o,...n});const f={...a,...d,...c,...Ha(o),nodeLookup:l,edgeLookup:u,emits:i,id:t,vueFlowVersion:"1.43.1",$destroy:()=>{this.remove(t)}};return this.set(t,f),f}getId(){return`vue-flow-${this.currentId++}`}}function ce(e){const t=He.getInstance(),n=s.getCurrentScope(),r=typeof e=="object",o=r?e:{id:e},a=o.id,i=a??(n==null?void 0:n.vueFlowId);let l;if(n){const u=s.inject(vr,null);typeof u<"u"&&u!==null&&(!i||u.id===i)&&(l=u)}if(l||i&&(l=t.get(i)),!l||i&&l.id!==i){const u=a??t.getId(),d=t.create(u,o);l=d,(n??s.effectScope(!0)).run(()=>{s.watch(d.applyDefault,(f,h,p)=>{const w=m=>{d.applyNodeChanges(m)},v=m=>{d.applyEdgeChanges(m)};f?(d.onNodesChange(w),d.onEdgesChange(v)):(d.hooks.value.nodesChange.off(w),d.hooks.value.edgesChange.off(v)),p(()=>{d.hooks.value.nodesChange.off(w),d.hooks.value.edgesChange.off(v)})},{immediate:!0}),Gt(()=>{if(l){const f=t.get(l.id);f?f.$destroy():Zt(`No store instance found for id ${l.id} in storage.`)}})})}else r&&l.setState(o);if(n&&(s.provide(vr,l),n.vueFlowId=l.id),r){const u=s.getCurrentInstance();(u==null?void 0:u.type.name)!=="VueFlow"&&l.emits.error(new me(pe.USEVUEFLOW_OPTIONS))}return l}function qd(e){const{emits:t,dimensions:n}=ce();let r;s.onMounted(()=>{const o=e.value,a=()=>{if(!o)return;const i=Ut(o);(i.width===0||i.height===0)&&t.error(new me(pe.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:i.width||500,height:i.height||500}};a(),window.addEventListener("resize",a),o&&(r=new ResizeObserver(()=>a()),r.observe(o)),s.onBeforeUnmount(()=>{window.removeEventListener("resize",a),r&&o&&r.unobserve(o)})})}const Wd={name:"UserSelection",compatConfig:{MODE:3}},Xd=s.defineComponent({...Wd,props:{userSelectionRect:{}},setup(e){return(t,n)=>(s.openBlock(),s.createElementBlock("div",{class:"vue-flow__selection vue-flow__container",style:s.normalizeStyle({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),Ud=["tabIndex"],jd={name:"NodesSelection",compatConfig:{MODE:3}},Zd=s.defineComponent({...jd,setup(e){const{emits:t,viewport:n,getSelectedNodes:r,noPanClassName:o,disableKeyboardA11y:a,userSelectionActive:i}=ce(),l=ma(),u=s.ref(null),d=ha({el:u,onStart(w){t.selectionDragStart(w)},onDrag(w){t.selectionDrag(w)},onStop(w){t.selectionDragStop(w)}});s.onMounted(()=>{var w;a.value||(w=u.value)==null||w.focus({preventScroll:!0})});const c=s.computed(()=>oa(r.value)),f=s.computed(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function h(w){t.selectionContextMenu({event:w,nodes:r.value})}function p(w){a||Ke[w.key]&&(w.preventDefault(),l({x:Ke[w.key].x,y:Ke[w.key].y},w.shiftKey))}return(w,v)=>!s.unref(i)&&c.value.width&&c.value.height?(s.openBlock(),s.createElementBlock("div",{key:0,class:s.normalizeClass(["vue-flow__nodesselection vue-flow__container",s.unref(o)]),style:s.normalizeStyle({transform:`translate(${s.unref(n).x}px,${s.unref(n).y}px) scale(${s.unref(n).zoom})`})},[s.createElementVNode("div",{ref_key:"el",ref:u,class:s.normalizeClass([{dragging:s.unref(d)},"vue-flow__nodesselection-rect"]),style:s.normalizeStyle(f.value),tabIndex:s.unref(a)?void 0:-1,onContextmenu:h,onKeydown:p},null,46,Ud)],6)):s.createCommentVNode("",!0)}});function Kd(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Jd={name:"Pane",compatConfig:{MODE:3}},Qd=s.defineComponent({...Jd,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:r,emits:o,userSelectionActive:a,removeSelectedElements:i,userSelectionRect:l,elementsSelectable:u,nodesSelectionActive:d,getSelectedEdges:c,getSelectedNodes:f,removeNodes:h,removeEdges:p,selectionMode:w,deleteKeyCode:v,multiSelectionKeyCode:m,multiSelectionActive:E,edgeLookup:y,nodeLookup:g,connectionLookup:b,defaultEdgeOptions:$,connectionStartHandle:R}=ce(),A=s.ref(null),x=s.ref(new Set),T=s.ref(new Set),D=s.ref(),M=s.toRef(()=>u.value&&(e.isSelecting||a.value)),_=s.toRef(()=>R.value!==null);let F=!1,N=!1;const z=ut(v,{actInsideInputWithModifier:!1}),P=ut(m);s.watch(z,O=>{O&&(h(f.value),p(c.value),d.value=!1)}),s.watch(P,O=>{E.value=O});function G(O,V){return L=>{L.target===V&&(O==null||O(L))}}function Y(O){if(F||_.value){F=!1;return}o.paneClick(O),i(),d.value=!1}function W(O){O.preventDefault(),O.stopPropagation(),o.paneContextMenu(O)}function q(O){o.paneScroll(O)}function K(O){var V,L,X;if(D.value=(V=t.value)==null?void 0:V.getBoundingClientRect(),!u.value||!e.isSelecting||O.button!==0||O.target!==A.value||!D.value)return;(X=(L=O.target)==null?void 0:L.setPointerCapture)==null||X.call(L,O.pointerId);const{x:ee,y:Z}=Kd(O,D.value);N=!0,F=!1,i(),l.value={width:0,height:0,startX:ee,startY:Z,x:ee,y:Z},o.selectionStart(O)}function ie(O){var V;if(!D.value||!l.value)return;F=!0;const{x:L,y:X}=ze(O,D.value),{startX:ee=0,startY:Z=0}=l.value,se={startX:ee,startY:Z,x:L<ee?L:ee,y:X<Z?X:Z,width:Math.abs(L-ee),height:Math.abs(X-Z)},re=x.value,ne=T.value;x.value=new Set(ra(n.value,se,r.value,w.value===To.Partial,!0).map(S=>S.id)),T.value=new Set;const oe=((V=$.value)==null?void 0:V.selectable)??!0;for(const S of x.value){const k=b.value.get(S);if(k)for(const{edgeId:I}of k.values()){const C=y.value.get(I);C&&(C.selectable??oe)&&T.value.add(I)}}if(!mr(re,x.value)){const S=Ae(g.value,x.value,!0);o.nodesChange(S)}if(!mr(ne,T.value)){const S=Ae(y.value,T.value);o.edgesChange(S)}l.value=se,a.value=!0,d.value=!1}function B(O){var V;O.button!==0||!N||((V=O.target)==null||V.releasePointerCapture(O.pointerId),!a.value&&l.value&&O.target===A.value&&Y(O),a.value=!1,l.value=null,d.value=x.value.size>0,o.selectionEnd(O),e.selectionKeyPressed&&(F=!1),N=!1)}return(O,V)=>(s.openBlock(),s.createElementBlock("div",{ref_key:"container",ref:A,class:s.normalizeClass(["vue-flow__pane vue-flow__container",{selection:O.isSelecting}]),onClick:V[0]||(V[0]=L=>M.value?void 0:G(Y,A.value)(L)),onContextmenu:V[1]||(V[1]=L=>G(W,A.value)(L)),onWheelPassive:V[2]||(V[2]=L=>G(q,A.value)(L)),onPointerenter:V[3]||(V[3]=L=>M.value?void 0:s.unref(o).paneMouseEnter(L)),onPointerdown:V[4]||(V[4]=L=>M.value?K(L):s.unref(o).paneMouseMove(L)),onPointermove:V[5]||(V[5]=L=>M.value?ie(L):s.unref(o).paneMouseMove(L)),onPointerup:V[6]||(V[6]=L=>M.value?B(L):void 0),onPointerleave:V[7]||(V[7]=L=>s.unref(o).paneMouseLeave(L))},[s.renderSlot(O.$slots,"default"),s.unref(a)&&s.unref(l)?(s.openBlock(),s.createBlock(Xd,{key:0,"user-selection-rect":s.unref(l)},null,8,["user-selection-rect"])):s.createCommentVNode("",!0),s.unref(d)&&s.unref(f).length?(s.openBlock(),s.createBlock(Zd,{key:1})):s.createCommentVNode("",!0)],34))}}),ef={name:"Transform",compatConfig:{MODE:3}},tf=s.defineComponent({...ef,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:r}=ce(),o=s.computed(()=>n.value?!r.value:!1),a=s.computed(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(i,l)=>(s.openBlock(),s.createElementBlock("div",{class:"vue-flow__transformationpane vue-flow__container",style:s.normalizeStyle({transform:a.value,opacity:o.value?0:void 0})},[s.renderSlot(i.$slots,"default")],4))}}),nf={name:"Viewport",compatConfig:{MODE:3}},of=s.defineComponent({...nf,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:r,translateExtent:o,zoomActivationKeyCode:a,selectionKeyCode:i,panActivationKeyCode:l,panOnScroll:u,panOnScrollMode:d,panOnScrollSpeed:c,panOnDrag:f,zoomOnDoubleClick:h,zoomOnPinch:p,zoomOnScroll:w,preventScrolling:v,noWheelClassName:m,noPanClassName:E,emits:y,connectionStartHandle:g,userSelectionActive:b,paneDragging:$,d3Zoom:R,d3Selection:A,d3ZoomHandler:x,viewport:T,viewportRef:D,paneClickDistance:M}=ce();qd(D);const _=s.ref(!1),F=s.ref(!1);let N=null,z=!1,P=0,G={x:0,y:0,zoom:0};const Y=ut(l),W=ut(i),q=ut(a),K=s.toRef(()=>(!W.value||W.value&&i.value===!0)&&(Y.value||f.value)),ie=s.toRef(()=>Y.value||u.value),B=s.toRef(()=>W.value||i.value===!0&&K.value!==!0);s.onMounted(()=>{if(!D.value){Zt("Viewport element is missing");return}const Z=D.value,se=Z.getBoundingClientRect(),re=xc().clickDistance(M.value).scaleExtent([t.value,n.value]).translateExtent(o.value),ne=be(Z).call(re),oe=ne.on("wheel.zoom"),S=et.translate(r.value.x??0,r.value.y??0).scale(Xe(r.value.zoom??1,t.value,n.value)),k=[[0,0],[se.width,se.height]],I=re.constrain()(S,k,o.value);re.transform(ne,I),re.wheelDelta(V),R.value=re,A.value=ne,x.value=oe,T.value={x:I.x,y:I.y,zoom:I.k},re.on("start",C=>{var H;if(!C.sourceEvent)return null;P=C.sourceEvent.button,_.value=!0;const te=X(C.transform);((H=C.sourceEvent)==null?void 0:H.type)==="mousedown"&&($.value=!0),G=te,y.viewportChangeStart(te),y.moveStart({event:C,flowTransform:te})}),re.on("end",C=>{if(!C.sourceEvent)return null;if(_.value=!1,$.value=!1,O(K.value,P??0)&&!z&&y.paneContextMenu(C.sourceEvent),z=!1,L(G,C.transform)){const H=X(C.transform);G=H,y.viewportChangeEnd(H),y.moveEnd({event:C,flowTransform:H})}}),re.filter(C=>{var H;const te=q.value||w.value,J=p.value&&C.ctrlKey,Q=C.button;if(Q===1&&C.type==="mousedown"&&(ee(C,"vue-flow__node")||ee(C,"vue-flow__edge")))return!0;if(!K.value&&!te&&!ie.value&&!h.value&&!p.value||b.value||!h.value&&C.type==="dblclick"||ee(C,m.value)&&C.type==="wheel"||ee(C,E.value)&&(C.type!=="wheel"||ie.value&&C.type==="wheel"&&!q.value)||!p.value&&C.ctrlKey&&C.type==="wheel"||!te&&!ie.value&&!J&&C.type==="wheel")return!1;if(!p&&C.type==="touchstart"&&((H=C.touches)==null?void 0:H.length)>1)return C.preventDefault(),!1;if(!K.value&&(C.type==="mousedown"||C.type==="touchstart")||i.value===!0&&Array.isArray(f.value)&&f.value.includes(0)&&Q===0||Array.isArray(f.value)&&!f.value.includes(Q)&&(C.type==="mousedown"||C.type==="touchstart"))return!1;const ae=Array.isArray(f.value)&&f.value.includes(Q)||i.value===!0&&Array.isArray(f.value)&&!f.value.includes(0)||!Q||Q<=1;return(!C.ctrlKey||Y.value||C.type==="wheel")&&ae}),s.watch([b,K],()=>{b.value&&!_.value?re.on("zoom",null):b.value||re.on("zoom",C=>{T.value={x:C.transform.x,y:C.transform.y,zoom:C.transform.k};const H=X(C.transform);z=O(K.value,P??0),y.viewportChange(H),y.move({event:C,flowTransform:H})})},{immediate:!0}),s.watch([b,ie,d,q,p,v,m],()=>{ie.value&&!q.value&&!b.value?ne.on("wheel.zoom",C=>{if(ee(C,m.value))return!1;const H=q.value||w.value,te=p.value&&C.ctrlKey;if(!(!v.value||ie.value||H||te))return!1;C.preventDefault(),C.stopImmediatePropagation();const Q=ne.property("__zoom").k||1,ae=Ft();if(!Y.value&&C.ctrlKey&&p.value&&ae){const nt=Se(C),Ta=V(C),Oa=Q*2**Ta;re.scaleTo(ne,Oa,nt,C);return}const le=C.deltaMode===1?20:1;let ue=d.value===lt.Vertical?0:C.deltaX*le,de=d.value===lt.Horizontal?0:C.deltaY*le;!ae&&C.shiftKey&&d.value!==lt.Vertical&&!ue&&de&&(ue=de,de=0),re.translateBy(ne,-(ue/Q)*c.value,-(de/Q)*c.value);const ke=X(ne.property("__zoom"));N&&clearTimeout(N),F.value?(y.move({event:C,flowTransform:ke}),y.viewportChange(ke),N=setTimeout(()=>{y.moveEnd({event:C,flowTransform:ke}),y.viewportChangeEnd(ke),F.value=!1},150)):(F.value=!0,y.moveStart({event:C,flowTransform:ke}),y.viewportChangeStart(ke))},{passive:!1}):typeof oe<"u"&&ne.on("wheel.zoom",function(C,H){const te=!v.value&&C.type==="wheel"&&!C.ctrlKey,J=q.value||w.value,Q=p.value&&C.ctrlKey;if(!J&&!u.value&&!Q&&C.type==="wheel"||te||ee(C,m.value))return null;C.preventDefault(),oe.call(this,C,H)},{passive:!1})},{immediate:!0})});function O(Z,se){return se===2&&Array.isArray(Z)&&Z.includes(2)}function V(Z){const se=Z.ctrlKey&&Ft()?10:1;return-Z.deltaY*(Z.deltaMode===1?.05:Z.deltaMode?1:.002)*se}function L(Z,se){return Z.x!==se.x&&!Number.isNaN(se.x)||Z.y!==se.y&&!Number.isNaN(se.y)||Z.zoom!==se.k&&!Number.isNaN(se.k)}function X(Z){return{x:Z.x,y:Z.y,zoom:Z.k}}function ee(Z,se){return Z.target.closest(`.${se}`)}return(Z,se)=>(s.openBlock(),s.createElementBlock("div",{ref_key:"viewportRef",ref:D,class:"vue-flow__viewport vue-flow__container"},[s.createVNode(Qd,{"is-selecting":B.value,"selection-key-pressed":s.unref(W),class:s.normalizeClass({connecting:!!s.unref(g),dragging:s.unref($),draggable:s.unref(f)===!0||Array.isArray(s.unref(f))&&s.unref(f).includes(0)})},{default:s.withCtx(()=>[s.createVNode(tf,null,{default:s.withCtx(()=>[s.renderSlot(Z.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),rf=["id"],af=["id"],sf=["id"],lf={name:"A11yDescriptions",compatConfig:{MODE:3}},uf=s.defineComponent({...lf,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:r}=ce();return(o,a)=>(s.openBlock(),s.createElementBlock(s.Fragment,null,[s.createElementVNode("div",{id:`${s.unref(ji)}-${s.unref(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+s.toDisplayString(s.unref(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,rf),s.createElementVNode("div",{id:`${s.unref(Zi)}-${s.unref(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,af),s.unref(n)?s.createCommentVNode("",!0):(s.openBlock(),s.createElementBlock("div",{key:0,id:`${s.unref(Ic)}-${s.unref(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},s.toDisplayString(s.unref(r)),9,sf))],64))}});function cf(){const e=ce();s.watch(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function df(e,t,n){return n===U.Left?e-t:n===U.Right?e+t:e}function ff(e,t,n){return n===U.Top?e-t:n===U.Bottom?e+t:e}const Do=function({radius:e=10,centerX:t=0,centerY:n=0,position:r=U.Top,type:o}){return s.h("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${o}`,cx:df(t,e,r),cy:ff(n,e,r),r:e,stroke:"transparent",fill:"transparent"})};Do.props=["radius","centerX","centerY","position","type"];Do.compatConfig={MODE:3};const Er=Do,hf=s.defineComponent({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:r,edgeUpdaterRadius:o,emits:a,nodesSelectionActive:i,noPanClassName:l,getEdgeTypes:u,removeSelectedEdges:d,findEdge:c,findNode:f,isValidConnection:h,multiSelectionActive:p,disableKeyboardA11y:w,elementsSelectable:v,edgesUpdatable:m,edgesFocusable:E,hooks:y}=ce(),g=s.computed(()=>c(e.id)),{emit:b,on:$}=rd(g.value,a),R=s.inject(Kt),A=s.getCurrentInstance(),x=s.ref(!1),T=s.ref(!1),D=s.ref(""),M=s.ref(null),_=s.ref("source"),F=s.ref(null),N=s.toRef(()=>typeof g.value.selectable>"u"?v.value:g.value.selectable),z=s.toRef(()=>typeof g.value.updatable>"u"?m.value:g.value.updatable),P=s.toRef(()=>typeof g.value.focusable>"u"?E.value:g.value.focusable);s.provide(td,e.id),s.provide(nd,F);const G=s.computed(()=>g.value.class instanceof Function?g.value.class(g.value):g.value.class),Y=s.computed(()=>g.value.style instanceof Function?g.value.style(g.value):g.value.style),W=s.computed(()=>{const k=g.value.type||"default",I=R==null?void 0:R[`edge-${k}`];if(I)return I;let C=g.value.template??u.value[k];if(typeof C=="string"&&A){const H=Object.keys(A.appContext.components);H&&H.includes(k)&&(C=s.resolveComponent(k,!1))}return C&&typeof C!="string"?C:(a.error(new me(pe.EDGE_TYPE_MISSING,C)),!1)}),{handlePointerDown:q}=pa({nodeId:D,handleId:M,type:_,isValidConnection:h,edgeUpdaterType:_,onEdgeUpdate:B,onEdgeUpdateEnd:O});return()=>{const k=f(g.value.source),I=f(g.value.target),C="pathOptions"in g.value?g.value.pathOptions:{};if(!k&&!I)return a.error(new me(pe.EDGE_SOURCE_TARGET_MISSING,g.value.id,g.value.source,g.value.target)),null;if(!k)return a.error(new me(pe.EDGE_SOURCE_MISSING,g.value.id,g.value.source)),null;if(!I)return a.error(new me(pe.EDGE_TARGET_MISSING,g.value.id,g.value.target)),null;if(!g.value||g.value.hidden||k.hidden||I.hidden)return null;let H;r.value===De.Strict?H=k.handleBounds.source:H=[...k.handleBounds.source||[],...k.handleBounds.target||[]];const te=cr(H,g.value.sourceHandle);let J;r.value===De.Strict?J=I.handleBounds.target:J=[...I.handleBounds.target||[],...I.handleBounds.source||[]];const Q=cr(J,g.value.targetHandle),ae=(te==null?void 0:te.position)||U.Bottom,le=(Q==null?void 0:Q.position)||U.Top,{x:ue,y:de}=tt(k,te,ae),{x:ke,y:nt}=tt(I,Q,le);return g.value.sourceX=ue,g.value.sourceY=de,g.value.targetX=ke,g.value.targetY=nt,s.h("g",{ref:F,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${W.value===!1?"default":g.value.type||"default"}`,l.value,G.value,{updating:x.value,selected:g.value.selected,animated:g.value.animated,inactive:!N.value&&!y.value.edgeClick.hasListeners()}],onClick:L,onContextmenu:X,onDblclick:ee,onMouseenter:Z,onMousemove:se,onMouseleave:re,onKeyDown:P.value?S:void 0,tabIndex:P.value?0:void 0,"aria-label":g.value.ariaLabel===null?void 0:g.value.ariaLabel||`Edge from ${g.value.source} to ${g.value.target}`,"aria-describedby":P.value?`${Zi}-${t}`:void 0,role:P.value?"button":"img"},[T.value?null:s.h(W.value===!1?u.value.default:W.value,{id:e.id,sourceNode:k,targetNode:I,source:g.value.source,target:g.value.target,type:g.value.type,updatable:z.value,selected:g.value.selected,animated:g.value.animated,label:g.value.label,labelStyle:g.value.labelStyle,labelShowBg:g.value.labelShowBg,labelBgStyle:g.value.labelBgStyle,labelBgPadding:g.value.labelBgPadding,labelBgBorderRadius:g.value.labelBgBorderRadius,data:g.value.data,events:{...g.value.events,...$},style:Y.value,markerStart:`url('#${mt(g.value.markerStart,t)}')`,markerEnd:`url('#${mt(g.value.markerEnd,t)}')`,sourcePosition:ae,targetPosition:le,sourceX:ue,sourceY:de,targetX:ke,targetY:nt,sourceHandleId:g.value.sourceHandle,targetHandleId:g.value.targetHandle,interactionWidth:g.value.interactionWidth,...C}),[z.value==="source"||z.value===!0?[s.h("g",{onMousedown:ne,onMouseenter:K,onMouseout:ie},s.h(Er,{position:ae,centerX:ue,centerY:de,radius:o.value,type:"source","data-type":"source"}))]:null,z.value==="target"||z.value===!0?[s.h("g",{onMousedown:oe,onMouseenter:K,onMouseout:ie},s.h(Er,{position:le,centerX:ke,centerY:nt,radius:o.value,type:"target","data-type":"target"}))]:null]])};function K(){x.value=!0}function ie(){x.value=!1}function B(k,I){b.update({event:k,edge:g.value,connection:I})}function O(k){b.updateEnd({event:k,edge:g.value}),T.value=!1}function V(k,I){k.button===0&&(T.value=!0,D.value=I?g.value.target:g.value.source,M.value=(I?g.value.targetHandle:g.value.sourceHandle)??null,_.value=I?"target":"source",b.updateStart({event:k,edge:g.value}),q(k))}function L(k){var I;const C={event:k,edge:g.value};N.value&&(i.value=!1,g.value.selected&&p.value?(d([g.value]),(I=F.value)==null||I.blur()):n([g.value])),b.click(C)}function X(k){b.contextMenu({event:k,edge:g.value})}function ee(k){b.doubleClick({event:k,edge:g.value})}function Z(k){b.mouseEnter({event:k,edge:g.value})}function se(k){b.mouseMove({event:k,edge:g.value})}function re(k){b.mouseLeave({event:k,edge:g.value})}function ne(k){V(k,!0)}function oe(k){V(k,!1)}function S(k){var I;!w.value&&Ki.includes(k.key)&&N.value&&(k.key==="Escape"?((I=F.value)==null||I.blur(),d([c(e.id)])):n([c(e.id)]))}}}),pf=hf,gf=s.defineComponent({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:r,connectionEndHandle:o,connectionPosition:a,connectionLineType:i,connectionLineStyle:l,connectionLineOptions:u,connectionStatus:d,viewport:c,findNode:f}=ce(),h=(e=s.inject(Kt))==null?void 0:e["connection-line"],p=s.computed(()=>{var y;return f((y=r.value)==null?void 0:y.nodeId)}),w=s.computed(()=>{var y;return f((y=o.value)==null?void 0:y.nodeId)??null}),v=s.computed(()=>({x:(a.value.x-c.value.x)/c.value.zoom,y:(a.value.y-c.value.y)/c.value.zoom})),m=s.computed(()=>u.value.markerStart?`url(#${mt(u.value.markerStart,t)})`:""),E=s.computed(()=>u.value.markerEnd?`url(#${mt(u.value.markerEnd,t)})`:"");return()=>{var y,g,b;if(!p.value||!r.value)return null;const $=r.value.id,R=r.value.type,A=p.value.handleBounds;let x=(A==null?void 0:A[R])??[];if(n.value===De.Loose){const Y=(A==null?void 0:A[R==="source"?"target":"source"])??[];x=[...x,...Y]}if(!x)return null;const T=($?x.find(Y=>Y.id===$):x[0])??null,D=(T==null?void 0:T.position)??U.Top,{x:M,y:_}=tt(p.value,T,D);let F=null;w.value&&(n.value===De.Strict?F=((y=w.value.handleBounds[R==="source"?"target":"source"])==null?void 0:y.find(Y=>{var W;return Y.id===((W=o.value)==null?void 0:W.id)}))||null:F=((g=[...w.value.handleBounds.source??[],...w.value.handleBounds.target??[]])==null?void 0:g.find(Y=>{var W;return Y.id===((W=o.value)==null?void 0:W.id)}))||null);const N=((b=o.value)==null?void 0:b.position)??(D?bo[D]:null);if(!D||!N)return null;const z=i.value??u.value.type??Fe.Bezier;let P="";const G={sourceX:M,sourceY:_,sourcePosition:D,targetX:v.value.x,targetY:v.value.y,targetPosition:N};return z===Fe.Bezier?[P]=_a(G):z===Fe.Step?[P]=xo({...G,borderRadius:0}):z===Fe.SmoothStep?[P]=xo(G):z===Fe.SimpleBezier?[P]=ba(G):P=`M${M},${_} ${v.value.x},${v.value.y}`,s.h("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},s.h("g",{class:"vue-flow__connection"},h?s.h(h,{sourceX:M,sourceY:_,sourcePosition:D,targetX:v.value.x,targetY:v.value.y,targetPosition:N,sourceNode:p.value,sourceHandle:T,targetNode:w.value,targetHandle:F,markerEnd:E.value,markerStart:m.value,connectionStatus:d.value}):s.h("path",{d:P,class:[u.value.class,d,"vue-flow__connection-path"],style:{...l.value,...u.value.style},"marker-end":E.value,"marker-start":m.value})))}}}),mf=gf,vf=["id","markerWidth","markerHeight","markerUnits","orient"],yf={name:"MarkerType",compatConfig:{MODE:3}},wf=s.defineComponent({...yf,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(s.openBlock(),s.createElementBlock("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===s.unref(At).ArrowClosed?(s.openBlock(),s.createElementBlock("polyline",{key:0,style:s.normalizeStyle({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):s.createCommentVNode("",!0),t.type===s.unref(At).Arrow?(s.openBlock(),s.createElementBlock("polyline",{key:1,style:s.normalizeStyle({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):s.createCommentVNode("",!0)],8,vf))}}),_f={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},bf={name:"MarkerDefinitions",compatConfig:{MODE:3}},Ef=s.defineComponent({...bf,setup(e){const{id:t,edges:n,connectionLineOptions:r,defaultMarkerColor:o}=ce(),a=s.computed(()=>{const i=new Set,l=[],u=d=>{if(d){const c=mt(d,t);i.has(c)||(typeof d=="object"?l.push({...d,id:c,color:d.color||o.value}):l.push({id:c,color:o.value,type:d}),i.add(c))}};for(const d of[r.value.markerEnd,r.value.markerStart])u(d);for(const d of n.value)for(const c of[d.markerStart,d.markerEnd])u(c);return l.sort((d,c)=>d.id.localeCompare(c.id))});return(i,l)=>(s.openBlock(),s.createElementBlock("svg",_f,[s.createElementVNode("defs",null,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(a.value,u=>(s.openBlock(),s.createBlock(wf,{id:u.id,key:u.id,type:u.type,color:u.color,width:u.width,height:u.height,markerUnits:u.markerUnits,"stroke-width":u.strokeWidth,orient:u.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),xf={name:"Edges",compatConfig:{MODE:3}},Nf=s.defineComponent({...xf,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:r}=ce();return(o,a)=>(s.openBlock(),s.createElementBlock(s.Fragment,null,[s.createVNode(Ef),(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(s.unref(n),i=>(s.openBlock(),s.createElementBlock("svg",{key:i.id,class:"vue-flow__edges vue-flow__container",style:s.normalizeStyle({zIndex:s.unref(Hc)(i,s.unref(t),s.unref(r))})},[s.createVNode(s.unref(pf),{id:i.id},null,8,["id"])],4))),128)),s.createVNode(s.unref(mf))],64))}}),kf=s.defineComponent({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:r,nodesSelectionActive:o,multiSelectionActive:a,emits:i,removeSelectedNodes:l,addSelectedNodes:u,updateNodeDimensions:d,onUpdateNodeInternals:c,getNodeTypes:f,nodeExtent:h,elevateNodesOnSelect:p,disableKeyboardA11y:w,ariaLiveMessage:v,snapToGrid:m,snapGrid:E,nodeDragThreshold:y,nodesDraggable:g,elementsSelectable:b,nodesConnectable:$,nodesFocusable:R,hooks:A}=ce(),x=s.ref(null);s.provide(fa,x),s.provide(da,e.id);const T=s.inject(Kt),D=s.getCurrentInstance(),M=ma(),{node:_,parentNode:F}=ga(e.id),{emit:N,on:z}=ld(_,i),P=s.toRef(()=>typeof _.draggable>"u"?g.value:_.draggable),G=s.toRef(()=>typeof _.selectable>"u"?b.value:_.selectable),Y=s.toRef(()=>typeof _.connectable>"u"?$.value:_.connectable),W=s.toRef(()=>typeof _.focusable>"u"?R.value:_.focusable),q=s.toRef(()=>G.value||P.value||A.value.nodeClick.hasListeners()||A.value.nodeDoubleClick.hasListeners()||A.value.nodeMouseEnter.hasListeners()||A.value.nodeMouseMove.hasListeners()||A.value.nodeMouseLeave.hasListeners()),K=s.toRef(()=>!!_.dimensions.width&&!!_.dimensions.height),ie=s.computed(()=>{const I=_.type||"default",C=T==null?void 0:T[`node-${I}`];if(C)return C;let H=_.template||f.value[I];if(typeof H=="string"&&D){const te=Object.keys(D.appContext.components);te&&te.includes(I)&&(H=s.resolveComponent(I,!1))}return H&&typeof H!="string"?H:(i.error(new me(pe.NODE_TYPE_MISSING,H)),!1)}),B=ha({id:e.id,el:x,disabled:()=>!P.value,selectable:G,dragHandle:()=>_.dragHandle,onStart(I){N.dragStart(I)},onDrag(I){N.drag(I)},onStop(I){N.dragStop(I)},onClick(I){S(I)}}),O=s.computed(()=>_.class instanceof Function?_.class(_):_.class),V=s.computed(()=>{const I=(_.style instanceof Function?_.style(_):_.style)||{},C=_.width instanceof Function?_.width(_):_.width,H=_.height instanceof Function?_.height(_):_.height;return!I.width&&C&&(I.width=typeof C=="string"?C:`${C}px`),!I.height&&H&&(I.height=typeof H=="string"?H:`${H}px`),I}),L=s.toRef(()=>Number(_.zIndex??V.value.zIndex??0));return c(I=>{(I.includes(e.id)||!I.length)&&ee()}),s.onMounted(()=>{s.watch(()=>_.hidden,(I=!1,C,H)=>{!I&&x.value&&(e.resizeObserver.observe(x.value),H(()=>{x.value&&e.resizeObserver.unobserve(x.value)}))},{immediate:!0,flush:"post"})}),s.watch([()=>_.type,()=>_.sourcePosition,()=>_.targetPosition],()=>{s.nextTick(()=>{d([{id:e.id,nodeElement:x.value,forceUpdate:!0}])})}),s.watch([()=>_.position.x,()=>_.position.y,()=>{var I;return(I=F.value)==null?void 0:I.computedPosition.x},()=>{var I;return(I=F.value)==null?void 0:I.computedPosition.y},()=>{var I;return(I=F.value)==null?void 0:I.computedPosition.z},L,()=>_.selected,()=>_.dimensions.height,()=>_.dimensions.width,()=>{var I;return(I=F.value)==null?void 0:I.dimensions.height},()=>{var I;return(I=F.value)==null?void 0:I.dimensions.width}],([I,C,H,te,J,Q])=>{const ae={x:I,y:C,z:Q+(p.value&&_.selected?1e3:0)};typeof H<"u"&&typeof te<"u"?_.computedPosition=Pc({x:H,y:te,z:J},ae):_.computedPosition=ae},{flush:"post",immediate:!0}),s.watch([()=>_.extent,h],([I,C],[H,te])=>{(I!==H||C!==te)&&X()}),_.extent==="parent"||typeof _.extent=="object"&&"range"in _.extent&&_.extent.range==="parent"?uo(()=>K).toBe(!0).then(X):X(),()=>_.hidden?null:s.h("div",{ref:x,"data-id":_.id,class:["vue-flow__node",`vue-flow__node-${ie.value===!1?"default":_.type||"default"}`,{[n.value]:P.value,dragging:B==null?void 0:B.value,draggable:P.value,selected:_.selected,selectable:G.value,parent:_.isParent},O.value],style:{visibility:K.value?"visible":"hidden",zIndex:_.computedPosition.z??L.value,transform:`translate(${_.computedPosition.x}px,${_.computedPosition.y}px)`,pointerEvents:q.value?"all":"none",...V.value},tabIndex:W.value?0:void 0,role:W.value?"button":void 0,"aria-describedby":w.value?void 0:`${ji}-${t}`,"aria-label":_.ariaLabel,onMouseenter:Z,onMousemove:se,onMouseleave:re,onContextmenu:ne,onClick:S,onDblclick:oe,onKeydown:k},[s.h(ie.value===!1?f.value.default:ie.value,{id:_.id,type:_.type,data:_.data,events:{..._.events,...z},selected:_.selected,resizing:_.resizing,dragging:B.value,connectable:Y.value,position:_.computedPosition,dimensions:_.dimensions,isValidTargetPos:_.isValidTargetPos,isValidSourcePos:_.isValidSourcePos,parent:_.parentNode,parentNodeId:_.parentNode,zIndex:_.computedPosition.z??L.value,targetPosition:_.targetPosition,sourcePosition:_.sourcePosition,label:_.label,dragHandle:_.dragHandle,onUpdateNodeInternals:ee})]);function X(){const I=_.computedPosition,{computedPosition:C,position:H}=Oo(_,m.value?jt(I,E.value):I,i.error,h.value,F.value);(_.computedPosition.x!==C.x||_.computedPosition.y!==C.y)&&(_.computedPosition={..._.computedPosition,...C}),(_.position.x!==H.x||_.position.y!==H.y)&&(_.position=H)}function ee(){x.value&&d([{id:e.id,nodeElement:x.value,forceUpdate:!0}])}function Z(I){B!=null&&B.value||N.mouseEnter({event:I,node:_})}function se(I){B!=null&&B.value||N.mouseMove({event:I,node:_})}function re(I){B!=null&&B.value||N.mouseLeave({event:I,node:_})}function ne(I){return N.contextMenu({event:I,node:_})}function oe(I){return N.doubleClick({event:I,node:_})}function S(I){G.value&&(!r.value||!P.value||y.value>0)&&Eo(_,a.value,u,l,o,!1,x.value),N.click({event:I,node:_})}function k(I){if(!(wo(I)||w.value))if(Ki.includes(I.key)&&G.value){const C=I.key==="Escape";Eo(_,a.value,u,l,o,C,x.value)}else P.value&&_.selected&&Ke[I.key]&&(I.preventDefault(),v.value=`Moved selected node ${I.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~_.position.x}, y: ${~~_.position.y}`,M({x:Ke[I.key].x,y:Ke[I.key].y},I.shiftKey))}}}),Sf=kf;function Cf(e={includeHiddenNodes:!1}){const{nodes:t}=ce();return s.computed(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&((n==null?void 0:n.handleBounds)===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const If={class:"vue-flow__nodes vue-flow__container"},Mf={name:"Nodes",compatConfig:{MODE:3}},Tf=s.defineComponent({...Mf,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:r}=ce(),o=Cf(),a=s.ref();return s.watch(o,i=>{i&&s.nextTick(()=>{r.nodesInitialized(t.value)})},{immediate:!0}),s.onMounted(()=>{a.value=new ResizeObserver(i=>{const l=i.map(u=>({id:u.target.getAttribute("data-id"),nodeElement:u.target,forceUpdate:!0}));s.nextTick(()=>n(l))})}),s.onBeforeUnmount(()=>{var i;return(i=a.value)==null?void 0:i.disconnect()}),(i,l)=>(s.openBlock(),s.createElementBlock("div",If,[a.value?(s.openBlock(!0),s.createElementBlock(s.Fragment,{key:0},s.renderList(s.unref(t),(u,d,c,f)=>{const h=[u.id];if(f&&f.key===u.id&&s.isMemoSame(f,h))return f;const p=(s.openBlock(),s.createBlock(s.unref(Sf),{id:u.id,key:u.id,"resize-observer":a.value},null,8,["id","resize-observer"]));return p.memo=h,p},l,0),128)):s.createCommentVNode("",!0)]))}});function Of(){const{emits:e}=ce();s.onMounted(()=>{if(ca()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new me(pe.MISSING_STYLES))}})}const $f=s.createElementVNode("div",{class:"vue-flow__edge-labels"},null,-1),Df={name:"VueFlow",compatConfig:{MODE:3}},Bf=s.defineComponent({...Df,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const r=e,o=s.useSlots(),a=nn(r,"modelValue",n),i=nn(r,"nodes",n),l=nn(r,"edges",n),u=ce(r),d=dd({modelValue:a,nodes:i,edges:l},r,u);return hd(n,u.hooks),cf(),Of(),s.provide(Kt,o),s.onUnmounted(()=>{d()}),t(u),(c,f)=>(s.openBlock(),s.createElementBlock("div",{ref:s.unref(u).vueFlowRef,class:"vue-flow"},[s.createVNode(of,null,{default:s.withCtx(()=>[s.createVNode(Nf),$f,s.createVNode(Tf),s.renderSlot(c.$slots,"zoom-pane")]),_:3}),s.renderSlot(c.$slots,"default"),s.createVNode(uf)],512))}}),Vf={name:"Panel",compatConfig:{MODE:3}},xa=s.defineComponent({...Vf,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=ce(),r=s.computed(()=>`${t.position}`.split("-"));return(o,a)=>(s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["vue-flow__panel",r.value]),style:s.normalizeStyle({pointerEvents:s.unref(n)?"none":"all"})},[s.renderSlot(o.$slots,"default")],6))}}),Pf={name:"ControlButton",compatConfig:{MODE:3}},Rf=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n},Af={class:"vue-flow__controls-button"};function zf(e,t,n,r,o,a){return s.openBlock(),s.createElementBlock("button",Af,[s.renderSlot(e.$slots,"default")])}const Ct=Rf(Pf,[["render",zf]]),Lf={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},Ff=s.createElementVNode("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),Hf=[Ff];function Gf(e,t){return s.openBlock(),s.createElementBlock("svg",Lf,Hf)}const Yf={render:Gf},qf={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Wf=s.createElementVNode("path",{d:"M0 0h32v4.2H0z"},null,-1),Xf=[Wf];function Uf(e,t){return s.openBlock(),s.createElementBlock("svg",qf,Xf)}const jf={render:Uf},Zf={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Kf=s.createElementVNode("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),Jf=[Kf];function Qf(e,t){return s.openBlock(),s.createElementBlock("svg",Zf,Jf)}const eh={render:Qf},th={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},nh=s.createElementVNode("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),oh=[nh];function rh(e,t){return s.openBlock(),s.createElementBlock("svg",th,oh)}const ih={render:rh},ah={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},sh=s.createElementVNode("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),lh=[sh];function uh(e,t){return s.openBlock(),s.createElementBlock("svg",ah,lh)}const ch={render:uh},dh={name:"Controls",compatConfig:{MODE:3}},fh=s.defineComponent({...dh,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>Ui.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:r,elementsSelectable:o,setInteractive:a,zoomIn:i,zoomOut:l,fitView:u,viewport:d,minZoom:c,maxZoom:f}=ce(),h=s.toRef(()=>n.value||r.value||o.value),p=s.toRef(()=>d.value.zoom<=c.value),w=s.toRef(()=>d.value.zoom>=f.value);function v(){i(),t("zoomIn")}function m(){l(),t("zoomOut")}function E(){u(e.fitViewParams),t("fitView")}function y(){a(!h.value),t("interactionChange",!h.value)}return(g,b)=>(s.openBlock(),s.createBlock(s.unref(xa),{class:"vue-flow__controls",position:g.position},{default:s.withCtx(()=>[s.renderSlot(g.$slots,"top"),g.showZoom?(s.openBlock(),s.createElementBlock(s.Fragment,{key:0},[s.renderSlot(g.$slots,"control-zoom-in",{},()=>[s.createVNode(Ct,{class:"vue-flow__controls-zoomin",disabled:w.value,onClick:v},{default:s.withCtx(()=>[s.renderSlot(g.$slots,"icon-zoom-in",{},()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(s.unref(Yf))))])]),_:3},8,["disabled"])]),s.renderSlot(g.$slots,"control-zoom-out",{},()=>[s.createVNode(Ct,{class:"vue-flow__controls-zoomout",disabled:p.value,onClick:m},{default:s.withCtx(()=>[s.renderSlot(g.$slots,"icon-zoom-out",{},()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(s.unref(jf))))])]),_:3},8,["disabled"])])],64)):s.createCommentVNode("",!0),g.showFitView?s.renderSlot(g.$slots,"control-fit-view",{key:1},()=>[s.createVNode(Ct,{class:"vue-flow__controls-fitview",onClick:E},{default:s.withCtx(()=>[s.renderSlot(g.$slots,"icon-fit-view",{},()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(s.unref(eh))))])]),_:3})]):s.createCommentVNode("",!0),g.showInteractive?s.renderSlot(g.$slots,"control-interactive",{key:2},()=>[g.showInteractive?(s.openBlock(),s.createBlock(Ct,{key:0,class:"vue-flow__controls-interactive",onClick:y},{default:s.withCtx(()=>[h.value?s.renderSlot(g.$slots,"icon-unlock",{key:0},()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(s.unref(ch))))]):s.createCommentVNode("",!0),h.value?s.createCommentVNode("",!0):s.renderSlot(g.$slots,"icon-lock",{key:1},()=>[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(s.unref(ih))))])]),_:3})):s.createCommentVNode("",!0)]):s.createCommentVNode("",!0),s.renderSlot(g.$slots,"default")]),_:3},8,["position"]))}}),hh={class:"default-node"},ph={class:"node-content"},gh=s.defineComponent({__name:"DefaultNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e;return(n,r)=>{var o;return s.openBlock(),s.createElementBlock("div",hh,[s.createElementVNode("div",ph,s.toDisplayString(((o=t.data)==null?void 0:o.label)||"默认节点"),1),s.createVNode(s.unref(ve),{type:"source",position:s.unref(U).Right,"node-id":t.id},null,8,["position","node-id"])])}}}),Be=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n},mh=Be(gh,[["__scopeId","data-v-30bf47fc"]]),vh={class:"text-node"},yh={class:"node-content"},wh={class:"node-title"},_h={key:0,class:"text-editor"},bh=s.defineComponent({__name:"TextNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){var i;const t=e,n=s.ref(((i=t.data)==null?void 0:i.text)||"编辑文本..."),r=s.ref(!1);function o(){r.value=!0}function a(){r.value=!1,t.data&&(t.data.text=n.value)}return(l,u)=>{var d;return s.openBlock(),s.createElementBlock("div",vh,[s.createVNode(s.unref(ve),{type:"target",position:s.unref(U).Left,"node-id":t.id},null,8,["position","node-id"]),s.createElementVNode("div",yh,[s.createElementVNode("div",wh,s.toDisplayString(((d=t.data)==null?void 0:d.label)||"文本节点"),1),r.value?(s.openBlock(),s.createElementBlock("div",_h,[s.withDirectives(s.createElementVNode("textarea",{"onUpdate:modelValue":u[0]||(u[0]=c=>n.value=c),onBlur:a,onKeydown:s.withKeys(a,["enter"]),ref:"textareaRef",rows:"3"},null,544),[[s.vModelText,n.value]])])):(s.openBlock(),s.createElementBlock("div",{key:1,class:"text-display",onClick:o},s.toDisplayString(n.value),1))]),s.createVNode(s.unref(ve),{type:"source",position:s.unref(U).Right,"node-id":t.id},null,8,["position","node-id"])])}}}),Eh=Be(bh,[["__scopeId","data-v-5c9ccfd6"]]),xh={class:"image-node"},Nh={class:"node-content"},kh={class:"node-title"},Sh={key:0,class:"settings-panel"},Ch={class:"image-container"},Ih={key:0,class:"svg-container"},Mh=["src"],xr="/src/plugins/vue-flow/assets/tiddlywiki-icon.svg",Th=s.defineComponent({__name:"ImageNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){var u;const t=e,n=s.ref(((u=t.data)==null?void 0:u.imageUrl)||xr),r=s.ref(!1),o=s.ref(n.value),a=s.computed(()=>n.value===xr||n.value.endsWith(".svg"));function i(){r.value=!r.value,r.value&&(o.value=n.value)}function l(){n.value=o.value,t.data&&(t.data.imageUrl=n.value),r.value=!1}return(d,c)=>{var f;return s.openBlock(),s.createElementBlock("div",xh,[s.createVNode(s.unref(ve),{type:"target",position:s.unref(U).Left,"node-id":t.id},null,8,["position","node-id"]),s.createElementVNode("div",Nh,[s.createElementVNode("div",kh,[s.createTextVNode(s.toDisplayString(((f=t.data)==null?void 0:f.label)||"图片节点")+" ",1),s.createElementVNode("button",{class:"settings-button",onClick:i}," ⚙️ ")]),r.value?(s.openBlock(),s.createElementBlock("div",Sh,[s.withDirectives(s.createElementVNode("input",{"onUpdate:modelValue":c[0]||(c[0]=h=>o.value=h),placeholder:"输入图片URL",class:"url-input"},null,512),[[s.vModelText,o.value]]),s.createElementVNode("button",{onClick:l,class:"apply-button"}," 应用 ")])):s.createCommentVNode("",!0),s.createElementVNode("div",Ch,[a.value?(s.openBlock(),s.createElementBlock("div",Ih,c[1]||(c[1]=[s.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"80",height:"80",viewBox:"0 0 24 24",class:"tiddlywiki-icon"},[s.createElementVNode("path",{fill:"#9c27b0",d:"m12 0l10.23 6v12L12 24L1.77 18V6zm3.961 17.889l.154-.02c.113-.043.22-.081.288-.19c.227-.329-.357-.462-.566-.827s-1.071-2.364-.418-2.924s1.359-.79 1.629-1.315c.117-.236.238-.475.269-.742c.159.132.283.255.497.262c.567.036 1.054-.658 1.307-1.315c.135-.404.244-.832.218-1.226c-.069-.76.013-1.582.62-2.087c-.599.302-1.167.69-1.845.789c-.374-.114-.75-.216-1.147-.2c-.194-.253-.456-.727-.797-.782c-.58.208-.597 1.105-.842 2.321a5.4 5.4 0 0 0-1.154-.193c-.54-.035-1.42.134-2.038.116c-.619-.018-1.836-.562-2.849-.445c-.407.05-.817.12-1.195.291c-.231.105-.565.421-.733.468c-1.69.473-4.442.453-3.879-2.102c.044-.196.056-.373-.03-.417c-.11-.055-.17.06-.234.187c-.985 2.138.764 3.514 2.752 3.52c.625-.048.324-.007.904-.118l-.015.082a1.87 1.87 0 0 0 .865 1.718c-.27.771-.805 1.389-1.173 2.097c.138.881 1.031 2.057 1.4 2.225c.326.147 1.036.149 1.2-.089c.059-.111.02-.351-.044-.474c.277.308.651.736 1.013.942c.217.104.434.17.677.18l.31-.016c.154-.033.336-.058.44-.195c.116-.2.007-.756-.476-.796s-.795-.222-1.24-.882c-.365-.638.077-1.517.226-2.145c.765.123 1.535.22 2.31.222c.336-.017.67-.03 1.001-.093c.106.27.402 1.025.404 1.239c.007.601-.219 1.205-.121 1.807c.06.177.005.512.35.526l.388.018l.267-.008c.341.573.637.572 1.307.591m-7.518-1.66l-.063-.056c-.184-.198-.66-.544-.572-.865c.075-.238.213-.457.323-.683l-.004.023c-.02.282-.059.56.032.837c.278.228.663.59.918.837c-.138-.038-.4-.117-.53-.066l-.104-.026z"})],-1)]))):(s.openBlock(),s.createElementBlock("img",{key:1,src:n.value,alt:"节点图片"},null,8,Mh))])]),s.createVNode(s.unref(ve),{type:"source",position:s.unref(U).Right,"node-id":t.id},null,8,["position","node-id"])])}}}),Oh=Be(Th,[["__scopeId","data-v-960dc2e3"]]),$h={class:"card-node"},Dh={class:"card-header"},Bh={class:"card-title"},Vh={key:0,class:"card-body"},Ph={class:"card-subtitle"},Rh={class:"card-content"},Ah={key:0,class:"card-tags"},zh=s.defineComponent({__name:"CardNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e,n=s.ref(!0);function r(){n.value=!n.value}return(o,a)=>{var i,l,u,d;return s.openBlock(),s.createElementBlock("div",$h,[s.createVNode(s.unref(ve),{type:"target",position:s.unref(U).Left,"node-id":t.id},null,8,["position","node-id"]),s.createElementVNode("div",Dh,[s.createElementVNode("div",Bh,s.toDisplayString(((i=t.data)==null?void 0:i.title)||"卡片标题"),1),s.createElementVNode("button",{class:"toggle-button",onClick:r},s.toDisplayString(n.value?"▼":"►"),1)]),n.value?(s.openBlock(),s.createElementBlock("div",Vh,[s.createElementVNode("div",Ph,s.toDisplayString(((l=t.data)==null?void 0:l.subtitle)||"副标题"),1),s.createElementVNode("div",Rh,s.toDisplayString(((u=t.data)==null?void 0:u.content)||"这是卡片内容，可以包含详细信息。"),1),(d=t.data)!=null&&d.tags&&t.data.tags.length>0?(s.openBlock(),s.createElementBlock("div",Ah,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(t.data.tags,(c,f)=>(s.openBlock(),s.createElementBlock("span",{key:f,class:"tag"},s.toDisplayString(c),1))),128))])):s.createCommentVNode("",!0)])):s.createCommentVNode("",!0),s.createVNode(s.unref(ve),{type:"source",position:s.unref(U).Right,"node-id":t.id},null,8,["position","node-id"])])}}}),Lh=Be(zh,[["__scopeId","data-v-a31f4371"]]),Fh={class:"process-icon"},Hh={key:0,class:"icon pending"},Gh={key:1,class:"icon processing"},Yh={key:2,class:"icon completed"},qh={key:3,class:"icon error"},Wh={key:4,class:"icon"},Xh={class:"process-content"},Uh={class:"process-title"},jh={class:"process-description"},Zh={class:"process-status"},Kh={class:"status-text"},Jh=s.defineComponent({__name:"ProcessNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){var r;const t=e,n=((r=t.data)==null?void 0:r.status)||"pending";return(o,a)=>{var i,l;return s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["process-node",`status-${s.unref(n)}`])},[s.createVNode(s.unref(ve),{type:"target",position:s.unref(U).Left,"node-id":t.id},null,8,["position","node-id"]),s.createElementVNode("div",Fh,[s.unref(n)==="pending"?(s.openBlock(),s.createElementBlock("div",Hh,"⏳")):s.unref(n)==="processing"?(s.openBlock(),s.createElementBlock("div",Gh,"⚙️")):s.unref(n)==="completed"?(s.openBlock(),s.createElementBlock("div",Yh,"✅")):s.unref(n)==="error"?(s.openBlock(),s.createElementBlock("div",qh,"❌")):(s.openBlock(),s.createElementBlock("div",Wh,"⚪"))]),s.createElementVNode("div",Xh,[s.createElementVNode("div",Uh,s.toDisplayString(((i=t.data)==null?void 0:i.label)||"流程节点"),1),s.createElementVNode("div",jh,s.toDisplayString(((l=t.data)==null?void 0:l.description)||"流程描述"),1),s.createElementVNode("div",Zh,[a[0]||(a[0]=s.createTextVNode(" 状态: ")),s.createElementVNode("span",Kh,s.toDisplayString(s.unref(n)==="pending"?"等待中":s.unref(n)==="processing"?"处理中":s.unref(n)==="completed"?"已完成":s.unref(n)==="error"?"错误":"未知"),1)])]),s.createVNode(s.unref(ve),{type:"source",position:s.unref(U).Right,"node-id":t.id},null,8,["position","node-id"])],2)}}}),Qh=Be(Jh,[["__scopeId","data-v-37558b1c"]]),ep={class:"data-header"},tp={class:"data-name"},np={class:"data-fields"},op={class:"field-key"},rp={class:"field-value"},ip={key:0,class:"card-tags"},ap=s.defineComponent({__name:"DataNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){var u;const t=["title","creator","description","url"],n=e,o=(d=>Object.keys(d).filter(c=>t.includes(c)).map(c=>({key:c,value:d[c]})))(n.data.fields),a=((u=n.data.fields)==null?void 0:u.tags)||[],i=n.data.fields.title,l=()=>new $tw.Story().navigateTiddler(i);return(d,c)=>{var f;return s.openBlock(),s.createElementBlock("div",{class:"data-node",onClick:l},[s.createVNode(s.unref(ve),{type:"target",position:s.unref(U).Left,"node-id":n.id},null,8,["position","node-id"]),s.createElementVNode("div",ep,[s.createElementVNode("div",tp,s.toDisplayString(((f=n.data)==null?void 0:f.fields.title)||"Tiddler title"),1)]),s.createElementVNode("div",np,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(s.unref(o),(h,p)=>(s.openBlock(),s.createElementBlock("div",{key:p,class:"field-row"},[s.createElementVNode("div",op,s.toDisplayString(h.key)+":",1),s.createElementVNode("div",rp,s.toDisplayString(h.value),1)]))),128)),s.unref(a).length>0?(s.openBlock(),s.createElementBlock("div",ip,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(s.unref(a),(h,p)=>(s.openBlock(),s.createElementBlock("span",{key:p,class:"tag"},s.toDisplayString(h),1))),128))])):s.createCommentVNode("",!0)]),s.createVNode(s.unref(ve),{type:"source",position:s.unref(U).Right,"node-id":n.id},null,8,["position","node-id"])])}}}),sp=Be(ap,[["__scopeId","data-v-5b2941c9"]]),lp={class:"start-node"},up={class:"node-content"},cp={class:"node-label"},dp=s.defineComponent({__name:"StartNode",props:{id:{},type:{},selected:{type:Boolean},connectable:{type:[Boolean,Number,String,Function]},position:{},dimensions:{},label:{},isValidTargetPos:{type:Function},isValidSourcePos:{type:Function},parent:{},parentNodeId:{},dragging:{type:Boolean},resizing:{type:Boolean},zIndex:{},targetPosition:{},sourcePosition:{},dragHandle:{},data:{},events:{}},setup(e){const t=e;return(n,r)=>{var o;return s.openBlock(),s.createElementBlock("div",lp,[s.createVNode(s.unref(ve),{type:"source",position:s.unref(U).Right,"node-id":t.id},null,8,["position","node-id"]),s.createElementVNode("div",up,[r[0]||(r[0]=s.createElementVNode("div",{class:"start-icon"},"▶",-1)),s.createElementVNode("div",cp,s.toDisplayString(((o=t.data)==null?void 0:o.label)||"开始节点"),1)])])}}}),fp=Be(dp,[["__scopeId","data-v-4cf45c9f"]]);let hp=0;function pp(){return`dndnode_${hp++}`}const gp={draggedType:s.ref(null),isDragOver:s.ref(!1),isDragging:s.ref(!1)};function mp(){const{draggedType:e,isDragOver:t,isDragging:n}=gp,{addNodes:r,screenToFlowCoordinate:o,onNodesInitialized:a,updateNode:i,getNodes:l}=ce();s.watch(n,p=>{document.body.style.userSelect=p?"none":""});function u(p,w){if(p.dataTransfer&&(p.dataTransfer.setData("application/vueflow",w),p.dataTransfer.effectAllowed="move",p.target instanceof HTMLElement)){const v=p.target.cloneNode(!0);v.style.width=`${p.target.offsetWidth}px`,v.style.height=`${p.target.offsetHeight}px`,v.style.position="absolute",v.style.top="-1000px",document.body.appendChild(v);try{p.dataTransfer.setDragImage(v,p.target.offsetWidth/2,p.target.offsetHeight/2),setTimeout(()=>{document.body.removeChild(v)},0)}catch(m){console.error("Failed to set drag image:",m),document.body.contains(v)&&document.body.removeChild(v)}}e.value=w,n.value=!0,p.target instanceof HTMLElement&&(p.target.style.userSelect="none"),document.body.style.userSelect="none",document.addEventListener("dragend",f),document.addEventListener("drop",f)}function d(p){p.preventDefault(),e.value&&(t.value=!0,p.dataTransfer&&(p.dataTransfer.dropEffect="move"))}function c(p){p.preventDefault(),t.value=!1}function f(p){p&&p.preventDefault(),n.value=!1,t.value=!1,e.value=null,document.body.style.userSelect="",document.removeEventListener("dragend",f),document.removeEventListener("drop",f)}function h(p){if(p.preventDefault(),!e.value)return;const w=o({x:p.clientX,y:p.clientY}),v=pp(),m=e.value,E={id:v,type:m,position:w,data:{label:`${m} ${v.split("_")[1]}`,...m==="text"?{text:"双击编辑文本..."}:{},...m==="image"?{imageUrl:"/src/plugins/vue-flow/assets/tiddlywiki-icon.svg"}:{},...m==="card"?{title:`卡片 ${v.split("_")[1]}`,subtitle:"可折叠卡片",content:"这是卡片内容，可以包含详细信息。",tags:["标签1","标签2"]}:{},...m==="process"?{description:"处理流程步骤",status:"pending"}:{},...m==="data"?{dataType:"Tiddler",fields:[{key:"id",value:"001"},{key:"name",value:"示例数据"},{key:"type",value:"string"},{key:"required",value:"true"}]}:{}}};r(E);const{off:y}=a(()=>{l.value.filter($=>$.id===v)[0]&&i(v,$=>{var R,A;return{position:{x:$.position.x-(((R=$.dimensions)==null?void 0:R.width)||0)/2,y:$.position.y-(((A=$.dimensions)==null?void 0:A.height)||0)/2}}}),y()});f()}return{draggedType:e,isDragOver:t,isDragging:n,onDragStart:u,onDragLeave:c,onDragOver:d,onDrop:h}}var gn,Nr;function Bo(){if(Nr)return gn;Nr=1;var e="\0",t="\0",n="";class r{constructor(c){fe(this,"_isDirected",!0);fe(this,"_isMultigraph",!1);fe(this,"_isCompound",!1);fe(this,"_label");fe(this,"_defaultNodeLabelFn",()=>{});fe(this,"_defaultEdgeLabelFn",()=>{});fe(this,"_nodes",{});fe(this,"_in",{});fe(this,"_preds",{});fe(this,"_out",{});fe(this,"_sucs",{});fe(this,"_edgeObjs",{});fe(this,"_edgeLabels",{});fe(this,"_nodeCount",0);fe(this,"_edgeCount",0);fe(this,"_parent");fe(this,"_children");c&&(this._isDirected=Object.hasOwn(c,"directed")?c.directed:!0,this._isMultigraph=Object.hasOwn(c,"multigraph")?c.multigraph:!1,this._isCompound=Object.hasOwn(c,"compound")?c.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[t]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(c){return this._label=c,this}graph(){return this._label}setDefaultNodeLabel(c){return this._defaultNodeLabelFn=c,typeof c!="function"&&(this._defaultNodeLabelFn=()=>c),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var c=this;return this.nodes().filter(f=>Object.keys(c._in[f]).length===0)}sinks(){var c=this;return this.nodes().filter(f=>Object.keys(c._out[f]).length===0)}setNodes(c,f){var h=arguments,p=this;return c.forEach(function(w){h.length>1?p.setNode(w,f):p.setNode(w)}),this}setNode(c,f){return Object.hasOwn(this._nodes,c)?(arguments.length>1&&(this._nodes[c]=f),this):(this._nodes[c]=arguments.length>1?f:this._defaultNodeLabelFn(c),this._isCompound&&(this._parent[c]=t,this._children[c]={},this._children[t][c]=!0),this._in[c]={},this._preds[c]={},this._out[c]={},this._sucs[c]={},++this._nodeCount,this)}node(c){return this._nodes[c]}hasNode(c){return Object.hasOwn(this._nodes,c)}removeNode(c){var f=this;if(Object.hasOwn(this._nodes,c)){var h=p=>f.removeEdge(f._edgeObjs[p]);delete this._nodes[c],this._isCompound&&(this._removeFromParentsChildList(c),delete this._parent[c],this.children(c).forEach(function(p){f.setParent(p)}),delete this._children[c]),Object.keys(this._in[c]).forEach(h),delete this._in[c],delete this._preds[c],Object.keys(this._out[c]).forEach(h),delete this._out[c],delete this._sucs[c],--this._nodeCount}return this}setParent(c,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(f===void 0)f=t;else{f+="";for(var h=f;h!==void 0;h=this.parent(h))if(h===c)throw new Error("Setting "+f+" as parent of "+c+" would create a cycle");this.setNode(f)}return this.setNode(c),this._removeFromParentsChildList(c),this._parent[c]=f,this._children[f][c]=!0,this}_removeFromParentsChildList(c){delete this._children[this._parent[c]][c]}parent(c){if(this._isCompound){var f=this._parent[c];if(f!==t)return f}}children(c=t){if(this._isCompound){var f=this._children[c];if(f)return Object.keys(f)}else{if(c===t)return this.nodes();if(this.hasNode(c))return[]}}predecessors(c){var f=this._preds[c];if(f)return Object.keys(f)}successors(c){var f=this._sucs[c];if(f)return Object.keys(f)}neighbors(c){var f=this.predecessors(c);if(f){const p=new Set(f);for(var h of this.successors(c))p.add(h);return Array.from(p.values())}}isLeaf(c){var f;return this.isDirected()?f=this.successors(c):f=this.neighbors(c),f.length===0}filterNodes(c){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var h=this;Object.entries(this._nodes).forEach(function([v,m]){c(v)&&f.setNode(v,m)}),Object.values(this._edgeObjs).forEach(function(v){f.hasNode(v.v)&&f.hasNode(v.w)&&f.setEdge(v,h.edge(v))});var p={};function w(v){var m=h.parent(v);return m===void 0||f.hasNode(m)?(p[v]=m,m):m in p?p[m]:w(m)}return this._isCompound&&f.nodes().forEach(v=>f.setParent(v,w(v))),f}setDefaultEdgeLabel(c){return this._defaultEdgeLabelFn=c,typeof c!="function"&&(this._defaultEdgeLabelFn=()=>c),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(c,f){var h=this,p=arguments;return c.reduce(function(w,v){return p.length>1?h.setEdge(w,v,f):h.setEdge(w,v),v}),this}setEdge(){var c,f,h,p,w=!1,v=arguments[0];typeof v=="object"&&v!==null&&"v"in v?(c=v.v,f=v.w,h=v.name,arguments.length===2&&(p=arguments[1],w=!0)):(c=v,f=arguments[1],h=arguments[3],arguments.length>2&&(p=arguments[2],w=!0)),c=""+c,f=""+f,h!==void 0&&(h=""+h);var m=i(this._isDirected,c,f,h);if(Object.hasOwn(this._edgeLabels,m))return w&&(this._edgeLabels[m]=p),this;if(h!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(c),this.setNode(f),this._edgeLabels[m]=w?p:this._defaultEdgeLabelFn(c,f,h);var E=l(this._isDirected,c,f,h);return c=E.v,f=E.w,Object.freeze(E),this._edgeObjs[m]=E,o(this._preds[f],c),o(this._sucs[c],f),this._in[f][m]=E,this._out[c][m]=E,this._edgeCount++,this}edge(c,f,h){var p=arguments.length===1?u(this._isDirected,arguments[0]):i(this._isDirected,c,f,h);return this._edgeLabels[p]}edgeAsObj(){const c=this.edge(...arguments);return typeof c!="object"?{label:c}:c}hasEdge(c,f,h){var p=arguments.length===1?u(this._isDirected,arguments[0]):i(this._isDirected,c,f,h);return Object.hasOwn(this._edgeLabels,p)}removeEdge(c,f,h){var p=arguments.length===1?u(this._isDirected,arguments[0]):i(this._isDirected,c,f,h),w=this._edgeObjs[p];return w&&(c=w.v,f=w.w,delete this._edgeLabels[p],delete this._edgeObjs[p],a(this._preds[f],c),a(this._sucs[c],f),delete this._in[f][p],delete this._out[c][p],this._edgeCount--),this}inEdges(c,f){var h=this._in[c];if(h){var p=Object.values(h);return f?p.filter(w=>w.v===f):p}}outEdges(c,f){var h=this._out[c];if(h){var p=Object.values(h);return f?p.filter(w=>w.w===f):p}}nodeEdges(c,f){var h=this.inEdges(c,f);if(h)return h.concat(this.outEdges(c,f))}}function o(d,c){d[c]?d[c]++:d[c]=1}function a(d,c){--d[c]||delete d[c]}function i(d,c,f,h){var p=""+c,w=""+f;if(!d&&p>w){var v=p;p=w,w=v}return p+n+w+n+(h===void 0?e:h)}function l(d,c,f,h){var p=""+c,w=""+f;if(!d&&p>w){var v=p;p=w,w=v}var m={v:p,w};return h&&(m.name=h),m}function u(d,c){return i(d,c.v,c.w,c.name)}return gn=r,gn}var mn,kr;function vp(){return kr||(kr=1,mn="2.2.4"),mn}var vn,Sr;function yp(){return Sr||(Sr=1,vn={Graph:Bo(),version:vp()}),vn}var yn,Cr;function wp(){if(Cr)return yn;Cr=1;var e=Bo();yn={write:t,read:o};function t(a){var i={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:n(a),edges:r(a)};return a.graph()!==void 0&&(i.value=structuredClone(a.graph())),i}function n(a){return a.nodes().map(function(i){var l=a.node(i),u=a.parent(i),d={v:i};return l!==void 0&&(d.value=l),u!==void 0&&(d.parent=u),d})}function r(a){return a.edges().map(function(i){var l=a.edge(i),u={v:i.v,w:i.w};return i.name!==void 0&&(u.name=i.name),l!==void 0&&(u.value=l),u})}function o(a){var i=new e(a.options).setGraph(a.value);return a.nodes.forEach(function(l){i.setNode(l.v,l.value),l.parent&&i.setParent(l.v,l.parent)}),a.edges.forEach(function(l){i.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),i}return yn}var wn,Ir;function _p(){if(Ir)return wn;Ir=1,wn=e;function e(t){var n={},r=[],o;function a(i){Object.hasOwn(n,i)||(n[i]=!0,o.push(i),t.successors(i).forEach(a),t.predecessors(i).forEach(a))}return t.nodes().forEach(function(i){o=[],a(i),o.length&&r.push(o)}),r}return wn}var _n,Mr;function Na(){if(Mr)return _n;Mr=1;class e{constructor(){fe(this,"_arr",[]);fe(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(n){return n.key})}has(n){return Object.hasOwn(this._keyIndices,n)}priority(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(n,r){var o=this._keyIndices;if(n=String(n),!Object.hasOwn(o,n)){var a=this._arr,i=a.length;return o[n]=i,a.push({key:n,priority:r}),this._decrease(i),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key}decrease(n,r){var o=this._keyIndices[n];if(r>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[o].priority+" New: "+r);this._arr[o].priority=r,this._decrease(o)}_heapify(n){var r=this._arr,o=2*n,a=o+1,i=n;o<r.length&&(i=r[o].priority<r[i].priority?o:i,a<r.length&&(i=r[a].priority<r[i].priority?a:i),i!==n&&(this._swap(n,i),this._heapify(i)))}_decrease(n){for(var r=this._arr,o=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<o));)this._swap(n,a),n=a}_swap(n,r){var o=this._arr,a=this._keyIndices,i=o[n],l=o[r];o[n]=l,o[r]=i,a[l.key]=n,a[i.key]=r}}return _n=e,_n}var bn,Tr;function ka(){if(Tr)return bn;Tr=1;var e=Na();bn=n;var t=()=>1;function n(o,a,i,l){return r(o,String(a),i||t,l||function(u){return o.outEdges(u)})}function r(o,a,i,l){var u={},d=new e,c,f,h=function(p){var w=p.v!==c?p.v:p.w,v=u[w],m=i(p),E=f.distance+m;if(m<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+p+" Weight: "+m);E<v.distance&&(v.distance=E,v.predecessor=c,d.decrease(w,E))};for(o.nodes().forEach(function(p){var w=p===a?0:Number.POSITIVE_INFINITY;u[p]={distance:w},d.add(p,w)});d.size()>0&&(c=d.removeMin(),f=u[c],f.distance!==Number.POSITIVE_INFINITY);)l(c).forEach(h);return u}return bn}var En,Or;function bp(){if(Or)return En;Or=1;var e=ka();En=t;function t(n,r,o){return n.nodes().reduce(function(a,i){return a[i]=e(n,i,r,o),a},{})}return En}var xn,$r;function Sa(){if($r)return xn;$r=1,xn=e;function e(t){var n=0,r=[],o={},a=[];function i(l){var u=o[l]={onStack:!0,lowlink:n,index:n++};if(r.push(l),t.successors(l).forEach(function(f){Object.hasOwn(o,f)?o[f].onStack&&(u.lowlink=Math.min(u.lowlink,o[f].index)):(i(f),u.lowlink=Math.min(u.lowlink,o[f].lowlink))}),u.lowlink===u.index){var d=[],c;do c=r.pop(),o[c].onStack=!1,d.push(c);while(l!==c);a.push(d)}}return t.nodes().forEach(function(l){Object.hasOwn(o,l)||i(l)}),a}return xn}var Nn,Dr;function Ep(){if(Dr)return Nn;Dr=1;var e=Sa();Nn=t;function t(n){return e(n).filter(function(r){return r.length>1||r.length===1&&n.hasEdge(r[0],r[0])})}return Nn}var kn,Br;function xp(){if(Br)return kn;Br=1,kn=t;var e=()=>1;function t(r,o,a){return n(r,o||e,a||function(i){return r.outEdges(i)})}function n(r,o,a){var i={},l=r.nodes();return l.forEach(function(u){i[u]={},i[u][u]={distance:0},l.forEach(function(d){u!==d&&(i[u][d]={distance:Number.POSITIVE_INFINITY})}),a(u).forEach(function(d){var c=d.v===u?d.w:d.v,f=o(d);i[u][c]={distance:f,predecessor:u}})}),l.forEach(function(u){var d=i[u];l.forEach(function(c){var f=i[c];l.forEach(function(h){var p=f[u],w=d[h],v=f[h],m=p.distance+w.distance;m<v.distance&&(v.distance=m,v.predecessor=w.predecessor)})})}),i}return kn}var Sn,Vr;function Ca(){if(Vr)return Sn;Vr=1;function e(n){var r={},o={},a=[];function i(l){if(Object.hasOwn(o,l))throw new t;Object.hasOwn(r,l)||(o[l]=!0,r[l]=!0,n.predecessors(l).forEach(i),delete o[l],a.push(l))}if(n.sinks().forEach(i),Object.keys(r).length!==n.nodeCount())throw new t;return a}class t extends Error{constructor(){super(...arguments)}}return Sn=e,e.CycleException=t,Sn}var Cn,Pr;function Np(){if(Pr)return Cn;Pr=1;var e=Ca();Cn=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Cn}var In,Rr;function Ia(){if(Rr)return In;Rr=1,In=e;function e(o,a,i){Array.isArray(a)||(a=[a]);var l=o.isDirected()?f=>o.successors(f):f=>o.neighbors(f),u=i==="post"?t:n,d=[],c={};return a.forEach(f=>{if(!o.hasNode(f))throw new Error("Graph does not have node: "+f);u(f,l,c,d)}),d}function t(o,a,i,l){for(var u=[[o,!1]];u.length>0;){var d=u.pop();d[1]?l.push(d[0]):Object.hasOwn(i,d[0])||(i[d[0]]=!0,u.push([d[0],!0]),r(a(d[0]),c=>u.push([c,!1])))}}function n(o,a,i,l){for(var u=[o];u.length>0;){var d=u.pop();Object.hasOwn(i,d)||(i[d]=!0,l.push(d),r(a(d),c=>u.push(c)))}}function r(o,a){for(var i=o.length;i--;)a(o[i],i,o);return o}return In}var Mn,Ar;function kp(){if(Ar)return Mn;Ar=1;var e=Ia();Mn=t;function t(n,r){return e(n,r,"post")}return Mn}var Tn,zr;function Sp(){if(zr)return Tn;zr=1;var e=Ia();Tn=t;function t(n,r){return e(n,r,"pre")}return Tn}var On,Lr;function Cp(){if(Lr)return On;Lr=1;var e=Bo(),t=Na();On=n;function n(r,o){var a=new e,i={},l=new t,u;function d(f){var h=f.v===u?f.w:f.v,p=l.priority(h);if(p!==void 0){var w=o(f);w<p&&(i[h]=u,l.decrease(h,w))}}if(r.nodeCount()===0)return a;r.nodes().forEach(function(f){l.add(f,Number.POSITIVE_INFINITY),a.setNode(f)}),l.decrease(r.nodes()[0],0);for(var c=!1;l.size()>0;){if(u=l.removeMin(),Object.hasOwn(i,u))a.setEdge(u,i[u]);else{if(c)throw new Error("Input graph is not connected: "+r);c=!0}r.nodeEdges(u).forEach(d)}return a}return On}var $n,Fr;function Ip(){return Fr||(Fr=1,$n={components:_p(),dijkstra:ka(),dijkstraAll:bp(),findCycles:Ep(),floydWarshall:xp(),isAcyclic:Np(),postorder:kp(),preorder:Sp(),prim:Cp(),tarjan:Sa(),topsort:Ca()}),$n}var Dn,Hr;function xe(){if(Hr)return Dn;Hr=1;var e=yp();return Dn={Graph:e.Graph,json:wp(),alg:Ip(),version:e.version},Dn}var Bn,Gr;function Mp(){if(Gr)return Bn;Gr=1;class e{constructor(){let o={};o._next=o._prev=o,this._sentinel=o}dequeue(){let o=this._sentinel,a=o._prev;if(a!==o)return t(a),a}enqueue(o){let a=this._sentinel;o._prev&&o._next&&t(o),o._next=a._next,a._next._prev=o,a._next=o,o._prev=a}toString(){let o=[],a=this._sentinel,i=a._prev;for(;i!==a;)o.push(JSON.stringify(i,n)),i=i._prev;return"["+o.join(", ")+"]"}}function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,o){if(r!=="_next"&&r!=="_prev")return o}return Bn=e,Bn}var Vn,Yr;function Tp(){if(Yr)return Vn;Yr=1;let e=xe().Graph,t=Mp();Vn=r;let n=()=>1;function r(d,c){if(d.nodeCount()<=1)return[];let f=i(d,c||n);return o(f.graph,f.buckets,f.zeroIdx).flatMap(p=>d.outEdges(p.v,p.w))}function o(d,c,f){let h=[],p=c[c.length-1],w=c[0],v;for(;d.nodeCount();){for(;v=w.dequeue();)a(d,c,f,v);for(;v=p.dequeue();)a(d,c,f,v);if(d.nodeCount()){for(let m=c.length-2;m>0;--m)if(v=c[m].dequeue(),v){h=h.concat(a(d,c,f,v,!0));break}}}return h}function a(d,c,f,h,p){let w=p?[]:void 0;return d.inEdges(h.v).forEach(v=>{let m=d.edge(v),E=d.node(v.v);p&&w.push({v:v.v,w:v.w}),E.out-=m,l(c,f,E)}),d.outEdges(h.v).forEach(v=>{let m=d.edge(v),E=v.w,y=d.node(E);y.in-=m,l(c,f,y)}),d.removeNode(h.v),w}function i(d,c){let f=new e,h=0,p=0;d.nodes().forEach(m=>{f.setNode(m,{v:m,in:0,out:0})}),d.edges().forEach(m=>{let E=f.edge(m.v,m.w)||0,y=c(m),g=E+y;f.setEdge(m.v,m.w,g),p=Math.max(p,f.node(m.v).out+=y),h=Math.max(h,f.node(m.w).in+=y)});let w=u(p+h+3).map(()=>new t),v=h+1;return f.nodes().forEach(m=>{l(w,v,f.node(m))}),{graph:f,buckets:w,zeroIdx:v}}function l(d,c,f){f.out?f.in?d[f.out-f.in+c].enqueue(f):d[d.length-1].enqueue(f):d[0].enqueue(f)}function u(d){const c=[];for(let f=0;f<d;f++)c.push(f);return c}return Vn}var Pn,qr;function ge(){if(qr)return Pn;qr=1;let e=xe().Graph;Pn={addBorderNode:c,addDummyNode:t,applyWithChunking:p,asNonCompoundGraph:r,buildLayerMatrix:l,intersectRect:i,mapValues:R,maxRank:w,normalizeRanks:u,notime:E,partition:v,pick:$,predecessorWeights:a,range:b,removeEmptyRanks:d,simplify:n,successorWeights:o,time:m,uniqueId:g,zipObject:A};function t(x,T,D,M){let _;do _=g(M);while(x.hasNode(_));return D.dummy=T,x.setNode(_,D),_}function n(x){let T=new e().setGraph(x.graph());return x.nodes().forEach(D=>T.setNode(D,x.node(D))),x.edges().forEach(D=>{let M=T.edge(D.v,D.w)||{weight:0,minlen:1},_=x.edge(D);T.setEdge(D.v,D.w,{weight:M.weight+_.weight,minlen:Math.max(M.minlen,_.minlen)})}),T}function r(x){let T=new e({multigraph:x.isMultigraph()}).setGraph(x.graph());return x.nodes().forEach(D=>{x.children(D).length||T.setNode(D,x.node(D))}),x.edges().forEach(D=>{T.setEdge(D,x.edge(D))}),T}function o(x){let T=x.nodes().map(D=>{let M={};return x.outEdges(D).forEach(_=>{M[_.w]=(M[_.w]||0)+x.edge(_).weight}),M});return A(x.nodes(),T)}function a(x){let T=x.nodes().map(D=>{let M={};return x.inEdges(D).forEach(_=>{M[_.v]=(M[_.v]||0)+x.edge(_).weight}),M});return A(x.nodes(),T)}function i(x,T){let D=x.x,M=x.y,_=T.x-D,F=T.y-M,N=x.width/2,z=x.height/2;if(!_&&!F)throw new Error("Not possible to find intersection inside of the rectangle");let P,G;return Math.abs(F)*N>Math.abs(_)*z?(F<0&&(z=-z),P=z*_/F,G=z):(_<0&&(N=-N),P=N,G=N*F/_),{x:D+P,y:M+G}}function l(x){let T=b(w(x)+1).map(()=>[]);return x.nodes().forEach(D=>{let M=x.node(D),_=M.rank;_!==void 0&&(T[_][M.order]=D)}),T}function u(x){let T=x.nodes().map(M=>{let _=x.node(M).rank;return _===void 0?Number.MAX_VALUE:_}),D=p(Math.min,T);x.nodes().forEach(M=>{let _=x.node(M);Object.hasOwn(_,"rank")&&(_.rank-=D)})}function d(x){let T=x.nodes().map(N=>x.node(N).rank),D=p(Math.min,T),M=[];x.nodes().forEach(N=>{let z=x.node(N).rank-D;M[z]||(M[z]=[]),M[z].push(N)});let _=0,F=x.graph().nodeRankFactor;Array.from(M).forEach((N,z)=>{N===void 0&&z%F!==0?--_:N!==void 0&&_&&N.forEach(P=>x.node(P).rank+=_)})}function c(x,T,D,M){let _={width:0,height:0};return arguments.length>=4&&(_.rank=D,_.order=M),t(x,"border",_,T)}function f(x,T=h){const D=[];for(let M=0;M<x.length;M+=T){const _=x.slice(M,M+T);D.push(_)}return D}const h=65535;function p(x,T){if(T.length>h){const D=f(T);return x.apply(null,D.map(M=>x.apply(null,M)))}else return x.apply(null,T)}function w(x){const D=x.nodes().map(M=>{let _=x.node(M).rank;return _===void 0?Number.MIN_VALUE:_});return p(Math.max,D)}function v(x,T){let D={lhs:[],rhs:[]};return x.forEach(M=>{T(M)?D.lhs.push(M):D.rhs.push(M)}),D}function m(x,T){let D=Date.now();try{return T()}finally{console.log(x+" time: "+(Date.now()-D)+"ms")}}function E(x,T){return T()}let y=0;function g(x){var T=++y;return toString(x)+T}function b(x,T,D=1){T==null&&(T=x,x=0);let M=F=>F<T;D<0&&(M=F=>T<F);const _=[];for(let F=x;M(F);F+=D)_.push(F);return _}function $(x,T){const D={};for(const M of T)x[M]!==void 0&&(D[M]=x[M]);return D}function R(x,T){let D=T;return typeof T=="string"&&(D=M=>M[T]),Object.entries(x).reduce((M,[_,F])=>(M[_]=D(F,_),M),{})}function A(x,T){return x.reduce((D,M,_)=>(D[M]=T[_],D),{})}return Pn}var Rn,Wr;function Op(){if(Wr)return Rn;Wr=1;let e=Tp(),t=ge().uniqueId;Rn={run:n,undo:o};function n(a){(a.graph().acyclicer==="greedy"?e(a,l(a)):r(a)).forEach(u=>{let d=a.edge(u);a.removeEdge(u),d.forwardName=u.name,d.reversed=!0,a.setEdge(u.w,u.v,d,t("rev"))});function l(u){return d=>u.edge(d).weight}}function r(a){let i=[],l={},u={};function d(c){Object.hasOwn(u,c)||(u[c]=!0,l[c]=!0,a.outEdges(c).forEach(f=>{Object.hasOwn(l,f.w)?i.push(f):d(f.w)}),delete l[c])}return a.nodes().forEach(d),i}function o(a){a.edges().forEach(i=>{let l=a.edge(i);if(l.reversed){a.removeEdge(i);let u=l.forwardName;delete l.reversed,delete l.forwardName,a.setEdge(i.w,i.v,l,u)}})}return Rn}var An,Xr;function $p(){if(Xr)return An;Xr=1;let e=ge();An={run:t,undo:r};function t(o){o.graph().dummyChains=[],o.edges().forEach(a=>n(o,a))}function n(o,a){let i=a.v,l=o.node(i).rank,u=a.w,d=o.node(u).rank,c=a.name,f=o.edge(a),h=f.labelRank;if(d===l+1)return;o.removeEdge(a);let p,w,v;for(v=0,++l;l<d;++v,++l)f.points=[],w={width:0,height:0,edgeLabel:f,edgeObj:a,rank:l},p=e.addDummyNode(o,"edge",w,"_d"),l===h&&(w.width=f.width,w.height=f.height,w.dummy="edge-label",w.labelpos=f.labelpos),o.setEdge(i,p,{weight:f.weight},c),v===0&&o.graph().dummyChains.push(p),i=p;o.setEdge(i,u,{weight:f.weight},c)}function r(o){o.graph().dummyChains.forEach(a=>{let i=o.node(a),l=i.edgeLabel,u;for(o.setEdge(i.edgeObj,l);i.dummy;)u=o.successors(a)[0],o.removeNode(a),l.points.push({x:i.x,y:i.y}),i.dummy==="edge-label"&&(l.x=i.x,l.y=i.y,l.width=i.width,l.height=i.height),a=u,i=o.node(a)})}return An}var zn,Ur;function Ht(){if(Ur)return zn;Ur=1;const{applyWithChunking:e}=ge();zn={longestPath:t,slack:n};function t(r){var o={};function a(i){var l=r.node(i);if(Object.hasOwn(o,i))return l.rank;o[i]=!0;let u=r.outEdges(i).map(c=>c==null?Number.POSITIVE_INFINITY:a(c.w)-r.edge(c).minlen);var d=e(Math.min,u);return d===Number.POSITIVE_INFINITY&&(d=0),l.rank=d}r.sources().forEach(a)}function n(r,o){return r.node(o.w).rank-r.node(o.v).rank-r.edge(o).minlen}return zn}var Ln,jr;function Ma(){if(jr)return Ln;jr=1;var e=xe().Graph,t=Ht().slack;Ln=n;function n(i){var l=new e({directed:!1}),u=i.nodes()[0],d=i.nodeCount();l.setNode(u,{});for(var c,f;r(l,i)<d;)c=o(l,i),f=l.hasNode(c.v)?t(i,c):-t(i,c),a(l,i,f);return l}function r(i,l){function u(d){l.nodeEdges(d).forEach(c=>{var f=c.v,h=d===f?c.w:f;!i.hasNode(h)&&!t(l,c)&&(i.setNode(h,{}),i.setEdge(d,h,{}),u(h))})}return i.nodes().forEach(u),i.nodeCount()}function o(i,l){return l.edges().reduce((d,c)=>{let f=Number.POSITIVE_INFINITY;return i.hasNode(c.v)!==i.hasNode(c.w)&&(f=t(l,c)),f<d[0]?[f,c]:d},[Number.POSITIVE_INFINITY,null])[1]}function a(i,l,u){i.nodes().forEach(d=>l.node(d).rank+=u)}return Ln}var Fn,Zr;function Dp(){if(Zr)return Fn;Zr=1;var e=Ma(),t=Ht().slack,n=Ht().longestPath,r=xe().alg.preorder,o=xe().alg.postorder,a=ge().simplify;Fn=i,i.initLowLimValues=c,i.initCutValues=l,i.calcCutValue=d,i.leaveEdge=h,i.enterEdge=p,i.exchangeEdges=w;function i(y){y=a(y),n(y);var g=e(y);c(g),l(g,y);for(var b,$;b=h(g);)$=p(g,y,b),w(g,y,b,$)}function l(y,g){var b=o(y,y.nodes());b=b.slice(0,b.length-1),b.forEach($=>u(y,g,$))}function u(y,g,b){var $=y.node(b),R=$.parent;y.edge(b,R).cutvalue=d(y,g,b)}function d(y,g,b){var $=y.node(b),R=$.parent,A=!0,x=g.edge(b,R),T=0;return x||(A=!1,x=g.edge(R,b)),T=x.weight,g.nodeEdges(b).forEach(D=>{var M=D.v===b,_=M?D.w:D.v;if(_!==R){var F=M===A,N=g.edge(D).weight;if(T+=F?N:-N,m(y,b,_)){var z=y.edge(b,_).cutvalue;T+=F?-z:z}}}),T}function c(y,g){arguments.length<2&&(g=y.nodes()[0]),f(y,{},1,g)}function f(y,g,b,$,R){var A=b,x=y.node($);return g[$]=!0,y.neighbors($).forEach(T=>{Object.hasOwn(g,T)||(b=f(y,g,b,T,$))}),x.low=A,x.lim=b++,R?x.parent=R:delete x.parent,b}function h(y){return y.edges().find(g=>y.edge(g).cutvalue<0)}function p(y,g,b){var $=b.v,R=b.w;g.hasEdge($,R)||($=b.w,R=b.v);var A=y.node($),x=y.node(R),T=A,D=!1;A.lim>x.lim&&(T=x,D=!0);var M=g.edges().filter(_=>D===E(y,y.node(_.v),T)&&D!==E(y,y.node(_.w),T));return M.reduce((_,F)=>t(g,F)<t(g,_)?F:_)}function w(y,g,b,$){var R=b.v,A=b.w;y.removeEdge(R,A),y.setEdge($.v,$.w,{}),c(y),l(y,g),v(y,g)}function v(y,g){var b=y.nodes().find(R=>!g.node(R).parent),$=r(y,b);$=$.slice(1),$.forEach(R=>{var A=y.node(R).parent,x=g.edge(R,A),T=!1;x||(x=g.edge(A,R),T=!0),g.node(R).rank=g.node(A).rank+(T?x.minlen:-x.minlen)})}function m(y,g,b){return y.hasEdge(g,b)}function E(y,g,b){return b.low<=g.lim&&g.lim<=b.lim}return Fn}var Hn,Kr;function Bp(){if(Kr)return Hn;Kr=1;var e=Ht(),t=e.longestPath,n=Ma(),r=Dp();Hn=o;function o(u){switch(u.graph().ranker){case"network-simplex":l(u);break;case"tight-tree":i(u);break;case"longest-path":a(u);break;default:l(u)}}var a=t;function i(u){t(u),n(u)}function l(u){r(u)}return Hn}var Gn,Jr;function Vp(){if(Jr)return Gn;Jr=1,Gn=e;function e(r){let o=n(r);r.graph().dummyChains.forEach(a=>{let i=r.node(a),l=i.edgeObj,u=t(r,o,l.v,l.w),d=u.path,c=u.lca,f=0,h=d[f],p=!0;for(;a!==l.w;){if(i=r.node(a),p){for(;(h=d[f])!==c&&r.node(h).maxRank<i.rank;)f++;h===c&&(p=!1)}if(!p){for(;f<d.length-1&&r.node(h=d[f+1]).minRank<=i.rank;)f++;h=d[f]}r.setParent(a,h),a=r.successors(a)[0]}})}function t(r,o,a,i){let l=[],u=[],d=Math.min(o[a].low,o[i].low),c=Math.max(o[a].lim,o[i].lim),f,h;f=a;do f=r.parent(f),l.push(f);while(f&&(o[f].low>d||c>o[f].lim));for(h=f,f=i;(f=r.parent(f))!==h;)u.push(f);return{path:l.concat(u.reverse()),lca:h}}function n(r){let o={},a=0;function i(l){let u=a;r.children(l).forEach(i),o[l]={low:u,lim:a++}}return r.children().forEach(i),o}return Gn}var Yn,Qr;function Pp(){if(Qr)return Yn;Qr=1;let e=ge();Yn={run:t,cleanup:a};function t(i){let l=e.addDummyNode(i,"root",{},"_root"),u=r(i),d=Object.values(u),c=e.applyWithChunking(Math.max,d)-1,f=2*c+1;i.graph().nestingRoot=l,i.edges().forEach(p=>i.edge(p).minlen*=f);let h=o(i)+1;i.children().forEach(p=>n(i,l,f,h,c,u,p)),i.graph().nodeRankFactor=f}function n(i,l,u,d,c,f,h){let p=i.children(h);if(!p.length){h!==l&&i.setEdge(l,h,{weight:0,minlen:u});return}let w=e.addBorderNode(i,"_bt"),v=e.addBorderNode(i,"_bb"),m=i.node(h);i.setParent(w,h),m.borderTop=w,i.setParent(v,h),m.borderBottom=v,p.forEach(E=>{n(i,l,u,d,c,f,E);let y=i.node(E),g=y.borderTop?y.borderTop:E,b=y.borderBottom?y.borderBottom:E,$=y.borderTop?d:2*d,R=g!==b?1:c-f[h]+1;i.setEdge(w,g,{weight:$,minlen:R,nestingEdge:!0}),i.setEdge(b,v,{weight:$,minlen:R,nestingEdge:!0})}),i.parent(h)||i.setEdge(l,w,{weight:0,minlen:c+f[h]})}function r(i){var l={};function u(d,c){var f=i.children(d);f&&f.length&&f.forEach(h=>u(h,c+1)),l[d]=c}return i.children().forEach(d=>u(d,1)),l}function o(i){return i.edges().reduce((l,u)=>l+i.edge(u).weight,0)}function a(i){var l=i.graph();i.removeNode(l.nestingRoot),delete l.nestingRoot,i.edges().forEach(u=>{var d=i.edge(u);d.nestingEdge&&i.removeEdge(u)})}return Yn}var qn,ei;function Rp(){if(ei)return qn;ei=1;let e=ge();qn=t;function t(r){function o(a){let i=r.children(a),l=r.node(a);if(i.length&&i.forEach(o),Object.hasOwn(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(let u=l.minRank,d=l.maxRank+1;u<d;++u)n(r,"borderLeft","_bl",a,l,u),n(r,"borderRight","_br",a,l,u)}}r.children().forEach(o)}function n(r,o,a,i,l,u){let d={width:0,height:0,rank:u,borderType:o},c=l[o][u-1],f=e.addDummyNode(r,"border",d,a);l[o][u]=f,r.setParent(f,i),c&&r.setEdge(c,f,{weight:1})}return qn}var Wn,ti;function Ap(){if(ti)return Wn;ti=1,Wn={adjust:e,undo:t};function e(u){let d=u.graph().rankdir.toLowerCase();(d==="lr"||d==="rl")&&n(u)}function t(u){let d=u.graph().rankdir.toLowerCase();(d==="bt"||d==="rl")&&o(u),(d==="lr"||d==="rl")&&(i(u),n(u))}function n(u){u.nodes().forEach(d=>r(u.node(d))),u.edges().forEach(d=>r(u.edge(d)))}function r(u){let d=u.width;u.width=u.height,u.height=d}function o(u){u.nodes().forEach(d=>a(u.node(d))),u.edges().forEach(d=>{let c=u.edge(d);c.points.forEach(a),Object.hasOwn(c,"y")&&a(c)})}function a(u){u.y=-u.y}function i(u){u.nodes().forEach(d=>l(u.node(d))),u.edges().forEach(d=>{let c=u.edge(d);c.points.forEach(l),Object.hasOwn(c,"x")&&l(c)})}function l(u){let d=u.x;u.x=u.y,u.y=d}return Wn}var Xn,ni;function zp(){if(ni)return Xn;ni=1;let e=ge();Xn=t;function t(n){let r={},o=n.nodes().filter(c=>!n.children(c).length),a=o.map(c=>n.node(c).rank),i=e.applyWithChunking(Math.max,a),l=e.range(i+1).map(()=>[]);function u(c){if(r[c])return;r[c]=!0;let f=n.node(c);l[f.rank].push(c),n.successors(c).forEach(u)}return o.sort((c,f)=>n.node(c).rank-n.node(f).rank).forEach(u),l}return Xn}var Un,oi;function Lp(){if(oi)return Un;oi=1;let e=ge().zipObject;Un=t;function t(r,o){let a=0;for(let i=1;i<o.length;++i)a+=n(r,o[i-1],o[i]);return a}function n(r,o,a){let i=e(a,a.map((h,p)=>p)),l=o.flatMap(h=>r.outEdges(h).map(p=>({pos:i[p.w],weight:r.edge(p).weight})).sort((p,w)=>p.pos-w.pos)),u=1;for(;u<a.length;)u<<=1;let d=2*u-1;u-=1;let c=new Array(d).fill(0),f=0;return l.forEach(h=>{let p=h.pos+u;c[p]+=h.weight;let w=0;for(;p>0;)p%2&&(w+=c[p+1]),p=p-1>>1,c[p]+=h.weight;f+=h.weight*w}),f}return Un}var jn,ri;function Fp(){if(ri)return jn;ri=1,jn=e;function e(t,n=[]){return n.map(r=>{let o=t.inEdges(r);if(o.length){let a=o.reduce((i,l)=>{let u=t.edge(l),d=t.node(l.v);return{sum:i.sum+u.weight*d.order,weight:i.weight+u.weight}},{sum:0,weight:0});return{v:r,barycenter:a.sum/a.weight,weight:a.weight}}else return{v:r}})}return jn}var Zn,ii;function Hp(){if(ii)return Zn;ii=1;let e=ge();Zn=t;function t(o,a){let i={};o.forEach((u,d)=>{let c=i[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:d};u.barycenter!==void 0&&(c.barycenter=u.barycenter,c.weight=u.weight)}),a.edges().forEach(u=>{let d=i[u.v],c=i[u.w];d!==void 0&&c!==void 0&&(c.indegree++,d.out.push(i[u.w]))});let l=Object.values(i).filter(u=>!u.indegree);return n(l)}function n(o){let a=[];function i(u){return d=>{d.merged||(d.barycenter===void 0||u.barycenter===void 0||d.barycenter>=u.barycenter)&&r(u,d)}}function l(u){return d=>{d.in.push(u),--d.indegree===0&&o.push(d)}}for(;o.length;){let u=o.pop();a.push(u),u.in.reverse().forEach(i(u)),u.out.forEach(l(u))}return a.filter(u=>!u.merged).map(u=>e.pick(u,["vs","i","barycenter","weight"]))}function r(o,a){let i=0,l=0;o.weight&&(i+=o.barycenter*o.weight,l+=o.weight),a.weight&&(i+=a.barycenter*a.weight,l+=a.weight),o.vs=a.vs.concat(o.vs),o.barycenter=i/l,o.weight=l,o.i=Math.min(a.i,o.i),a.merged=!0}return Zn}var Kn,ai;function Gp(){if(ai)return Kn;ai=1;let e=ge();Kn=t;function t(o,a){let i=e.partition(o,w=>Object.hasOwn(w,"barycenter")),l=i.lhs,u=i.rhs.sort((w,v)=>v.i-w.i),d=[],c=0,f=0,h=0;l.sort(r(!!a)),h=n(d,u,h),l.forEach(w=>{h+=w.vs.length,d.push(w.vs),c+=w.barycenter*w.weight,f+=w.weight,h=n(d,u,h)});let p={vs:d.flat(!0)};return f&&(p.barycenter=c/f,p.weight=f),p}function n(o,a,i){let l;for(;a.length&&(l=a[a.length-1]).i<=i;)a.pop(),o.push(l.vs),i++;return i}function r(o){return(a,i)=>a.barycenter<i.barycenter?-1:a.barycenter>i.barycenter?1:o?i.i-a.i:a.i-i.i}return Kn}var Jn,si;function Yp(){if(si)return Jn;si=1;let e=Fp(),t=Hp(),n=Gp();Jn=r;function r(i,l,u,d){let c=i.children(l),f=i.node(l),h=f?f.borderLeft:void 0,p=f?f.borderRight:void 0,w={};h&&(c=c.filter(y=>y!==h&&y!==p));let v=e(i,c);v.forEach(y=>{if(i.children(y.v).length){let g=r(i,y.v,u,d);w[y.v]=g,Object.hasOwn(g,"barycenter")&&a(y,g)}});let m=t(v,u);o(m,w);let E=n(m,d);if(h&&(E.vs=[h,E.vs,p].flat(!0),i.predecessors(h).length)){let y=i.node(i.predecessors(h)[0]),g=i.node(i.predecessors(p)[0]);Object.hasOwn(E,"barycenter")||(E.barycenter=0,E.weight=0),E.barycenter=(E.barycenter*E.weight+y.order+g.order)/(E.weight+2),E.weight+=2}return E}function o(i,l){i.forEach(u=>{u.vs=u.vs.flatMap(d=>l[d]?l[d].vs:d)})}function a(i,l){i.barycenter!==void 0?(i.barycenter=(i.barycenter*i.weight+l.barycenter*l.weight)/(i.weight+l.weight),i.weight+=l.weight):(i.barycenter=l.barycenter,i.weight=l.weight)}return Jn}var Qn,li;function qp(){if(li)return Qn;li=1;let e=xe().Graph,t=ge();Qn=n;function n(o,a,i){let l=r(o),u=new e({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(d=>o.node(d));return o.nodes().forEach(d=>{let c=o.node(d),f=o.parent(d);(c.rank===a||c.minRank<=a&&a<=c.maxRank)&&(u.setNode(d),u.setParent(d,f||l),o[i](d).forEach(h=>{let p=h.v===d?h.w:h.v,w=u.edge(p,d),v=w!==void 0?w.weight:0;u.setEdge(p,d,{weight:o.edge(h).weight+v})}),Object.hasOwn(c,"minRank")&&u.setNode(d,{borderLeft:c.borderLeft[a],borderRight:c.borderRight[a]}))}),u}function r(o){for(var a;o.hasNode(a=t.uniqueId("_root")););return a}return Qn}var eo,ui;function Wp(){if(ui)return eo;ui=1,eo=e;function e(t,n,r){let o={},a;r.forEach(i=>{let l=t.parent(i),u,d;for(;l;){if(u=t.parent(l),u?(d=o[u],o[u]=l):(d=a,a=l),d&&d!==l){n.setEdge(d,l);return}l=u}})}return eo}var to,ci;function Xp(){if(ci)return to;ci=1;let e=zp(),t=Lp(),n=Yp(),r=qp(),o=Wp(),a=xe().Graph,i=ge();to=l;function l(f,h){if(h&&typeof h.customOrder=="function"){h.customOrder(f,l);return}let p=i.maxRank(f),w=u(f,i.range(1,p+1),"inEdges"),v=u(f,i.range(p-1,-1,-1),"outEdges"),m=e(f);if(c(f,m),h&&h.disableOptimalOrderHeuristic)return;let E=Number.POSITIVE_INFINITY,y;for(let g=0,b=0;b<4;++g,++b){d(g%2?w:v,g%4>=2),m=i.buildLayerMatrix(f);let $=t(f,m);$<E&&(b=0,y=Object.assign({},m),E=$)}c(f,y)}function u(f,h,p){return h.map(function(w){return r(f,w,p)})}function d(f,h){let p=new a;f.forEach(function(w){let v=w.graph().root,m=n(w,v,p,h);m.vs.forEach((E,y)=>w.node(E).order=y),o(w,p,m.vs)})}function c(f,h){Object.values(h).forEach(p=>p.forEach((w,v)=>f.node(w).order=v))}return to}var no,di;function Up(){if(di)return no;di=1;let e=xe().Graph,t=ge();no={positionX:p,findType1Conflicts:n,findType2Conflicts:r,addConflict:a,hasConflict:i,verticalAlignment:l,horizontalCompaction:u,alignCoordinates:f,findSmallestWidthAlignment:c,balance:h};function n(m,E){let y={};function g(b,$){let R=0,A=0,x=b.length,T=$[$.length-1];return $.forEach((D,M)=>{let _=o(m,D),F=_?m.node(_).order:x;(_||D===T)&&($.slice(A,M+1).forEach(N=>{m.predecessors(N).forEach(z=>{let P=m.node(z),G=P.order;(G<R||F<G)&&!(P.dummy&&m.node(N).dummy)&&a(y,z,N)})}),A=M+1,R=F)}),$}return E.length&&E.reduce(g),y}function r(m,E){let y={};function g($,R,A,x,T){let D;t.range(R,A).forEach(M=>{D=$[M],m.node(D).dummy&&m.predecessors(D).forEach(_=>{let F=m.node(_);F.dummy&&(F.order<x||F.order>T)&&a(y,_,D)})})}function b($,R){let A=-1,x,T=0;return R.forEach((D,M)=>{if(m.node(D).dummy==="border"){let _=m.predecessors(D);_.length&&(x=m.node(_[0]).order,g(R,T,M,A,x),T=M,A=x)}g(R,T,R.length,x,$.length)}),R}return E.length&&E.reduce(b),y}function o(m,E){if(m.node(E).dummy)return m.predecessors(E).find(y=>m.node(y).dummy)}function a(m,E,y){if(E>y){let b=E;E=y,y=b}let g=m[E];g||(m[E]=g={}),g[y]=!0}function i(m,E,y){if(E>y){let g=E;E=y,y=g}return!!m[E]&&Object.hasOwn(m[E],y)}function l(m,E,y,g){let b={},$={},R={};return E.forEach(A=>{A.forEach((x,T)=>{b[x]=x,$[x]=x,R[x]=T})}),E.forEach(A=>{let x=-1;A.forEach(T=>{let D=g(T);if(D.length){D=D.sort((_,F)=>R[_]-R[F]);let M=(D.length-1)/2;for(let _=Math.floor(M),F=Math.ceil(M);_<=F;++_){let N=D[_];$[T]===T&&x<R[N]&&!i(y,T,N)&&($[N]=T,$[T]=b[T]=b[N],x=R[N])}}})}),{root:b,align:$}}function u(m,E,y,g,b){let $={},R=d(m,E,y,b),A=b?"borderLeft":"borderRight";function x(M,_){let F=R.nodes(),N=F.pop(),z={};for(;N;)z[N]?M(N):(z[N]=!0,F.push(N),F=F.concat(_(N))),N=F.pop()}function T(M){$[M]=R.inEdges(M).reduce((_,F)=>Math.max(_,$[F.v]+R.edge(F)),0)}function D(M){let _=R.outEdges(M).reduce((N,z)=>Math.min(N,$[z.w]-R.edge(z)),Number.POSITIVE_INFINITY),F=m.node(M);_!==Number.POSITIVE_INFINITY&&F.borderType!==A&&($[M]=Math.max($[M],_))}return x(T,R.predecessors.bind(R)),x(D,R.successors.bind(R)),Object.keys(g).forEach(M=>$[M]=$[y[M]]),$}function d(m,E,y,g){let b=new e,$=m.graph(),R=w($.nodesep,$.edgesep,g);return E.forEach(A=>{let x;A.forEach(T=>{let D=y[T];if(b.setNode(D),x){var M=y[x],_=b.edge(M,D);b.setEdge(M,D,Math.max(R(m,T,x),_||0))}x=T})}),b}function c(m,E){return Object.values(E).reduce((y,g)=>{let b=Number.NEGATIVE_INFINITY,$=Number.POSITIVE_INFINITY;Object.entries(g).forEach(([A,x])=>{let T=v(m,A)/2;b=Math.max(x+T,b),$=Math.min(x-T,$)});const R=b-$;return R<y[0]&&(y=[R,g]),y},[Number.POSITIVE_INFINITY,null])[1]}function f(m,E){let y=Object.values(E),g=t.applyWithChunking(Math.min,y),b=t.applyWithChunking(Math.max,y);["u","d"].forEach($=>{["l","r"].forEach(R=>{let A=$+R,x=m[A];if(x===E)return;let T=Object.values(x),D=g-t.applyWithChunking(Math.min,T);R!=="l"&&(D=b-t.applyWithChunking(Math.max,T)),D&&(m[A]=t.mapValues(x,M=>M+D))})})}function h(m,E){return t.mapValues(m.ul,(y,g)=>{if(E)return m[E.toLowerCase()][g];{let b=Object.values(m).map($=>$[g]).sort(($,R)=>$-R);return(b[1]+b[2])/2}})}function p(m){let E=t.buildLayerMatrix(m),y=Object.assign(n(m,E),r(m,E)),g={},b;["u","d"].forEach(R=>{b=R==="u"?E:Object.values(E).reverse(),["l","r"].forEach(A=>{A==="r"&&(b=b.map(M=>Object.values(M).reverse()));let x=(R==="u"?m.predecessors:m.successors).bind(m),T=l(m,b,y,x),D=u(m,b,T.root,T.align,A==="r");A==="r"&&(D=t.mapValues(D,M=>-M)),g[R+A]=D})});let $=c(m,g);return f(g,$),h(g,m.graph().align)}function w(m,E,y){return(g,b,$)=>{let R=g.node(b),A=g.node($),x=0,T;if(x+=R.width/2,Object.hasOwn(R,"labelpos"))switch(R.labelpos.toLowerCase()){case"l":T=-R.width/2;break;case"r":T=R.width/2;break}if(T&&(x+=y?T:-T),T=0,x+=(R.dummy?E:m)/2,x+=(A.dummy?E:m)/2,x+=A.width/2,Object.hasOwn(A,"labelpos"))switch(A.labelpos.toLowerCase()){case"l":T=A.width/2;break;case"r":T=-A.width/2;break}return T&&(x+=y?T:-T),T=0,x}}function v(m,E){return m.node(E).width}return no}var oo,fi;function jp(){if(fi)return oo;fi=1;let e=ge(),t=Up().positionX;oo=n;function n(o){o=e.asNonCompoundGraph(o),r(o),Object.entries(t(o)).forEach(([a,i])=>o.node(a).x=i)}function r(o){let a=e.buildLayerMatrix(o),i=o.graph().ranksep,l=0;a.forEach(u=>{const d=u.reduce((c,f)=>{const h=o.node(f).height;return c>h?c:h},0);u.forEach(c=>o.node(c).y=l+d/2),l+=d+i})}return oo}var ro,hi;function Zp(){if(hi)return ro;hi=1;let e=Op(),t=$p(),n=Bp(),r=ge().normalizeRanks,o=Vp(),a=ge().removeEmptyRanks,i=Pp(),l=Rp(),u=Ap(),d=Xp(),c=jp(),f=ge(),h=xe().Graph;ro=p;function p(B,O){let V=O&&O.debugTiming?f.time:f.notime;V("layout",()=>{let L=V("  buildLayoutGraph",()=>x(B));V("  runLayout",()=>w(L,V,O)),V("  updateInputGraph",()=>v(B,L))})}function w(B,O,V){O("    makeSpaceForEdgeLabels",()=>T(B)),O("    removeSelfEdges",()=>Y(B)),O("    acyclic",()=>e.run(B)),O("    nestingGraph.run",()=>i.run(B)),O("    rank",()=>n(f.asNonCompoundGraph(B))),O("    injectEdgeLabelProxies",()=>D(B)),O("    removeEmptyRanks",()=>a(B)),O("    nestingGraph.cleanup",()=>i.cleanup(B)),O("    normalizeRanks",()=>r(B)),O("    assignRankMinMax",()=>M(B)),O("    removeEdgeLabelProxies",()=>_(B)),O("    normalize.run",()=>t.run(B)),O("    parentDummyChains",()=>o(B)),O("    addBorderSegments",()=>l(B)),O("    order",()=>d(B,V)),O("    insertSelfEdges",()=>W(B)),O("    adjustCoordinateSystem",()=>u.adjust(B)),O("    position",()=>c(B)),O("    positionSelfEdges",()=>q(B)),O("    removeBorderNodes",()=>G(B)),O("    normalize.undo",()=>t.undo(B)),O("    fixupEdgeLabelCoords",()=>z(B)),O("    undoCoordinateSystem",()=>u.undo(B)),O("    translateGraph",()=>F(B)),O("    assignNodeIntersects",()=>N(B)),O("    reversePoints",()=>P(B)),O("    acyclic.undo",()=>e.undo(B))}function v(B,O){B.nodes().forEach(V=>{let L=B.node(V),X=O.node(V);L&&(L.x=X.x,L.y=X.y,L.rank=X.rank,O.children(V).length&&(L.width=X.width,L.height=X.height))}),B.edges().forEach(V=>{let L=B.edge(V),X=O.edge(V);L.points=X.points,Object.hasOwn(X,"x")&&(L.x=X.x,L.y=X.y)}),B.graph().width=O.graph().width,B.graph().height=O.graph().height}let m=["nodesep","edgesep","ranksep","marginx","marginy"],E={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},y=["acyclicer","ranker","rankdir","align"],g=["width","height"],b={width:0,height:0},$=["minlen","weight","width","height","labeloffset"],R={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},A=["labelpos"];function x(B){let O=new h({multigraph:!0,compound:!0}),V=ie(B.graph());return O.setGraph(Object.assign({},E,K(V,m),f.pick(V,y))),B.nodes().forEach(L=>{let X=ie(B.node(L));const ee=K(X,g);Object.keys(b).forEach(Z=>{ee[Z]===void 0&&(ee[Z]=b[Z])}),O.setNode(L,ee),O.setParent(L,B.parent(L))}),B.edges().forEach(L=>{let X=ie(B.edge(L));O.setEdge(L,Object.assign({},R,K(X,$),f.pick(X,A)))}),O}function T(B){let O=B.graph();O.ranksep/=2,B.edges().forEach(V=>{let L=B.edge(V);L.minlen*=2,L.labelpos.toLowerCase()!=="c"&&(O.rankdir==="TB"||O.rankdir==="BT"?L.width+=L.labeloffset:L.height+=L.labeloffset)})}function D(B){B.edges().forEach(O=>{let V=B.edge(O);if(V.width&&V.height){let L=B.node(O.v),ee={rank:(B.node(O.w).rank-L.rank)/2+L.rank,e:O};f.addDummyNode(B,"edge-proxy",ee,"_ep")}})}function M(B){let O=0;B.nodes().forEach(V=>{let L=B.node(V);L.borderTop&&(L.minRank=B.node(L.borderTop).rank,L.maxRank=B.node(L.borderBottom).rank,O=Math.max(O,L.maxRank))}),B.graph().maxRank=O}function _(B){B.nodes().forEach(O=>{let V=B.node(O);V.dummy==="edge-proxy"&&(B.edge(V.e).labelRank=V.rank,B.removeNode(O))})}function F(B){let O=Number.POSITIVE_INFINITY,V=0,L=Number.POSITIVE_INFINITY,X=0,ee=B.graph(),Z=ee.marginx||0,se=ee.marginy||0;function re(ne){let oe=ne.x,S=ne.y,k=ne.width,I=ne.height;O=Math.min(O,oe-k/2),V=Math.max(V,oe+k/2),L=Math.min(L,S-I/2),X=Math.max(X,S+I/2)}B.nodes().forEach(ne=>re(B.node(ne))),B.edges().forEach(ne=>{let oe=B.edge(ne);Object.hasOwn(oe,"x")&&re(oe)}),O-=Z,L-=se,B.nodes().forEach(ne=>{let oe=B.node(ne);oe.x-=O,oe.y-=L}),B.edges().forEach(ne=>{let oe=B.edge(ne);oe.points.forEach(S=>{S.x-=O,S.y-=L}),Object.hasOwn(oe,"x")&&(oe.x-=O),Object.hasOwn(oe,"y")&&(oe.y-=L)}),ee.width=V-O+Z,ee.height=X-L+se}function N(B){B.edges().forEach(O=>{let V=B.edge(O),L=B.node(O.v),X=B.node(O.w),ee,Z;V.points?(ee=V.points[0],Z=V.points[V.points.length-1]):(V.points=[],ee=X,Z=L),V.points.unshift(f.intersectRect(L,ee)),V.points.push(f.intersectRect(X,Z))})}function z(B){B.edges().forEach(O=>{let V=B.edge(O);if(Object.hasOwn(V,"x"))switch((V.labelpos==="l"||V.labelpos==="r")&&(V.width-=V.labeloffset),V.labelpos){case"l":V.x-=V.width/2+V.labeloffset;break;case"r":V.x+=V.width/2+V.labeloffset;break}})}function P(B){B.edges().forEach(O=>{let V=B.edge(O);V.reversed&&V.points.reverse()})}function G(B){B.nodes().forEach(O=>{if(B.children(O).length){let V=B.node(O),L=B.node(V.borderTop),X=B.node(V.borderBottom),ee=B.node(V.borderLeft[V.borderLeft.length-1]),Z=B.node(V.borderRight[V.borderRight.length-1]);V.width=Math.abs(Z.x-ee.x),V.height=Math.abs(X.y-L.y),V.x=ee.x+V.width/2,V.y=L.y+V.height/2}}),B.nodes().forEach(O=>{B.node(O).dummy==="border"&&B.removeNode(O)})}function Y(B){B.edges().forEach(O=>{if(O.v===O.w){var V=B.node(O.v);V.selfEdges||(V.selfEdges=[]),V.selfEdges.push({e:O,label:B.edge(O)}),B.removeEdge(O)}})}function W(B){var O=f.buildLayerMatrix(B);O.forEach(V=>{var L=0;V.forEach((X,ee)=>{var Z=B.node(X);Z.order=ee+L,(Z.selfEdges||[]).forEach(se=>{f.addDummyNode(B,"selfedge",{width:se.label.width,height:se.label.height,rank:Z.rank,order:ee+ ++L,e:se.e,label:se.label},"_se")}),delete Z.selfEdges})})}function q(B){B.nodes().forEach(O=>{var V=B.node(O);if(V.dummy==="selfedge"){var L=B.node(V.e.v),X=L.x+L.width/2,ee=L.y,Z=V.x-X,se=L.height/2;B.setEdge(V.e,V.label),B.removeNode(O),V.label.points=[{x:X+2*Z/3,y:ee-se},{x:X+5*Z/6,y:ee-se},{x:X+Z,y:ee},{x:X+5*Z/6,y:ee+se},{x:X+2*Z/3,y:ee+se}],V.label.x=V.x,V.label.y=V.y}})}function K(B,O){return f.mapValues(f.pick(B,O),Number)}function ie(B){var O={};return B&&Object.entries(B).forEach(([V,L])=>{typeof V=="string"&&(V=V.toLowerCase()),O[V]=L}),O}return ro}var io,pi;function Kp(){if(pi)return io;pi=1;let e=ge(),t=xe().Graph;io={debugOrdering:n};function n(r){let o=e.buildLayerMatrix(r),a=new t({compound:!0,multigraph:!0}).setGraph({});return r.nodes().forEach(i=>{a.setNode(i,{label:i}),a.setParent(i,"layer"+r.node(i).rank)}),r.edges().forEach(i=>a.setEdge(i.v,i.w,{},i.name)),o.forEach((i,l)=>{let u="layer"+l;a.setNode(u,{rank:"same"}),i.reduce((d,c)=>(a.setEdge(d,c,{style:"invis"}),c))}),a}return io}var ao,gi;function Jp(){return gi||(gi=1,ao="1.1.4"),ao}var so,mi;function Qp(){return mi||(mi=1,so={graphlib:xe(),layout:Zp(),debug:Kp(),util:{time:ge().time,notime:ge().notime},version:Jp()}),so}var vi=Qp();function eg(e){const n={...{nodeWidth:180,nodeHeight:80,direction:"LR",nodesep:80,ranksep:100,marginx:20,marginy:20,fitViewPadding:.2,fitViewDelay:100},...e},r=s.ref(n.direction||"LR"),{getNodes:o,getEdges:a,setNodes:i,fitView:l}=ce(),u=h=>{const p={...n,...h},{nodeWidth:w,nodeHeight:v,direction:m,nodesep:E,ranksep:y,marginx:g,marginy:b,fitViewPadding:$,fitViewDelay:R}=p;m&&(r.value=m);const A=new vi.graphlib.Graph;A.setDefaultEdgeLabel(()=>({})),A.setGraph({rankdir:r.value,nodesep:E,ranksep:y,marginx:g,marginy:b});const x=o.value,T=a.value;x.forEach(M=>{var _,F;A.setNode(M.id,{width:((_=M.dimensions)==null?void 0:_.width)||w,height:((F=M.dimensions)==null?void 0:F.height)||v})}),T.forEach(M=>{A.setEdge(M.source,M.target)}),vi.layout(A);const D=x.map(M=>{var F,N;const _=A.node(M.id);return{...M,position:{x:_.x-(((F=M.dimensions)==null?void 0:F.width)||w)/2,y:_.y-(((N=M.dimensions)==null?void 0:N.height)||v)/2}}});i(D),setTimeout(()=>{l({padding:$})},R)};return{autoLayout:u,toggleDirection:()=>{const h=r.value==="LR"?"TB":"LR";r.value=h,u({direction:h})},applyHorizontalLayout:()=>{r.value="LR",u({direction:"LR"})},applyVerticalLayout:()=>{r.value="TB",u({direction:"TB"})},currentDirection:r}}const _e={type:At.ArrowClosed,color:"#1890ff",width:16,height:16,strokeWidth:.1},tg=[{id:"1",type:"start",position:{x:20,y:250},data:{label:"TiddlyWiki简介"}},{id:"0",type:"image",position:{x:320,y:50},data:{label:"TiddlyWiki Logo",imageUrl:"/src/plugins/vue-flow/assets/tiddlywiki-icon.svg"}},{id:"3",type:"text",position:{x:620,y:0},data:{label:"TiddlyWiki核心概念",text:`TiddlyWiki的核心概念：

1. Tiddler：独立的内容片段，类似于卡片或笔记
2. Tag：用于组织和分类Tiddler的标签系统
3. WikiText：TiddlyWiki的标记语言，用于格式化内容
4. Transclusion：在一个Tiddler中嵌入另一个Tiddler的内容
5. Filter：用于查询和筛选Tiddler的表达式`}},{id:"2",type:"process",position:{x:280,y:250},data:{label:"TiddlyWiki工作流程",description:"创建、编辑、组织和保存知识的流程",status:"processing"}},{id:"4",type:"data",position:{x:620,y:250},data:{label:"TiddlyWiki数据结构",dataType:"Tiddler",fields:{tags:["插件","扩展","社区"],created:"20250508020312652",title:"TiddlyWiki数据结构",description:"tiddler desc"}}},{id:"5",type:"card",position:{x:920,y:295},data:{label:"TiddlyWiki插件系统",title:"插件生态系统",content:"TiddlyWiki拥有丰富的插件生态系统，可以扩展其功能。常见插件包括：Markdown支持、任务管理、图表生成、主题美化等。",tags:["插件","扩展","社区"]}},{id:"6",type:"text",position:{x:320,y:490},data:{label:"TiddlyWiki历史",text:`TiddlyWiki的发展历程：

2004年：由Jeremy Ruston创建，作为一个单文件的非线性笔记本。
2007年：TiddlyWiki获得了Osmosoft的支持。
2011年：发布了TiddlySpace，一个基于TiddlyWiki的托管服务。
2013年：TiddlyWiki 5发布，完全重写，使用JavaScript和HTML5。
2014年：引入了插件系统，大大增强了扩展性。
2015-2020：社区蓬勃发展，出现了大量插件和主题。
2021年至今：持续发展，成为个人知识管理的重要工具。`}},{id:"7",type:"card",position:{x:620,y:550},data:{label:"TiddlyWiki使用场景",title:"应用场景",content:"TiddlyWiki适用于多种场景：个人知识管理、项目文档、研究笔记、日记、任务管理、写作、教学材料整理等。",tags:["应用","场景","实践"]}},{id:"8",type:"process",position:{x:920,y:600},data:{label:"TiddlyWiki保存方式",description:"单文件保存、Node.js服务器、TiddlyHost等多种保存方式",status:"success"}}],ng=[{id:"e-1-0",source:"1",target:"0",type:"smoothstep",animated:!0,style:{stroke:"#1890ff",strokeWidth:2},markerEnd:_e},{id:"e-1-2",source:"1",target:"2",animated:!0,type:"smoothstep",style:{stroke:"#1890ff",strokeWidth:2},markerEnd:_e},{id:"e-0-3",source:"0",target:"3",animated:!0,type:"smoothstep",style:{stroke:"#1890ff",strokeWidth:2},markerEnd:_e},{id:"e-2-4",source:"2",target:"4",animated:!0,type:"straight",style:{stroke:"#1890ff",strokeWidth:2},markerEnd:_e},{id:"e-4-5",source:"4",target:"5",animated:!0,type:"smoothstep",style:{stroke:"#1890ff",strokeWidth:2},markerEnd:_e},{id:"e-0-6",source:"0",target:"6",animated:!0,type:"smoothstep",style:{stroke:"#1890ff",strokeWidth:2},markerEnd:_e},{id:"e-6-7",source:"6",target:"7",animated:!0,type:"smoothstep",style:{stroke:"#1890ff",strokeWidth:2},markerEnd:_e},{id:"e-7-8",source:"7",target:"8",animated:!0,type:"straight",style:{stroke:"#1890ff",strokeWidth:2},markerEnd:_e}],og={class:"flow-container"},rg={class:"node-list"},ig=["onDragstart"],ag={class:"node-icon"},sg={class:"node-label"},lg={class:"panel-buttons"},ug=s.defineComponent({__name:"Flow",props:{data:{}},setup(e){const t=e,n={default:s.markRaw(mh),text:s.markRaw(Eh),image:s.markRaw(Oh),card:s.markRaw(Lh),process:s.markRaw(Qh),data:s.markRaw(sp),start:s.markRaw(fp)},{onConnect:r,addEdges:o,fitView:a,setNodes:i,setEdges:l,onNodeDragStart:u,onNodeDragStop:d,onPaneReady:c}=ce({id:"tiddlywiki-flow",defaultEdgeOptions:{animated:!0,style:{stroke:"#1976d2",strokeWidth:1},markerEnd:"arrowclosed"},fitViewOnInit:!0,minZoom:.5,maxZoom:1});s.onMounted(()=>{i(t.data.nodes),l(t.data.edges),c(()=>{setTimeout(()=>{a({padding:.2})},100)})}),r(x=>{o([{id:`e-${x.source}-${x.target}`,source:x.source,target:x.target,animated:!0,style:{stroke:"#1890ff",strokeWidth:2},markerEnd:_e}])});const f=()=>{},h=()=>{},p=x=>{console.log("Connection params:",x),o([{id:`e-${x.source}-${x.target}`,source:x.source,target:x.target,animated:!0,style:{stroke:"#1890ff",strokeWidth:2},markerEnd:_e}])};u(()=>{document.body.style.userSelect="none"}),d(()=>{document.body.style.userSelect=""});const{onDragOver:w,onDrop:v,onDragLeave:m,isDragOver:E,onDragStart:y}=mp(),g=[{type:"start",icon:"📦",label:"开始节点"},{type:"data",icon:"📊",label:"Tiddler节点"}],b=s.ref(window.innerWidth<768);window.addEventListener("resize",()=>{const x=b.value;b.value=window.innerWidth<768,!x&&b.value&&($.value=!1)});const $=s.ref(!1),R=()=>{$.value=!$.value},{applyHorizontalLayout:A}=eg({direction:"LR",nodeWidth:180,nodeHeight:80,nodesep:80,ranksep:100});return(x,T)=>(s.openBlock(),s.createElementBlock("div",og,[s.createElementVNode("div",{class:s.normalizeClass(["sidebar",{hidden:!$.value}])},[s.createElementVNode("div",{class:"sidebar-header"},[T[3]||(T[3]=s.createElementVNode("div",{class:"sidebar-title"},"TiddlyWiki 流程图",-1)),s.createElementVNode("button",{class:"sidebar-toggle-inside",onClick:R},T[2]||(T[2]=[s.createElementVNode("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s.createElementVNode("path",{d:"M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12L19 6.41Z",fill:"currentColor"})],-1)]))]),s.createElementVNode("div",rg,[(s.openBlock(),s.createElementBlock(s.Fragment,null,s.renderList(g,D=>s.createElementVNode("div",{key:D.type,class:"node-item",draggable:"true",onDragstart:M=>s.unref(y)(M,D.type),onDragend:h},[s.createElementVNode("span",ag,s.toDisplayString(D.icon),1),s.createElementVNode("span",sg,s.toDisplayString(D.label),1)],40,ig)),64))])],2),$.value?s.createCommentVNode("",!0):(s.openBlock(),s.createElementBlock("button",{key:0,class:"sidebar-toggle",onClick:R},T[4]||(T[4]=[s.createElementVNode("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s.createElementVNode("path",{d:"M3 18H21V16H3V18ZM3 13H21V11H3V13ZM3 6V8H21V6H3Z",fill:"currentColor"})],-1)]))),s.createElementVNode("div",{class:s.normalizeClass(["flow-wrapper",{"drag-over":s.unref(E),"with-sidebar":$.value}])},[s.createVNode(s.unref(Bf),{id:"tiddlywiki-flow","node-types":n,"default-zoom":.7,"min-zoom":.5,"max-zoom":1.5,"connect-on-drop":!0,"snap-to-grid":!0,"snap-grid":[20,20],"default-edge-options":{animated:!0,style:{stroke:"#1890ff",strokeWidth:2},markerEnd:s.unref(_e)},"connection-mode":s.unref(De).Loose,onDrop:s.unref(v),onDragover:s.unref(w),onDragleave:s.unref(m),onConnect:p,onNodeClick:f,"connection-radius":30,"auto-connect":"","fit-view-on-init":"",class:"vue-flow-wrapper",style:{height:"100%",width:"100%"}},{default:s.withCtx(()=>[s.createVNode(s.unref(fh),{position:"top-center"}),s.createVNode(s.unref(xa),{position:"top-right",class:"custom-panel"},{default:s.withCtx(()=>[s.createElementVNode("div",lg,[s.createElementVNode("button",{onClick:T[0]||(T[0]=D=>s.unref(a)({padding:.2}))},"适应视图"),s.createElementVNode("button",{onClick:T[1]||(T[1]=(...D)=>s.unref(A)&&s.unref(A)(...D)),class:"auto-layout-btn"}," 水平排序 ")])]),_:1})]),_:1},8,["default-edge-options","connection-mode","onDrop","onDragover","onDragleave"])],2)]))}}),cg=Be(ug,[["__scopeId","data-v-fb2232b9"]]),dg={class:"vue-flow-plugin"},fg=s.defineComponent({__name:"App",props:{data:{default:()=>({nodes:tg,edges:ng})}},setup(e){return(t,n)=>(s.openBlock(),s.createElementBlock("div",dg,[s.createVNode(cg,{data:t.data},null,8,["data"])]))}}),hg=Be(fg,[["__scopeId","data-v-bbd8d902"]]);function pg(e={}){return function(t={}){const n={...e,...t};return{render(){return s.h(hg,n)}}}}module.exports=pg;
