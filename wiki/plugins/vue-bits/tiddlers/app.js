"use strict";const t=window.Vue,l=require("./index-N4zm8-7u.cjs");function y(...n){const o=!Array.isArray(n[0]),e=o?0:-1,a=n[0+e],r=n[1+e],d=n[2+e],u=n[3+e],m=l.interpolate(r,d,u);return o?m(a):m}function C(n){const o=l.motionValue(n()),e=()=>o.set(n()),a=()=>l.frame.preRender(e,!1,!0);let r;const d=m=>{r=m.map(s=>s.on("change",a))},u=()=>{r.forEach(m=>m()),l.cancelFrame(e)};return t.onUnmounted(()=>{u()}),{subscribe:d,unsubscribe:u,value:o,updateValue:e}}function V(n){l.collectMotionValues.current=[];const{value:o,subscribe:e,unsubscribe:a,updateValue:r}=C(n);return e(l.collectMotionValues.current),l.collectMotionValues.current=void 0,t.watchEffect(()=>{a(),l.collectMotionValues.current=[],r(),e(l.collectMotionValues.current),l.collectMotionValues.current=void 0}),o}function w(n,o,e,a){if(typeof n=="function")return V(n);const r=typeof o=="function"?o:t.isRef(o)?t.computed(()=>y(o.value,e,a)):y(o,e,a);return Array.isArray(n)?k(n,r):k([n],([d])=>t.isRef(r)?r.value(d):r(d))}function k(n,o){const e=[],{value:a,subscribe:r}=C(()=>{e.length=0;const d=n.length;for(let u=0;u<d;u++)e[u]=n[u].get();return t.isRef(o)?o.value(e):o(e)});return r(n),a}const M=["src","alt"],D=t.defineComponent({__name:"Stack",props:{className:{},randomRotation:{type:Boolean,default:!1},sensitivity:{default:200},cardDimensions:{default:()=>({width:208,height:208})},cardsData:{default:()=>[]},animationConfig:{default:()=>({stiffness:260,damping:20})},sendToBackOnClick:{type:Boolean,default:!1}},setup(n){const o=n,e=t.ref(o.cardsData.length?o.cardsData:[{id:1,img:"https://images.unsplash.com/photo-1480074568708-e7b720bb3f09?q=80&w=500&auto=format"},{id:2,img:"https://images.unsplash.com/photo-1449844908441-8829872d2607?q=80&w=500&auto=format"},{id:3,img:"https://images.unsplash.com/photo-1452626212852-811d58933cae?q=80&w=500&auto=format"},{id:4,img:"https://images.unsplash.com/photo-1572120360610-d971b9d7767c?q=80&w=500&auto=format"}]),a=new Map;function r(){const s=l.motionValue(0),i=l.motionValue(0),c=w(i,[-100,100],[60,-60]),f=w(s,[-100,100],[-60,60]);return{x:s,y:i,rotateX:c,rotateY:f,reset(){s.set(0),i.set(0)}}}t.onBeforeMount(()=>{e.value.forEach(s=>{a.has(s.id)||a.set(s.id,r())})});function d(s){let i=a.get(s);return i||(i=r(),a.set(s,i)),i}function u(s,i,c){Math.abs(i.offset.x)>o.sensitivity||Math.abs(i.offset.y)>o.sensitivity?m(c):d(c).reset()}const m=s=>{const i=[...e.value],c=i.findIndex(h=>h.id===s),[f]=i.splice(c,1);i.unshift(f),e.value=i};return(s,i)=>(t.openBlock(),t.createElementBlock("div",{class:"relative",style:t.normalizeStyle({width:s.cardDimensions.width+"px",height:s.cardDimensions.height+"px",perspective:600})},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.value,(c,f)=>{var h,p,g,b;return t.openBlock(),t.createBlock(t.unref(l.Motion),{key:c.id,as:"div",class:"absolute cursor-grab",style:t.normalizeStyle({x:(h=t.unref(a).get(c.id))==null?void 0:h.x,y:(p=t.unref(a).get(c.id))==null?void 0:p.y,rotateX:(g=t.unref(a).get(c.id))==null?void 0:g.rotateX,rotateY:(b=t.unref(a).get(c.id))==null?void 0:b.rotateY}),drag:"","drag-constraints":{top:0,right:0,bottom:0,left:0},dragElastic:.6,whileTap:{cursor:"grabbing",scale:1.02},onDragEnd:(v,B)=>u(v,B,c.id)},{default:t.withCtx(()=>[t.createVNode(t.unref(l.Motion),{as:"div",class:"rounded-2xl overflow-hidden border-4 border-white",onClick:v=>s.sendToBackOnClick&&m(c.id),animate:{rotateZ:(e.value.length-f-1)*4+(s.randomRotation?Math.random()*10-5:0),scale:1+f*.06-e.value.length*.06,transformOrigin:"90% 90%"},initial:!1,transition:{type:"spring",stiffness:s.animationConfig.stiffness,damping:s.animationConfig.damping},style:t.normalizeStyle({width:s.cardDimensions.width+"px",height:s.cardDimensions.height+"px"})},{default:t.withCtx(()=>[t.createElementVNode("img",{src:c.img,alt:`card-${c.id}`,className:"w-full h-full object-cover pointer-events-none"},null,8,M)]),_:2},1032,["onClick","animate","transition","style"])]),_:2},1032,["style","onDragEnd"])}),128))],4))}}),_={class:"vue-bits-plugin"},E=t.defineComponent({__name:"App",props:{title:{},theme:{},showLogos:{type:Boolean}},setup(n){const o=[{id:1,img:"https://images.unsplash.com/photo-1480074568708-e7b720bb3f09?q=80&w=500&auto=format"},{id:2,img:"https://images.unsplash.com/photo-1449844908441-8829872d2607?q=80&w=500&auto=format"},{id:3,img:"https://images.unsplash.com/photo-1452626212852-811d58933cae?q=80&w=500&auto=format"},{id:4,img:"https://images.unsplash.com/photo-1572120360610-d971b9d7767c?q=80&w=500&auto=format"}];return(e,a)=>(t.openBlock(),t.createElementBlock("div",_,[t.createVNode(D,{randomRotation:!0,sensitivity:180,sendToBackOnClick:!1,cardDimensions:{width:400,height:300},cardsData:o})]))}});function q(n={}){return function(o={}){const e={...n,...o};return{render(){return t.h(E,e)}}}}module.exports=q;
